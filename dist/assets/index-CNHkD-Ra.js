var Vd=Object.defineProperty;var qd=(t,e,r)=>e in t?Vd(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var _e=(t,e,r)=>qd(t,typeof e!="symbol"?e+"":e,r);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=r(s);fetch(s.href,o)}})();/**
* @vue/shared v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Ci(t){const e=Object.create(null);for(const r of t.split(","))e[r]=1;return r=>r in e}const Ie={},ln=[],Vt=()=>{},Wd=()=>!1,go=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Di=t=>t.startsWith("onUpdate:"),ft=Object.assign,Ai=(t,e)=>{const r=t.indexOf(e);r>-1&&t.splice(r,1)},Yd=Object.prototype.hasOwnProperty,Re=(t,e)=>Yd.call(t,e),he=Array.isArray,cn=t=>cs(t)==="[object Map]",mn=t=>cs(t)==="[object Set]",vl=t=>cs(t)==="[object Date]",ye=t=>typeof t=="function",Ke=t=>typeof t=="string",qt=t=>typeof t=="symbol",Le=t=>t!==null&&typeof t=="object",lc=t=>(Le(t)||ye(t))&&ye(t.then)&&ye(t.catch),cc=Object.prototype.toString,cs=t=>cc.call(t),Qd=t=>cs(t).slice(8,-1),uc=t=>cs(t)==="[object Object]",Bi=t=>Ke(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Tn=Ci(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),po=t=>{const e=Object.create(null);return r=>e[r]||(e[r]=t(r))},Xd=/-(\w)/g,Dt=po(t=>t.replace(Xd,(e,r)=>r?r.toUpperCase():"")),Jd=/\B([A-Z])/g,Yr=po(t=>t.replace(Jd,"-$1").toLowerCase()),us=po(t=>t.charAt(0).toUpperCase()+t.slice(1)),$s=po(t=>t?`on${us(t)}`:""),Cr=(t,e)=>!Object.is(t,e),Os=(t,...e)=>{for(let r=0;r<t.length;r++)t[r](...e)},dc=(t,e,r,n=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:n,value:r})},Vs=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let yl;const vo=()=>yl||(yl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function ds(t){if(he(t)){const e={};for(let r=0;r<t.length;r++){const n=t[r],s=Ke(n)?rf(n):ds(n);if(s)for(const o in s)e[o]=s[o]}return e}else if(Ke(t)||Le(t))return t}const Zd=/;(?![^(]*\))/g,ef=/:([^]+)/,tf=/\/\*[^]*?\*\//g;function rf(t){const e={};return t.replace(tf,"").split(Zd).forEach(r=>{if(r){const n=r.split(ef);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function He(t){let e="";if(Ke(t))e=t;else if(he(t))for(let r=0;r<t.length;r++){const n=He(t[r]);n&&(e+=n+" ")}else if(Le(t))for(const r in t)t[r]&&(e+=r+" ");return e.trim()}const nf="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",sf=Ci(nf);function fc(t){return!!t||t===""}function of(t,e){if(t.length!==e.length)return!1;let r=!0;for(let n=0;r&&n<t.length;n++)r=Nr(t[n],e[n]);return r}function Nr(t,e){if(t===e)return!0;let r=vl(t),n=vl(e);if(r||n)return r&&n?t.getTime()===e.getTime():!1;if(r=qt(t),n=qt(e),r||n)return t===e;if(r=he(t),n=he(e),r||n)return r&&n?of(t,e):!1;if(r=Le(t),n=Le(e),r||n){if(!r||!n)return!1;const s=Object.keys(t).length,o=Object.keys(e).length;if(s!==o)return!1;for(const a in t){const i=t.hasOwnProperty(a),l=e.hasOwnProperty(a);if(i&&!l||!i&&l||!Nr(t[a],e[a]))return!1}}return String(t)===String(e)}function Si(t,e){return t.findIndex(r=>Nr(r,e))}const hc=t=>!!(t&&t.__v_isRef===!0),Z=t=>Ke(t)?t:t==null?"":he(t)||Le(t)&&(t.toString===cc||!ye(t.toString))?hc(t)?Z(t.value):JSON.stringify(t,xc,2):String(t),xc=(t,e)=>hc(e)?xc(t,e.value):cn(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((r,[n,s],o)=>(r[Io(n,o)+" =>"]=s,r),{})}:mn(e)?{[`Set(${e.size})`]:[...e.values()].map(r=>Io(r))}:qt(e)?Io(e):Le(e)&&!he(e)&&!uc(e)?String(e):e,Io=(t,e="")=>{var r;return qt(t)?`Symbol(${(r=t.description)!=null?r:e})`:t};/**
* @vue/reactivity v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let it;class Fi{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=it,!e&&it&&(this.index=(it.scopes||(it.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,r;if(this.scopes)for(e=0,r=this.scopes.length;e<r;e++)this.scopes[e].pause();for(e=0,r=this.effects.length;e<r;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,r;if(this.scopes)for(e=0,r=this.scopes.length;e<r;e++)this.scopes[e].resume();for(e=0,r=this.effects.length;e<r;e++)this.effects[e].resume()}}run(e){if(this._active){const r=it;try{return it=this,e()}finally{it=r}}}on(){++this._on===1&&(this.prevScope=it,it=this)}off(){this._on>0&&--this._on===0&&(it=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let r,n;for(r=0,n=this.effects.length;r<n;r++)this.effects[r].stop();for(this.effects.length=0,r=0,n=this.cleanups.length;r<n;r++)this.cleanups[r]();if(this.cleanups.length=0,this.scopes){for(r=0,n=this.scopes.length;r<n;r++)this.scopes[r].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function Pi(t){return new Fi(t)}function Ti(){return it}function gc(t,e=!1){it&&it.cleanups.push(t)}let Ue;const $o=new WeakSet;class Ri{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,it&&it.active&&it.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,$o.has(this)&&($o.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||vc(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,ml(this),yc(this);const e=Ue,r=Ut;Ue=this,Ut=!0;try{return this.fn()}finally{mc(this),Ue=e,Ut=r,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Oi(e);this.deps=this.depsTail=void 0,ml(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?$o.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Oa(this)&&this.run()}get dirty(){return Oa(this)}}let pc=0,Rn,In;function vc(t,e=!1){if(t.flags|=8,e){t.next=In,In=t;return}t.next=Rn,Rn=t}function Ii(){pc++}function $i(){if(--pc>0)return;if(In){let e=In;for(In=void 0;e;){const r=e.next;e.next=void 0,e.flags&=-9,e=r}}let t;for(;Rn;){let e=Rn;for(Rn=void 0;e;){const r=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(n){t||(t=n)}e=r}}if(t)throw t}function yc(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function mc(t){let e,r=t.depsTail,n=r;for(;n;){const s=n.prevDep;n.version===-1?(n===r&&(r=s),Oi(n),af(n)):e=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=s}t.deps=e,t.depsTail=r}function Oa(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(wc(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function wc(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Wn)||(t.globalVersion=Wn,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!Oa(t))))return;t.flags|=2;const e=t.dep,r=Ue,n=Ut;Ue=t,Ut=!0;try{yc(t);const s=t.fn(t._value);(e.version===0||Cr(s,t._value))&&(t.flags|=128,t._value=s,e.version++)}catch(s){throw e.version++,s}finally{Ue=r,Ut=n,mc(t),t.flags&=-3}}function Oi(t,e=!1){const{dep:r,prevSub:n,nextSub:s}=t;if(n&&(n.nextSub=s,t.prevSub=void 0),s&&(s.prevSub=n,t.nextSub=void 0),r.subs===t&&(r.subs=n,!n&&r.computed)){r.computed.flags&=-5;for(let o=r.computed.deps;o;o=o.nextDep)Oi(o,!0)}!e&&!--r.sc&&r.map&&r.map.delete(r.key)}function af(t){const{prevDep:e,nextDep:r}=t;e&&(e.nextDep=r,t.prevDep=void 0),r&&(r.prevDep=e,t.nextDep=void 0)}let Ut=!0;const bc=[];function cr(){bc.push(Ut),Ut=!1}function ur(){const t=bc.pop();Ut=t===void 0?!0:t}function ml(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const r=Ue;Ue=void 0;try{e()}finally{Ue=r}}}let Wn=0;class lf{constructor(e,r){this.sub=e,this.dep=r,this.version=r.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Ui{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!Ue||!Ut||Ue===this.computed)return;let r=this.activeLink;if(r===void 0||r.sub!==Ue)r=this.activeLink=new lf(Ue,this),Ue.deps?(r.prevDep=Ue.depsTail,Ue.depsTail.nextDep=r,Ue.depsTail=r):Ue.deps=Ue.depsTail=r,_c(r);else if(r.version===-1&&(r.version=this.version,r.nextDep)){const n=r.nextDep;n.prevDep=r.prevDep,r.prevDep&&(r.prevDep.nextDep=n),r.prevDep=Ue.depsTail,r.nextDep=void 0,Ue.depsTail.nextDep=r,Ue.depsTail=r,Ue.deps===r&&(Ue.deps=n)}return r}trigger(e){this.version++,Wn++,this.notify(e)}notify(e){Ii();try{for(let r=this.subs;r;r=r.prevSub)r.sub.notify()&&r.sub.dep.notify()}finally{$i()}}}function _c(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let n=e.deps;n;n=n.nextDep)_c(n)}const r=t.dep.subs;r!==t&&(t.prevSub=r,r&&(r.nextSub=t)),t.dep.subs=t}}const qs=new WeakMap,Lr=Symbol(""),Ua=Symbol(""),Yn=Symbol("");function lt(t,e,r){if(Ut&&Ue){let n=qs.get(t);n||qs.set(t,n=new Map);let s=n.get(r);s||(n.set(r,s=new Ui),s.map=n,s.key=r),s.track()}}function er(t,e,r,n,s,o){const a=qs.get(t);if(!a){Wn++;return}const i=l=>{l&&l.trigger()};if(Ii(),e==="clear")a.forEach(i);else{const l=he(t),u=l&&Bi(r);if(l&&r==="length"){const c=Number(n);a.forEach((d,f)=>{(f==="length"||f===Yn||!qt(f)&&f>=c)&&i(d)})}else switch((r!==void 0||a.has(void 0))&&i(a.get(r)),u&&i(a.get(Yn)),e){case"add":l?u&&i(a.get("length")):(i(a.get(Lr)),cn(t)&&i(a.get(Ua)));break;case"delete":l||(i(a.get(Lr)),cn(t)&&i(a.get(Ua)));break;case"set":cn(t)&&i(a.get(Lr));break}}$i()}function cf(t,e){const r=qs.get(t);return r&&r.get(e)}function en(t){const e=Ae(t);return e===t?e:(lt(e,"iterate",Yn),kt(t)?e:e.map(tt))}function yo(t){return lt(t=Ae(t),"iterate",Yn),t}const uf={__proto__:null,[Symbol.iterator](){return Oo(this,Symbol.iterator,tt)},concat(...t){return en(this).concat(...t.map(e=>he(e)?en(e):e))},entries(){return Oo(this,"entries",t=>(t[1]=tt(t[1]),t))},every(t,e){return Yt(this,"every",t,e,void 0,arguments)},filter(t,e){return Yt(this,"filter",t,e,r=>r.map(tt),arguments)},find(t,e){return Yt(this,"find",t,e,tt,arguments)},findIndex(t,e){return Yt(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return Yt(this,"findLast",t,e,tt,arguments)},findLastIndex(t,e){return Yt(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return Yt(this,"forEach",t,e,void 0,arguments)},includes(...t){return Uo(this,"includes",t)},indexOf(...t){return Uo(this,"indexOf",t)},join(t){return en(this).join(t)},lastIndexOf(...t){return Uo(this,"lastIndexOf",t)},map(t,e){return Yt(this,"map",t,e,void 0,arguments)},pop(){return Cn(this,"pop")},push(...t){return Cn(this,"push",t)},reduce(t,...e){return wl(this,"reduce",t,e)},reduceRight(t,...e){return wl(this,"reduceRight",t,e)},shift(){return Cn(this,"shift")},some(t,e){return Yt(this,"some",t,e,void 0,arguments)},splice(...t){return Cn(this,"splice",t)},toReversed(){return en(this).toReversed()},toSorted(t){return en(this).toSorted(t)},toSpliced(...t){return en(this).toSpliced(...t)},unshift(...t){return Cn(this,"unshift",t)},values(){return Oo(this,"values",tt)}};function Oo(t,e,r){const n=yo(t),s=n[e]();return n!==t&&!kt(t)&&(s._next=s.next,s.next=()=>{const o=s._next();return o.value&&(o.value=r(o.value)),o}),s}const df=Array.prototype;function Yt(t,e,r,n,s,o){const a=yo(t),i=a!==t&&!kt(t),l=a[e];if(l!==df[e]){const d=l.apply(t,o);return i?tt(d):d}let u=r;a!==t&&(i?u=function(d,f){return r.call(this,tt(d),f,t)}:r.length>2&&(u=function(d,f){return r.call(this,d,f,t)}));const c=l.call(a,u,n);return i&&s?s(c):c}function wl(t,e,r,n){const s=yo(t);let o=r;return s!==t&&(kt(t)?r.length>3&&(o=function(a,i,l){return r.call(this,a,i,l,t)}):o=function(a,i,l){return r.call(this,a,tt(i),l,t)}),s[e](o,...n)}function Uo(t,e,r){const n=Ae(t);lt(n,"iterate",Yn);const s=n[e](...r);return(s===-1||s===!1)&&bo(r[0])?(r[0]=Ae(r[0]),n[e](...r)):s}function Cn(t,e,r=[]){cr(),Ii();const n=Ae(t)[e].apply(t,r);return $i(),ur(),n}const ff=Ci("__proto__,__v_isRef,__isVue"),Ec=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(qt));function hf(t){qt(t)||(t=String(t));const e=Ae(this);return lt(e,"has",t),e.hasOwnProperty(t)}class kc{constructor(e=!1,r=!1){this._isReadonly=e,this._isShallow=r}get(e,r,n){if(r==="__v_skip")return e.__v_skip;const s=this._isReadonly,o=this._isShallow;if(r==="__v_isReactive")return!s;if(r==="__v_isReadonly")return s;if(r==="__v_isShallow")return o;if(r==="__v_raw")return n===(s?o?Fc:Sc:o?Bc:Ac).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(n)?e:void 0;const a=he(e);if(!s){let l;if(a&&(l=uf[r]))return l;if(r==="hasOwnProperty")return hf}const i=Reflect.get(e,r,ze(e)?e:n);return(qt(r)?Ec.has(r):ff(r))||(s||lt(e,"get",r),o)?i:ze(i)?a&&Bi(r)?i:i.value:Le(i)?s?Hi(i):Qr(i):i}}class Cc extends kc{constructor(e=!1){super(!1,e)}set(e,r,n,s){let o=e[r];if(!this._isShallow){const l=dr(o);if(!kt(n)&&!dr(n)&&(o=Ae(o),n=Ae(n)),!he(e)&&ze(o)&&!ze(n))return l?!1:(o.value=n,!0)}const a=he(e)&&Bi(r)?Number(r)<e.length:Re(e,r),i=Reflect.set(e,r,n,ze(e)?e:s);return e===Ae(s)&&(a?Cr(n,o)&&er(e,"set",r,n):er(e,"add",r,n)),i}deleteProperty(e,r){const n=Re(e,r);e[r];const s=Reflect.deleteProperty(e,r);return s&&n&&er(e,"delete",r,void 0),s}has(e,r){const n=Reflect.has(e,r);return(!qt(r)||!Ec.has(r))&&lt(e,"has",r),n}ownKeys(e){return lt(e,"iterate",he(e)?"length":Lr),Reflect.ownKeys(e)}}class Dc extends kc{constructor(e=!1){super(!0,e)}set(e,r){return!0}deleteProperty(e,r){return!0}}const xf=new Cc,gf=new Dc,pf=new Cc(!0),vf=new Dc(!0),La=t=>t,ks=t=>Reflect.getPrototypeOf(t);function yf(t,e,r){return function(...n){const s=this.__v_raw,o=Ae(s),a=cn(o),i=t==="entries"||t===Symbol.iterator&&a,l=t==="keys"&&a,u=s[t](...n),c=r?La:e?Ws:tt;return!e&&lt(o,"iterate",l?Ua:Lr),{next(){const{value:d,done:f}=u.next();return f?{value:d,done:f}:{value:i?[c(d[0]),c(d[1])]:c(d),done:f}},[Symbol.iterator](){return this}}}}function Cs(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function mf(t,e){const r={get(s){const o=this.__v_raw,a=Ae(o),i=Ae(s);t||(Cr(s,i)&&lt(a,"get",s),lt(a,"get",i));const{has:l}=ks(a),u=e?La:t?Ws:tt;if(l.call(a,s))return u(o.get(s));if(l.call(a,i))return u(o.get(i));o!==a&&o.get(s)},get size(){const s=this.__v_raw;return!t&&lt(Ae(s),"iterate",Lr),Reflect.get(s,"size",s)},has(s){const o=this.__v_raw,a=Ae(o),i=Ae(s);return t||(Cr(s,i)&&lt(a,"has",s),lt(a,"has",i)),s===i?o.has(s):o.has(s)||o.has(i)},forEach(s,o){const a=this,i=a.__v_raw,l=Ae(i),u=e?La:t?Ws:tt;return!t&&lt(l,"iterate",Lr),i.forEach((c,d)=>s.call(o,u(c),u(d),a))}};return ft(r,t?{add:Cs("add"),set:Cs("set"),delete:Cs("delete"),clear:Cs("clear")}:{add(s){!e&&!kt(s)&&!dr(s)&&(s=Ae(s));const o=Ae(this);return ks(o).has.call(o,s)||(o.add(s),er(o,"add",s,s)),this},set(s,o){!e&&!kt(o)&&!dr(o)&&(o=Ae(o));const a=Ae(this),{has:i,get:l}=ks(a);let u=i.call(a,s);u||(s=Ae(s),u=i.call(a,s));const c=l.call(a,s);return a.set(s,o),u?Cr(o,c)&&er(a,"set",s,o):er(a,"add",s,o),this},delete(s){const o=Ae(this),{has:a,get:i}=ks(o);let l=a.call(o,s);l||(s=Ae(s),l=a.call(o,s)),i&&i.call(o,s);const u=o.delete(s);return l&&er(o,"delete",s,void 0),u},clear(){const s=Ae(this),o=s.size!==0,a=s.clear();return o&&er(s,"clear",void 0,void 0),a}}),["keys","values","entries",Symbol.iterator].forEach(s=>{r[s]=yf(s,t,e)}),r}function mo(t,e){const r=mf(t,e);return(n,s,o)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?n:Reflect.get(Re(r,s)&&s in n?r:n,s,o)}const wf={get:mo(!1,!1)},bf={get:mo(!1,!0)},_f={get:mo(!0,!1)},Ef={get:mo(!0,!0)},Ac=new WeakMap,Bc=new WeakMap,Sc=new WeakMap,Fc=new WeakMap;function kf(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Cf(t){return t.__v_skip||!Object.isExtensible(t)?0:kf(Qd(t))}function Qr(t){return dr(t)?t:wo(t,!1,xf,wf,Ac)}function Li(t){return wo(t,!1,pf,bf,Bc)}function Hi(t){return wo(t,!0,gf,_f,Sc)}function Df(t){return wo(t,!0,vf,Ef,Fc)}function wo(t,e,r,n,s){if(!Le(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const o=Cf(t);if(o===0)return t;const a=s.get(t);if(a)return a;const i=new Proxy(t,o===2?n:r);return s.set(t,i),i}function or(t){return dr(t)?or(t.__v_raw):!!(t&&t.__v_isReactive)}function dr(t){return!!(t&&t.__v_isReadonly)}function kt(t){return!!(t&&t.__v_isShallow)}function bo(t){return t?!!t.__v_raw:!1}function Ae(t){const e=t&&t.__v_raw;return e?Ae(e):t}function _o(t){return!Re(t,"__v_skip")&&Object.isExtensible(t)&&dc(t,"__v_skip",!0),t}const tt=t=>Le(t)?Qr(t):t,Ws=t=>Le(t)?Hi(t):t;function ze(t){return t?t.__v_isRef===!0:!1}function Q(t){return Tc(t,!1)}function Pc(t){return Tc(t,!0)}function Tc(t,e){return ze(t)?t:new Af(t,e)}class Af{constructor(e,r){this.dep=new Ui,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=r?e:Ae(e),this._value=r?e:tt(e),this.__v_isShallow=r}get value(){return this.dep.track(),this._value}set value(e){const r=this._rawValue,n=this.__v_isShallow||kt(e)||dr(e);e=n?e:Ae(e),Cr(e,r)&&(this._rawValue=e,this._value=n?e:tt(e),this.dep.trigger())}}function ke(t){return ze(t)?t.value:t}const Bf={get:(t,e,r)=>e==="__v_raw"?t:ke(Reflect.get(t,e,r)),set:(t,e,r,n)=>{const s=t[e];return ze(s)&&!ze(r)?(s.value=r,!0):Reflect.set(t,e,r,n)}};function Mi(t){return or(t)?t:new Proxy(t,Bf)}function Rc(t){const e=he(t)?new Array(t.length):{};for(const r in t)e[r]=Ff(t,r);return e}class Sf{constructor(e,r,n){this._object=e,this._key=r,this._defaultValue=n,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return cf(Ae(this._object),this._key)}}function Ff(t,e,r){const n=t[e];return ze(n)?n:new Sf(t,e,r)}class Pf{constructor(e,r,n){this.fn=e,this.setter=r,this._value=void 0,this.dep=new Ui(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Wn-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!r,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&Ue!==this)return vc(this,!0),!0}get value(){const e=this.dep.track();return wc(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function Tf(t,e,r=!1){let n,s;return ye(t)?n=t:(n=t.get,s=t.set),new Pf(n,s,r)}const Ds={},Ys=new WeakMap;let $r;function Ic(t,e=!1,r=$r){if(r){let n=Ys.get(r);n||Ys.set(r,n=[]),n.push(t)}}function Rf(t,e,r=Ie){const{immediate:n,deep:s,once:o,scheduler:a,augmentJob:i,call:l}=r,u=b=>s?b:kt(b)||s===!1||s===0?tr(b,1):tr(b);let c,d,f,h,m=!1,y=!1;if(ze(t)?(d=()=>t.value,m=kt(t)):or(t)?(d=()=>u(t),m=!0):he(t)?(y=!0,m=t.some(b=>or(b)||kt(b)),d=()=>t.map(b=>{if(ze(b))return b.value;if(or(b))return u(b);if(ye(b))return l?l(b,2):b()})):ye(t)?e?d=l?()=>l(t,2):t:d=()=>{if(f){cr();try{f()}finally{ur()}}const b=$r;$r=c;try{return l?l(t,3,[h]):t(h)}finally{$r=b}}:d=Vt,e&&s){const b=d,E=s===!0?1/0:s;d=()=>tr(b(),E)}const v=Ti(),p=()=>{c.stop(),v&&v.active&&Ai(v.effects,c)};if(o&&e){const b=e;e=(...E)=>{b(...E),p()}}let x=y?new Array(t.length).fill(Ds):Ds;const w=b=>{if(!(!(c.flags&1)||!c.dirty&&!b))if(e){const E=c.run();if(s||m||(y?E.some((k,_)=>Cr(k,x[_])):Cr(E,x))){f&&f();const k=$r;$r=c;try{const _=[E,x===Ds?void 0:y&&x[0]===Ds?[]:x,h];x=E,l?l(e,3,_):e(..._)}finally{$r=k}}}else c.run()};return i&&i(w),c=new Ri(d),c.scheduler=a?()=>a(w,!1):w,h=b=>Ic(b,!1,c),f=c.onStop=()=>{const b=Ys.get(c);if(b){if(l)l(b,4);else for(const E of b)E();Ys.delete(c)}},e?n?w(!0):x=c.run():a?a(w.bind(null,!0),!0):c.run(),p.pause=c.pause.bind(c),p.resume=c.resume.bind(c),p.stop=p,p}function tr(t,e=1/0,r){if(e<=0||!Le(t)||t.__v_skip||(r=r||new Set,r.has(t)))return t;if(r.add(t),e--,ze(t))tr(t.value,e,r);else if(he(t))for(let n=0;n<t.length;n++)tr(t[n],e,r);else if(mn(t)||cn(t))t.forEach(n=>{tr(n,e,r)});else if(uc(t)){for(const n in t)tr(t[n],e,r);for(const n of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,n)&&tr(t[n],e,r)}return t}/**
* @vue/runtime-core v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function wn(t,e,r,n){try{return n?t(...n):t()}catch(s){fs(s,e,r)}}function Ht(t,e,r,n){if(ye(t)){const s=wn(t,e,r,n);return s&&lc(s)&&s.catch(o=>{fs(o,e,r)}),s}if(he(t)){const s=[];for(let o=0;o<t.length;o++)s.push(Ht(t[o],e,r,n));return s}}function fs(t,e,r,n=!0){const s=e?e.vnode:null,{errorHandler:o,throwUnhandledErrorInProduction:a}=e&&e.appContext.config||Ie;if(e){let i=e.parent;const l=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${r}`;for(;i;){const c=i.ec;if(c){for(let d=0;d<c.length;d++)if(c[d](t,l,u)===!1)return}i=i.parent}if(o){cr(),wn(o,null,10,[t,l,u]),ur();return}}If(t,r,s,n,a)}function If(t,e,r,n=!0,s=!1){if(s)throw t;console.error(t)}const gt=[];let jt=-1;const un=[];let wr=null,sn=0;const $c=Promise.resolve();let Qs=null;function Kr(t){const e=Qs||$c;return t?e.then(this?t.bind(this):t):e}function $f(t){let e=jt+1,r=gt.length;for(;e<r;){const n=e+r>>>1,s=gt[n],o=Qn(s);o<t||o===t&&s.flags&2?e=n+1:r=n}return e}function Gi(t){if(!(t.flags&1)){const e=Qn(t),r=gt[gt.length-1];!r||!(t.flags&2)&&e>=Qn(r)?gt.push(t):gt.splice($f(e),0,t),t.flags|=1,Oc()}}function Oc(){Qs||(Qs=$c.then(Hc))}function Uc(t){he(t)?un.push(...t):wr&&t.id===-1?wr.splice(sn+1,0,t):t.flags&1||(un.push(t),t.flags|=1),Oc()}function bl(t,e,r=jt+1){for(;r<gt.length;r++){const n=gt[r];if(n&&n.flags&2){if(t&&n.id!==t.uid)continue;gt.splice(r,1),r--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function Lc(t){if(un.length){const e=[...new Set(un)].sort((r,n)=>Qn(r)-Qn(n));if(un.length=0,wr){wr.push(...e);return}for(wr=e,sn=0;sn<wr.length;sn++){const r=wr[sn];r.flags&4&&(r.flags&=-2),r.flags&8||r(),r.flags&=-2}wr=null,sn=0}}const Qn=t=>t.id==null?t.flags&2?-1:1/0:t.id;function Hc(t){try{for(jt=0;jt<gt.length;jt++){const e=gt[jt];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),wn(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;jt<gt.length;jt++){const e=gt[jt];e&&(e.flags&=-2)}jt=-1,gt.length=0,Lc(),Qs=null,(gt.length||un.length)&&Hc()}}let yt=null,Mc=null;function Xs(t){const e=yt;return yt=t,Mc=t&&t.type.__scopeId||null,e}function Js(t,e=yt,r){if(!e||t._n)return t;const n=(...s)=>{n._d&&Na(-1);const o=Xs(e);let a;try{a=t(...s)}finally{Xs(o),n._d&&Na(1)}return a};return n._n=!0,n._c=!0,n._d=!0,n}function ct(t,e){if(yt===null)return t;const r=Do(yt),n=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[o,a,i,l=Ie]=e[s];o&&(ye(o)&&(o={mounted:o,updated:o}),o.deep&&tr(a),n.push({dir:o,instance:r,value:a,oldValue:void 0,arg:i,modifiers:l}))}return t}function Tr(t,e,r,n){const s=t.dirs,o=e&&e.dirs;for(let a=0;a<s.length;a++){const i=s[a];o&&(i.oldValue=o[a].value);let l=i.dir[n];l&&(cr(),Ht(l,r,8,[t.el,i,t,e]),ur())}}const Of=Symbol("_vte"),Uf=t=>t.__isTeleport;function Eo(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Eo(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}/*! #__NO_SIDE_EFFECTS__ */function Qe(t,e){return ye(t)?ft({name:t.name},e,{setup:t}):t}function Gc(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function Zs(t,e,r,n,s=!1){if(he(t)){t.forEach((m,y)=>Zs(m,e&&(he(e)?e[y]:e),r,n,s));return}if($n(n)&&!s){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&Zs(t,e,r,n.component.subTree);return}const o=n.shapeFlag&4?Do(n.component):n.el,a=s?null:o,{i,r:l}=t,u=e&&e.r,c=i.refs===Ie?i.refs={}:i.refs,d=i.setupState,f=Ae(d),h=d===Ie?()=>!1:m=>Re(f,m);if(u!=null&&u!==l&&(Ke(u)?(c[u]=null,h(u)&&(d[u]=null)):ze(u)&&(u.value=null)),ye(l))wn(l,i,12,[a,c]);else{const m=Ke(l),y=ze(l);if(m||y){const v=()=>{if(t.f){const p=m?h(l)?d[l]:c[l]:l.value;s?he(p)&&Ai(p,o):he(p)?p.includes(o)||p.push(o):m?(c[l]=[o],h(l)&&(d[l]=c[l])):(l.value=[o],t.k&&(c[t.k]=l.value))}else m?(c[l]=a,h(l)&&(d[l]=a)):y&&(l.value=a,t.k&&(c[t.k]=a))};a?(v.id=-1,bt(v,r)):v()}}}vo().requestIdleCallback;vo().cancelIdleCallback;const $n=t=>!!t.type.__asyncLoader,jc=t=>t.type.__isKeepAlive;function zc(t,e){Kc(t,"a",e)}function Nc(t,e){Kc(t,"da",e)}function Kc(t,e,r=rt){const n=t.__wdc||(t.__wdc=()=>{let s=r;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(ko(e,n,r),r){let s=r.parent;for(;s&&s.parent;)jc(s.parent.vnode)&&Lf(n,e,r,s),s=s.parent}}function Lf(t,e,r,n){const s=ko(e,t,n,!0);hs(()=>{Ai(n[e],s)},r)}function ko(t,e,r=rt,n=!1){if(r){const s=r[t]||(r[t]=[]),o=e.__weh||(e.__weh=(...a)=>{cr();const i=gs(r),l=Ht(e,r,t,a);return i(),ur(),l});return n?s.unshift(o):s.push(o),o}}const xr=t=>(e,r=rt)=>{(!Zn||t==="sp")&&ko(t,(...n)=>e(...n),r)},Vc=xr("bm"),gr=xr("m"),qc=xr("bu"),Wc=xr("u"),Yc=xr("bum"),hs=xr("um"),Qc=xr("sp"),Xc=xr("rtg"),Jc=xr("rtc");function Zc(t,e=rt){ko("ec",t,e)}const Hf="components";function Ha(t,e){return Gf(Hf,t,!0,e)||t}const Mf=Symbol.for("v-ndc");function Gf(t,e,r=!0,n=!1){const s=yt||rt;if(s){const o=s.type;{const i=_h(o,!1);if(i&&(i===e||i===Dt(e)||i===us(Dt(e))))return o}const a=_l(s[t]||o[t],e)||_l(s.appContext[t],e);return!a&&n?o:a}}function _l(t,e){return t&&(t[e]||t[Dt(e)]||t[us(Dt(e))])}function _t(t,e,r,n){let s;const o=r,a=he(t);if(a||Ke(t)){const i=a&&or(t);let l=!1,u=!1;i&&(l=!kt(t),u=dr(t),t=yo(t)),s=new Array(t.length);for(let c=0,d=t.length;c<d;c++)s[c]=e(l?u?Ws(tt(t[c])):tt(t[c]):t[c],c,void 0,o)}else if(typeof t=="number"){s=new Array(t);for(let i=0;i<t;i++)s[i]=e(i+1,i,void 0,o)}else if(Le(t))if(t[Symbol.iterator])s=Array.from(t,(i,l)=>e(i,l,void 0,o));else{const i=Object.keys(t);s=new Array(i.length);for(let l=0,u=i.length;l<u;l++){const c=i[l];s[l]=e(t[c],c,l,o)}}else s=[];return s}const Ma=t=>t?Cu(t)?Do(t):Ma(t.parent):null,On=ft(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Ma(t.parent),$root:t=>Ma(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>tu(t),$forceUpdate:t=>t.f||(t.f=()=>{Gi(t.update)}),$nextTick:t=>t.n||(t.n=Kr.bind(t.proxy)),$watch:t=>oh.bind(t)}),Lo=(t,e)=>t!==Ie&&!t.__isScriptSetup&&Re(t,e),jf={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:r,setupState:n,data:s,props:o,accessCache:a,type:i,appContext:l}=t;let u;if(e[0]!=="$"){const h=a[e];if(h!==void 0)switch(h){case 1:return n[e];case 2:return s[e];case 4:return r[e];case 3:return o[e]}else{if(Lo(n,e))return a[e]=1,n[e];if(s!==Ie&&Re(s,e))return a[e]=2,s[e];if((u=t.propsOptions[0])&&Re(u,e))return a[e]=3,o[e];if(r!==Ie&&Re(r,e))return a[e]=4,r[e];Ga&&(a[e]=0)}}const c=On[e];let d,f;if(c)return e==="$attrs"&&lt(t.attrs,"get",""),c(t);if((d=i.__cssModules)&&(d=d[e]))return d;if(r!==Ie&&Re(r,e))return a[e]=4,r[e];if(f=l.config.globalProperties,Re(f,e))return f[e]},set({_:t},e,r){const{data:n,setupState:s,ctx:o}=t;return Lo(s,e)?(s[e]=r,!0):n!==Ie&&Re(n,e)?(n[e]=r,!0):Re(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(o[e]=r,!0)},has({_:{data:t,setupState:e,accessCache:r,ctx:n,appContext:s,propsOptions:o}},a){let i;return!!r[a]||t!==Ie&&Re(t,a)||Lo(e,a)||(i=o[0])&&Re(i,a)||Re(n,a)||Re(On,a)||Re(s.config.globalProperties,a)},defineProperty(t,e,r){return r.get!=null?t._.accessCache[e]=0:Re(r,"value")&&this.set(t,e,r.value,null),Reflect.defineProperty(t,e,r)}};function El(t){return he(t)?t.reduce((e,r)=>(e[r]=null,e),{}):t}let Ga=!0;function zf(t){const e=tu(t),r=t.proxy,n=t.ctx;Ga=!1,e.beforeCreate&&kl(e.beforeCreate,t,"bc");const{data:s,computed:o,methods:a,watch:i,provide:l,inject:u,created:c,beforeMount:d,mounted:f,beforeUpdate:h,updated:m,activated:y,deactivated:v,beforeDestroy:p,beforeUnmount:x,destroyed:w,unmounted:b,render:E,renderTracked:k,renderTriggered:_,errorCaptured:C,serverPrefetch:S,expose:A,inheritAttrs:F,components:P,directives:T,filters:I}=e;if(u&&Nf(u,n,null),a)for(const Y in a){const te=a[Y];ye(te)&&(n[Y]=te.bind(r))}if(s){const Y=s.call(r,r);Le(Y)&&(t.data=Qr(Y))}if(Ga=!0,o)for(const Y in o){const te=o[Y],xe=ye(te)?te.bind(r,r):ye(te.get)?te.get.bind(r,r):Vt,fe=!ye(te)&&ye(te.set)?te.set.bind(r):Vt,H=ue({get:xe,set:fe});Object.defineProperty(n,Y,{enumerable:!0,configurable:!0,get:()=>H.value,set:U=>H.value=U})}if(i)for(const Y in i)eu(i[Y],n,r,Y);if(l){const Y=ye(l)?l.call(r):l;Reflect.ownKeys(Y).forEach(te=>{Un(te,Y[te])})}c&&kl(c,t,"c");function j(Y,te){he(te)?te.forEach(xe=>Y(xe.bind(r))):te&&Y(te.bind(r))}if(j(Vc,d),j(gr,f),j(qc,h),j(Wc,m),j(zc,y),j(Nc,v),j(Zc,C),j(Jc,k),j(Xc,_),j(Yc,x),j(hs,b),j(Qc,S),he(A))if(A.length){const Y=t.exposed||(t.exposed={});A.forEach(te=>{Object.defineProperty(Y,te,{get:()=>r[te],set:xe=>r[te]=xe})})}else t.exposed||(t.exposed={});E&&t.render===Vt&&(t.render=E),F!=null&&(t.inheritAttrs=F),P&&(t.components=P),T&&(t.directives=T),S&&Gc(t)}function Nf(t,e,r=Vt){he(t)&&(t=ja(t));for(const n in t){const s=t[n];let o;Le(s)?"default"in s?o=Pt(s.from||n,s.default,!0):o=Pt(s.from||n):o=Pt(s),ze(o)?Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:()=>o.value,set:a=>o.value=a}):e[n]=o}}function kl(t,e,r){Ht(he(t)?t.map(n=>n.bind(e.proxy)):t.bind(e.proxy),e,r)}function eu(t,e,r,n){let s=n.includes(".")?yu(r,n):()=>r[n];if(Ke(t)){const o=e[t];ye(o)&&ar(s,o)}else if(ye(t))ar(s,t.bind(r));else if(Le(t))if(he(t))t.forEach(o=>eu(o,e,r,n));else{const o=ye(t.handler)?t.handler.bind(r):e[t.handler];ye(o)&&ar(s,o,t)}}function tu(t){const e=t.type,{mixins:r,extends:n}=e,{mixins:s,optionsCache:o,config:{optionMergeStrategies:a}}=t.appContext,i=o.get(e);let l;return i?l=i:!s.length&&!r&&!n?l=e:(l={},s.length&&s.forEach(u=>eo(l,u,a,!0)),eo(l,e,a)),Le(e)&&o.set(e,l),l}function eo(t,e,r,n=!1){const{mixins:s,extends:o}=e;o&&eo(t,o,r,!0),s&&s.forEach(a=>eo(t,a,r,!0));for(const a in e)if(!(n&&a==="expose")){const i=Kf[a]||r&&r[a];t[a]=i?i(t[a],e[a]):e[a]}return t}const Kf={data:Cl,props:Dl,emits:Dl,methods:Sn,computed:Sn,beforeCreate:ht,created:ht,beforeMount:ht,mounted:ht,beforeUpdate:ht,updated:ht,beforeDestroy:ht,beforeUnmount:ht,destroyed:ht,unmounted:ht,activated:ht,deactivated:ht,errorCaptured:ht,serverPrefetch:ht,components:Sn,directives:Sn,watch:qf,provide:Cl,inject:Vf};function Cl(t,e){return e?t?function(){return ft(ye(t)?t.call(this,this):t,ye(e)?e.call(this,this):e)}:e:t}function Vf(t,e){return Sn(ja(t),ja(e))}function ja(t){if(he(t)){const e={};for(let r=0;r<t.length;r++)e[t[r]]=t[r];return e}return t}function ht(t,e){return t?[...new Set([].concat(t,e))]:e}function Sn(t,e){return t?ft(Object.create(null),t,e):e}function Dl(t,e){return t?he(t)&&he(e)?[...new Set([...t,...e])]:ft(Object.create(null),El(t),El(e??{})):e}function qf(t,e){if(!t)return e;if(!e)return t;const r=ft(Object.create(null),t);for(const n in e)r[n]=ht(t[n],e[n]);return r}function ru(){return{app:null,config:{isNativeTag:Wd,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Wf=0;function Yf(t,e){return function(n,s=null){ye(n)||(n=ft({},n)),s!=null&&!Le(s)&&(s=null);const o=ru(),a=new WeakSet,i=[];let l=!1;const u=o.app={_uid:Wf++,_component:n,_props:s,_container:null,_context:o,_instance:null,version:Au,get config(){return o.config},set config(c){},use(c,...d){return a.has(c)||(c&&ye(c.install)?(a.add(c),c.install(u,...d)):ye(c)&&(a.add(c),c(u,...d))),u},mixin(c){return o.mixins.includes(c)||o.mixins.push(c),u},component(c,d){return d?(o.components[c]=d,u):o.components[c]},directive(c,d){return d?(o.directives[c]=d,u):o.directives[c]},mount(c,d,f){if(!l){const h=u._ceVNode||je(n,s);return h.appContext=o,f===!0?f="svg":f===!1&&(f=void 0),t(h,c,f),l=!0,u._container=c,c.__vue_app__=u,Do(h.component)}},onUnmount(c){i.push(c)},unmount(){l&&(Ht(i,u._instance,16),t(null,u._container),delete u._container.__vue_app__)},provide(c,d){return o.provides[c]=d,u},runWithContext(c){const d=Hr;Hr=u;try{return c()}finally{Hr=d}}};return u}}let Hr=null;function Un(t,e){if(rt){let r=rt.provides;const n=rt.parent&&rt.parent.provides;n===r&&(r=rt.provides=Object.create(n)),r[t]=e}}function Pt(t,e,r=!1){const n=rt||yt;if(n||Hr){let s=Hr?Hr._context.provides:n?n.parent==null||n.ce?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(s&&t in s)return s[t];if(arguments.length>1)return r&&ye(e)?e.call(n&&n.proxy):e}}function nu(){return!!(rt||yt||Hr)}const su={},ou=()=>Object.create(su),au=t=>Object.getPrototypeOf(t)===su;function Qf(t,e,r,n=!1){const s={},o=ou();t.propsDefaults=Object.create(null),iu(t,e,s,o);for(const a in t.propsOptions[0])a in s||(s[a]=void 0);r?t.props=n?s:Li(s):t.type.props?t.props=s:t.props=o,t.attrs=o}function Xf(t,e,r,n){const{props:s,attrs:o,vnode:{patchFlag:a}}=t,i=Ae(s),[l]=t.propsOptions;let u=!1;if((n||a>0)&&!(a&16)){if(a&8){const c=t.vnode.dynamicProps;for(let d=0;d<c.length;d++){let f=c[d];if(Co(t.emitsOptions,f))continue;const h=e[f];if(l)if(Re(o,f))h!==o[f]&&(o[f]=h,u=!0);else{const m=Dt(f);s[m]=za(l,i,m,h,t,!1)}else h!==o[f]&&(o[f]=h,u=!0)}}}else{iu(t,e,s,o)&&(u=!0);let c;for(const d in i)(!e||!Re(e,d)&&((c=Yr(d))===d||!Re(e,c)))&&(l?r&&(r[d]!==void 0||r[c]!==void 0)&&(s[d]=za(l,i,d,void 0,t,!0)):delete s[d]);if(o!==i)for(const d in o)(!e||!Re(e,d))&&(delete o[d],u=!0)}u&&er(t.attrs,"set","")}function iu(t,e,r,n){const[s,o]=t.propsOptions;let a=!1,i;if(e)for(let l in e){if(Tn(l))continue;const u=e[l];let c;s&&Re(s,c=Dt(l))?!o||!o.includes(c)?r[c]=u:(i||(i={}))[c]=u:Co(t.emitsOptions,l)||(!(l in n)||u!==n[l])&&(n[l]=u,a=!0)}if(o){const l=Ae(r),u=i||Ie;for(let c=0;c<o.length;c++){const d=o[c];r[d]=za(s,l,d,u[d],t,!Re(u,d))}}return a}function za(t,e,r,n,s,o){const a=t[r];if(a!=null){const i=Re(a,"default");if(i&&n===void 0){const l=a.default;if(a.type!==Function&&!a.skipFactory&&ye(l)){const{propsDefaults:u}=s;if(r in u)n=u[r];else{const c=gs(s);n=u[r]=l.call(null,e),c()}}else n=l;s.ce&&s.ce._setProp(r,n)}a[0]&&(o&&!i?n=!1:a[1]&&(n===""||n===Yr(r))&&(n=!0))}return n}const Jf=new WeakMap;function lu(t,e,r=!1){const n=r?Jf:e.propsCache,s=n.get(t);if(s)return s;const o=t.props,a={},i=[];let l=!1;if(!ye(t)){const c=d=>{l=!0;const[f,h]=lu(d,e,!0);ft(a,f),h&&i.push(...h)};!r&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}if(!o&&!l)return Le(t)&&n.set(t,ln),ln;if(he(o))for(let c=0;c<o.length;c++){const d=Dt(o[c]);Al(d)&&(a[d]=Ie)}else if(o)for(const c in o){const d=Dt(c);if(Al(d)){const f=o[c],h=a[d]=he(f)||ye(f)?{type:f}:ft({},f),m=h.type;let y=!1,v=!0;if(he(m))for(let p=0;p<m.length;++p){const x=m[p],w=ye(x)&&x.name;if(w==="Boolean"){y=!0;break}else w==="String"&&(v=!1)}else y=ye(m)&&m.name==="Boolean";h[0]=y,h[1]=v,(y||Re(h,"default"))&&i.push(d)}}const u=[a,i];return Le(t)&&n.set(t,u),u}function Al(t){return t[0]!=="$"&&!Tn(t)}const ji=t=>t[0]==="_"||t==="$stable",zi=t=>he(t)?t.map(Nt):[Nt(t)],Zf=(t,e,r)=>{if(e._n)return e;const n=Js((...s)=>zi(e(...s)),r);return n._c=!1,n},cu=(t,e,r)=>{const n=t._ctx;for(const s in t){if(ji(s))continue;const o=t[s];if(ye(o))e[s]=Zf(s,o,n);else if(o!=null){const a=zi(o);e[s]=()=>a}}},uu=(t,e)=>{const r=zi(e);t.slots.default=()=>r},du=(t,e,r)=>{for(const n in e)(r||!ji(n))&&(t[n]=e[n])},eh=(t,e,r)=>{const n=t.slots=ou();if(t.vnode.shapeFlag&32){const s=e._;s?(du(n,e,r),r&&dc(n,"_",s,!0)):cu(e,n)}else e&&uu(t,e)},th=(t,e,r)=>{const{vnode:n,slots:s}=t;let o=!0,a=Ie;if(n.shapeFlag&32){const i=e._;i?r&&i===1?o=!1:du(s,e,r):(o=!e.$stable,cu(e,s)),a=e}else e&&(uu(t,e),a={default:1});if(o)for(const i in s)!ji(i)&&a[i]==null&&delete s[i]},bt=fh;function fu(t){return rh(t)}function rh(t,e){const r=vo();r.__VUE__=!0;const{insert:n,remove:s,patchProp:o,createElement:a,createText:i,createComment:l,setText:u,setElementText:c,parentNode:d,nextSibling:f,setScopeId:h=Vt,insertStaticContent:m}=t,y=(D,B,R,M=null,N=null,G=null,re=void 0,J=null,X=!!B.dynamicChildren)=>{if(D===B)return;D&&!Dn(D,B)&&(M=$(D),U(D,N,G,!0),D=null),B.patchFlag===-2&&(X=!1,B.dynamicChildren=null);const{type:W,ref:ae,shapeFlag:ee}=B;switch(W){case xs:v(D,B,R,M);break;case fr:p(D,B,R,M);break;case Ln:D==null&&x(B,R,M,re);break;case Oe:P(D,B,R,M,N,G,re,J,X);break;default:ee&1?E(D,B,R,M,N,G,re,J,X):ee&6?T(D,B,R,M,N,G,re,J,X):(ee&64||ee&128)&&W.process(D,B,R,M,N,G,re,J,X,ie)}ae!=null&&N&&Zs(ae,D&&D.ref,G,B||D,!B)},v=(D,B,R,M)=>{if(D==null)n(B.el=i(B.children),R,M);else{const N=B.el=D.el;B.children!==D.children&&u(N,B.children)}},p=(D,B,R,M)=>{D==null?n(B.el=l(B.children||""),R,M):B.el=D.el},x=(D,B,R,M)=>{[D.el,D.anchor]=m(D.children,B,R,M,D.el,D.anchor)},w=({el:D,anchor:B},R,M)=>{let N;for(;D&&D!==B;)N=f(D),n(D,R,M),D=N;n(B,R,M)},b=({el:D,anchor:B})=>{let R;for(;D&&D!==B;)R=f(D),s(D),D=R;s(B)},E=(D,B,R,M,N,G,re,J,X)=>{B.type==="svg"?re="svg":B.type==="math"&&(re="mathml"),D==null?k(B,R,M,N,G,re,J,X):S(D,B,N,G,re,J,X)},k=(D,B,R,M,N,G,re,J)=>{let X,W;const{props:ae,shapeFlag:ee,transition:le,dirs:pe}=D;if(X=D.el=a(D.type,G,ae&&ae.is,ae),ee&8?c(X,D.children):ee&16&&C(D.children,X,null,M,N,Ho(D,G),re,J),pe&&Tr(D,null,M,"created"),_(X,D,D.scopeId,re,M),ae){for(const Se in ae)Se!=="value"&&!Tn(Se)&&o(X,Se,null,ae[Se],G,M);"value"in ae&&o(X,"value",null,ae.value,G),(W=ae.onVnodeBeforeMount)&&Gt(W,M,D)}pe&&Tr(D,null,M,"beforeMount");const we=nh(N,le);we&&le.beforeEnter(X),n(X,B,R),((W=ae&&ae.onVnodeMounted)||we||pe)&&bt(()=>{W&&Gt(W,M,D),we&&le.enter(X),pe&&Tr(D,null,M,"mounted")},N)},_=(D,B,R,M,N)=>{if(R&&h(D,R),M)for(let G=0;G<M.length;G++)h(D,M[G]);if(N){let G=N.subTree;if(B===G||wu(G.type)&&(G.ssContent===B||G.ssFallback===B)){const re=N.vnode;_(D,re,re.scopeId,re.slotScopeIds,N.parent)}}},C=(D,B,R,M,N,G,re,J,X=0)=>{for(let W=X;W<D.length;W++){const ae=D[W]=J?br(D[W]):Nt(D[W]);y(null,ae,B,R,M,N,G,re,J)}},S=(D,B,R,M,N,G,re)=>{const J=B.el=D.el;let{patchFlag:X,dynamicChildren:W,dirs:ae}=B;X|=D.patchFlag&16;const ee=D.props||Ie,le=B.props||Ie;let pe;if(R&&Rr(R,!1),(pe=le.onVnodeBeforeUpdate)&&Gt(pe,R,B,D),ae&&Tr(B,D,R,"beforeUpdate"),R&&Rr(R,!0),(ee.innerHTML&&le.innerHTML==null||ee.textContent&&le.textContent==null)&&c(J,""),W?A(D.dynamicChildren,W,J,R,M,Ho(B,N),G):re||te(D,B,J,null,R,M,Ho(B,N),G,!1),X>0){if(X&16)F(J,ee,le,R,N);else if(X&2&&ee.class!==le.class&&o(J,"class",null,le.class,N),X&4&&o(J,"style",ee.style,le.style,N),X&8){const we=B.dynamicProps;for(let Se=0;Se<we.length;Se++){const Pe=we[Se],nt=ee[Pe],Je=le[Pe];(Je!==nt||Pe==="value")&&o(J,Pe,nt,Je,N,R)}}X&1&&D.children!==B.children&&c(J,B.children)}else!re&&W==null&&F(J,ee,le,R,N);((pe=le.onVnodeUpdated)||ae)&&bt(()=>{pe&&Gt(pe,R,B,D),ae&&Tr(B,D,R,"updated")},M)},A=(D,B,R,M,N,G,re)=>{for(let J=0;J<B.length;J++){const X=D[J],W=B[J],ae=X.el&&(X.type===Oe||!Dn(X,W)||X.shapeFlag&198)?d(X.el):R;y(X,W,ae,null,M,N,G,re,!0)}},F=(D,B,R,M,N)=>{if(B!==R){if(B!==Ie)for(const G in B)!Tn(G)&&!(G in R)&&o(D,G,B[G],null,N,M);for(const G in R){if(Tn(G))continue;const re=R[G],J=B[G];re!==J&&G!=="value"&&o(D,G,J,re,N,M)}"value"in R&&o(D,"value",B.value,R.value,N)}},P=(D,B,R,M,N,G,re,J,X)=>{const W=B.el=D?D.el:i(""),ae=B.anchor=D?D.anchor:i("");let{patchFlag:ee,dynamicChildren:le,slotScopeIds:pe}=B;pe&&(J=J?J.concat(pe):pe),D==null?(n(W,R,M),n(ae,R,M),C(B.children||[],R,ae,N,G,re,J,X)):ee>0&&ee&64&&le&&D.dynamicChildren?(A(D.dynamicChildren,le,R,N,G,re,J),(B.key!=null||N&&B===N.subTree)&&hu(D,B,!0)):te(D,B,R,ae,N,G,re,J,X)},T=(D,B,R,M,N,G,re,J,X)=>{B.slotScopeIds=J,D==null?B.shapeFlag&512?N.ctx.activate(B,R,M,re,X):I(B,R,M,N,G,re,X):K(D,B,X)},I=(D,B,R,M,N,G,re)=>{const J=D.component=vh(D,M,N);if(jc(D)&&(J.ctx.renderer=ie),yh(J,!1,re),J.asyncDep){if(N&&N.registerDep(J,j,re),!D.el){const X=J.subTree=je(fr);p(null,X,B,R)}}else j(J,D,B,R,N,G,re)},K=(D,B,R)=>{const M=B.component=D.component;if(uh(D,B,R))if(M.asyncDep&&!M.asyncResolved){Y(M,B,R);return}else M.next=B,M.update();else B.el=D.el,M.vnode=B},j=(D,B,R,M,N,G,re)=>{const J=()=>{if(D.isMounted){let{next:ee,bu:le,u:pe,parent:we,vnode:Se}=D;{const st=xu(D);if(st){ee&&(ee.el=Se.el,Y(D,ee,re)),st.asyncDep.then(()=>{D.isUnmounted||J()});return}}let Pe=ee,nt;Rr(D,!1),ee?(ee.el=Se.el,Y(D,ee,re)):ee=Se,le&&Os(le),(nt=ee.props&&ee.props.onVnodeBeforeUpdate)&&Gt(nt,we,ee,Se),Rr(D,!0);const Je=Sl(D),Ze=D.subTree;D.subTree=Je,y(Ze,Je,d(Ze.el),$(Ze),D,N,G),ee.el=Je.el,Pe===null&&dh(D,Je.el),pe&&bt(pe,N),(nt=ee.props&&ee.props.onVnodeUpdated)&&bt(()=>Gt(nt,we,ee,Se),N)}else{let ee;const{el:le,props:pe}=B,{bm:we,m:Se,parent:Pe,root:nt,type:Je}=D,Ze=$n(B);Rr(D,!1),we&&Os(we),!Ze&&(ee=pe&&pe.onVnodeBeforeMount)&&Gt(ee,Pe,B),Rr(D,!0);{nt.ce&&nt.ce._injectChildStyle(Je);const st=D.subTree=Sl(D);y(null,st,R,M,D,N,G),B.el=st.el}if(Se&&bt(Se,N),!Ze&&(ee=pe&&pe.onVnodeMounted)){const st=B;bt(()=>Gt(ee,Pe,st),N)}(B.shapeFlag&256||Pe&&$n(Pe.vnode)&&Pe.vnode.shapeFlag&256)&&D.a&&bt(D.a,N),D.isMounted=!0,B=R=M=null}};D.scope.on();const X=D.effect=new Ri(J);D.scope.off();const W=D.update=X.run.bind(X),ae=D.job=X.runIfDirty.bind(X);ae.i=D,ae.id=D.uid,X.scheduler=()=>Gi(ae),Rr(D,!0),W()},Y=(D,B,R)=>{B.component=D;const M=D.vnode.props;D.vnode=B,D.next=null,Xf(D,B.props,M,R),th(D,B.children,R),cr(),bl(D),ur()},te=(D,B,R,M,N,G,re,J,X=!1)=>{const W=D&&D.children,ae=D?D.shapeFlag:0,ee=B.children,{patchFlag:le,shapeFlag:pe}=B;if(le>0){if(le&128){fe(W,ee,R,M,N,G,re,J,X);return}else if(le&256){xe(W,ee,R,M,N,G,re,J,X);return}}pe&8?(ae&16&&me(W,N,G),ee!==W&&c(R,ee)):ae&16?pe&16?fe(W,ee,R,M,N,G,re,J,X):me(W,N,G,!0):(ae&8&&c(R,""),pe&16&&C(ee,R,M,N,G,re,J,X))},xe=(D,B,R,M,N,G,re,J,X)=>{D=D||ln,B=B||ln;const W=D.length,ae=B.length,ee=Math.min(W,ae);let le;for(le=0;le<ee;le++){const pe=B[le]=X?br(B[le]):Nt(B[le]);y(D[le],pe,R,null,N,G,re,J,X)}W>ae?me(D,N,G,!0,!1,ee):C(B,R,M,N,G,re,J,X,ee)},fe=(D,B,R,M,N,G,re,J,X)=>{let W=0;const ae=B.length;let ee=D.length-1,le=ae-1;for(;W<=ee&&W<=le;){const pe=D[W],we=B[W]=X?br(B[W]):Nt(B[W]);if(Dn(pe,we))y(pe,we,R,null,N,G,re,J,X);else break;W++}for(;W<=ee&&W<=le;){const pe=D[ee],we=B[le]=X?br(B[le]):Nt(B[le]);if(Dn(pe,we))y(pe,we,R,null,N,G,re,J,X);else break;ee--,le--}if(W>ee){if(W<=le){const pe=le+1,we=pe<ae?B[pe].el:M;for(;W<=le;)y(null,B[W]=X?br(B[W]):Nt(B[W]),R,we,N,G,re,J,X),W++}}else if(W>le)for(;W<=ee;)U(D[W],N,G,!0),W++;else{const pe=W,we=W,Se=new Map;for(W=we;W<=le;W++){const ot=B[W]=X?br(B[W]):Nt(B[W]);ot.key!=null&&Se.set(ot.key,W)}let Pe,nt=0;const Je=le-we+1;let Ze=!1,st=0;const Pr=new Array(Je);for(W=0;W<Je;W++)Pr[W]=0;for(W=pe;W<=ee;W++){const ot=D[W];if(nt>=Je){U(ot,N,G,!0);continue}let Bt;if(ot.key!=null)Bt=Se.get(ot.key);else for(Pe=we;Pe<=le;Pe++)if(Pr[Pe-we]===0&&Dn(ot,B[Pe])){Bt=Pe;break}Bt===void 0?U(ot,N,G,!0):(Pr[Bt-we]=W+1,Bt>=st?st=Bt:Ze=!0,y(ot,B[Bt],R,null,N,G,re,J,X),nt++)}const kn=Ze?sh(Pr):ln;for(Pe=kn.length-1,W=Je-1;W>=0;W--){const ot=we+W,Bt=B[ot],Es=ot+1<ae?B[ot+1].el:M;Pr[W]===0?y(null,Bt,R,Es,N,G,re,J,X):Ze&&(Pe<0||W!==kn[Pe]?H(Bt,R,Es,2):Pe--)}}},H=(D,B,R,M,N=null)=>{const{el:G,type:re,transition:J,children:X,shapeFlag:W}=D;if(W&6){H(D.component.subTree,B,R,M);return}if(W&128){D.suspense.move(B,R,M);return}if(W&64){re.move(D,B,R,ie);return}if(re===Oe){n(G,B,R);for(let ee=0;ee<X.length;ee++)H(X[ee],B,R,M);n(D.anchor,B,R);return}if(re===Ln){w(D,B,R);return}if(M!==2&&W&1&&J)if(M===0)J.beforeEnter(G),n(G,B,R),bt(()=>J.enter(G),N);else{const{leave:ee,delayLeave:le,afterLeave:pe}=J,we=()=>{D.ctx.isUnmounted?s(G):n(G,B,R)},Se=()=>{ee(G,()=>{we(),pe&&pe()})};le?le(G,we,Se):Se()}else n(G,B,R)},U=(D,B,R,M=!1,N=!1)=>{const{type:G,props:re,ref:J,children:X,dynamicChildren:W,shapeFlag:ae,patchFlag:ee,dirs:le,cacheIndex:pe}=D;if(ee===-2&&(N=!1),J!=null&&(cr(),Zs(J,null,R,D,!0),ur()),pe!=null&&(B.renderCache[pe]=void 0),ae&256){B.ctx.deactivate(D);return}const we=ae&1&&le,Se=!$n(D);let Pe;if(Se&&(Pe=re&&re.onVnodeBeforeUnmount)&&Gt(Pe,B,D),ae&6)De(D.component,R,M);else{if(ae&128){D.suspense.unmount(R,M);return}we&&Tr(D,null,B,"beforeUnmount"),ae&64?D.type.remove(D,B,R,ie,M):W&&!W.hasOnce&&(G!==Oe||ee>0&&ee&64)?me(W,B,R,!1,!0):(G===Oe&&ee&384||!N&&ae&16)&&me(X,B,R),M&&V(D)}(Se&&(Pe=re&&re.onVnodeUnmounted)||we)&&bt(()=>{Pe&&Gt(Pe,B,D),we&&Tr(D,null,B,"unmounted")},R)},V=D=>{const{type:B,el:R,anchor:M,transition:N}=D;if(B===Oe){z(R,M);return}if(B===Ln){b(D);return}const G=()=>{s(R),N&&!N.persisted&&N.afterLeave&&N.afterLeave()};if(D.shapeFlag&1&&N&&!N.persisted){const{leave:re,delayLeave:J}=N,X=()=>re(R,G);J?J(D.el,G,X):X()}else G()},z=(D,B)=>{let R;for(;D!==B;)R=f(D),s(D),D=R;s(B)},De=(D,B,R)=>{const{bum:M,scope:N,job:G,subTree:re,um:J,m:X,a:W,parent:ae,slots:{__:ee}}=D;Bl(X),Bl(W),M&&Os(M),ae&&he(ee)&&ee.forEach(le=>{ae.renderCache[le]=void 0}),N.stop(),G&&(G.flags|=8,U(re,D,B,R)),J&&bt(J,B),bt(()=>{D.isUnmounted=!0},B),B&&B.pendingBranch&&!B.isUnmounted&&D.asyncDep&&!D.asyncResolved&&D.suspenseId===B.pendingId&&(B.deps--,B.deps===0&&B.resolve())},me=(D,B,R,M=!1,N=!1,G=0)=>{for(let re=G;re<D.length;re++)U(D[re],B,R,M,N)},$=D=>{if(D.shapeFlag&6)return $(D.component.subTree);if(D.shapeFlag&128)return D.suspense.next();const B=f(D.anchor||D.el),R=B&&B[Of];return R?f(R):B};let q=!1;const ne=(D,B,R)=>{D==null?B._vnode&&U(B._vnode,null,null,!0):y(B._vnode||null,D,B,null,null,null,R),B._vnode=D,q||(q=!0,bl(),Lc(),q=!1)},ie={p:y,um:U,m:H,r:V,mt:I,mc:C,pc:te,pbc:A,n:$,o:t};return{render:ne,hydrate:void 0,createApp:Yf(ne)}}function Ho({type:t,props:e},r){return r==="svg"&&t==="foreignObject"||r==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:r}function Rr({effect:t,job:e},r){r?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function nh(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function hu(t,e,r=!1){const n=t.children,s=e.children;if(he(n)&&he(s))for(let o=0;o<n.length;o++){const a=n[o];let i=s[o];i.shapeFlag&1&&!i.dynamicChildren&&((i.patchFlag<=0||i.patchFlag===32)&&(i=s[o]=br(s[o]),i.el=a.el),!r&&i.patchFlag!==-2&&hu(a,i)),i.type===xs&&(i.el=a.el),i.type===fr&&!i.el&&(i.el=a.el)}}function sh(t){const e=t.slice(),r=[0];let n,s,o,a,i;const l=t.length;for(n=0;n<l;n++){const u=t[n];if(u!==0){if(s=r[r.length-1],t[s]<u){e[n]=s,r.push(n);continue}for(o=0,a=r.length-1;o<a;)i=o+a>>1,t[r[i]]<u?o=i+1:a=i;u<t[r[o]]&&(o>0&&(e[n]=r[o-1]),r[o]=n)}}for(o=r.length,a=r[o-1];o-- >0;)r[o]=a,a=e[a];return r}function xu(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:xu(e)}function Bl(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const gu=Symbol.for("v-scx"),pu=()=>Pt(gu);function ar(t,e,r){return vu(t,e,r)}function vu(t,e,r=Ie){const{immediate:n,deep:s,flush:o,once:a}=r,i=ft({},r),l=e&&n||!e&&o!=="post";let u;if(Zn){if(o==="sync"){const h=pu();u=h.__watcherHandles||(h.__watcherHandles=[])}else if(!l){const h=()=>{};return h.stop=Vt,h.resume=Vt,h.pause=Vt,h}}const c=rt;i.call=(h,m,y)=>Ht(h,c,m,y);let d=!1;o==="post"?i.scheduler=h=>{bt(h,c&&c.suspense)}:o!=="sync"&&(d=!0,i.scheduler=(h,m)=>{m?h():Gi(h)}),i.augmentJob=h=>{e&&(h.flags|=4),d&&(h.flags|=2,c&&(h.id=c.uid,h.i=c))};const f=Rf(t,e,i);return Zn&&(u?u.push(f):l&&f()),f}function oh(t,e,r){const n=this.proxy,s=Ke(t)?t.includes(".")?yu(n,t):()=>n[t]:t.bind(n,n);let o;ye(e)?o=e:(o=e.handler,r=e);const a=gs(this),i=vu(s,o.bind(n),r);return a(),i}function yu(t,e){const r=e.split(".");return()=>{let n=t;for(let s=0;s<r.length&&n;s++)n=n[r[s]];return n}}const ah=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Dt(e)}Modifiers`]||t[`${Yr(e)}Modifiers`];function ih(t,e,...r){if(t.isUnmounted)return;const n=t.vnode.props||Ie;let s=r;const o=e.startsWith("update:"),a=o&&ah(n,e.slice(7));a&&(a.trim&&(s=r.map(c=>Ke(c)?c.trim():c)),a.number&&(s=r.map(Vs)));let i,l=n[i=$s(e)]||n[i=$s(Dt(e))];!l&&o&&(l=n[i=$s(Yr(e))]),l&&Ht(l,t,6,s);const u=n[i+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[i])return;t.emitted[i]=!0,Ht(u,t,6,s)}}function mu(t,e,r=!1){const n=e.emitsCache,s=n.get(t);if(s!==void 0)return s;const o=t.emits;let a={},i=!1;if(!ye(t)){const l=u=>{const c=mu(u,e,!0);c&&(i=!0,ft(a,c))};!r&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!o&&!i?(Le(t)&&n.set(t,null),null):(he(o)?o.forEach(l=>a[l]=null):ft(a,o),Le(t)&&n.set(t,a),a)}function Co(t,e){return!t||!go(e)?!1:(e=e.slice(2).replace(/Once$/,""),Re(t,e[0].toLowerCase()+e.slice(1))||Re(t,Yr(e))||Re(t,e))}function Sl(t){const{type:e,vnode:r,proxy:n,withProxy:s,propsOptions:[o],slots:a,attrs:i,emit:l,render:u,renderCache:c,props:d,data:f,setupState:h,ctx:m,inheritAttrs:y}=t,v=Xs(t);let p,x;try{if(r.shapeFlag&4){const b=s||n,E=b;p=Nt(u.call(E,b,c,d,h,f,m)),x=i}else{const b=e;p=Nt(b.length>1?b(d,{attrs:i,slots:a,emit:l}):b(d,null)),x=e.props?i:lh(i)}}catch(b){Hn.length=0,fs(b,t,1),p=je(fr)}let w=p;if(x&&y!==!1){const b=Object.keys(x),{shapeFlag:E}=w;b.length&&E&7&&(o&&b.some(Di)&&(x=ch(x,o)),w=Vr(w,x,!1,!0))}return r.dirs&&(w=Vr(w,null,!1,!0),w.dirs=w.dirs?w.dirs.concat(r.dirs):r.dirs),r.transition&&Eo(w,r.transition),p=w,Xs(v),p}const lh=t=>{let e;for(const r in t)(r==="class"||r==="style"||go(r))&&((e||(e={}))[r]=t[r]);return e},ch=(t,e)=>{const r={};for(const n in t)(!Di(n)||!(n.slice(9)in e))&&(r[n]=t[n]);return r};function uh(t,e,r){const{props:n,children:s,component:o}=t,{props:a,children:i,patchFlag:l}=e,u=o.emitsOptions;if(e.dirs||e.transition)return!0;if(r&&l>=0){if(l&1024)return!0;if(l&16)return n?Fl(n,a,u):!!a;if(l&8){const c=e.dynamicProps;for(let d=0;d<c.length;d++){const f=c[d];if(a[f]!==n[f]&&!Co(u,f))return!0}}}else return(s||i)&&(!i||!i.$stable)?!0:n===a?!1:n?a?Fl(n,a,u):!0:!!a;return!1}function Fl(t,e,r){const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!0;for(let s=0;s<n.length;s++){const o=n[s];if(e[o]!==t[o]&&!Co(r,o))return!0}return!1}function dh({vnode:t,parent:e},r){for(;e;){const n=e.subTree;if(n.suspense&&n.suspense.activeBranch===t&&(n.el=t.el),n===t)(t=e.vnode).el=r,e=e.parent;else break}}const wu=t=>t.__isSuspense;function fh(t,e){e&&e.pendingBranch?he(t)?e.effects.push(...t):e.effects.push(t):Uc(t)}const Oe=Symbol.for("v-fgt"),xs=Symbol.for("v-txt"),fr=Symbol.for("v-cmt"),Ln=Symbol.for("v-stc"),Hn=[];let Et=null;function O(t=!1){Hn.push(Et=t?null:[])}function hh(){Hn.pop(),Et=Hn[Hn.length-1]||null}let Xn=1;function Na(t,e=!1){Xn+=t,t<0&&Et&&e&&(Et.hasOnce=!0)}function bu(t){return t.dynamicChildren=Xn>0?Et||ln:null,hh(),Xn>0&&Et&&Et.push(t),t}function L(t,e,r,n,s,o){return bu(g(t,e,r,n,s,o,!0))}function Ct(t,e,r,n,s){return bu(je(t,e,r,n,s,!0))}function Jn(t){return t?t.__v_isVNode===!0:!1}function Dn(t,e){return t.type===e.type&&t.key===e.key}const _u=({key:t})=>t??null,Us=({ref:t,ref_key:e,ref_for:r})=>(typeof t=="number"&&(t=""+t),t!=null?Ke(t)||ze(t)||ye(t)?{i:yt,r:t,k:e,f:!!r}:t:null);function g(t,e=null,r=null,n=0,s=null,o=t===Oe?0:1,a=!1,i=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&_u(e),ref:e&&Us(e),scopeId:Mc,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:n,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:yt};return i?(Ni(l,r),o&128&&t.normalize(l)):r&&(l.shapeFlag|=Ke(r)?8:16),Xn>0&&!a&&Et&&(l.patchFlag>0||o&6)&&l.patchFlag!==32&&Et.push(l),l}const je=xh;function xh(t,e=null,r=null,n=0,s=null,o=!1){if((!t||t===Mf)&&(t=fr),Jn(t)){const i=Vr(t,e,!0);return r&&Ni(i,r),Xn>0&&!o&&Et&&(i.shapeFlag&6?Et[Et.indexOf(t)]=i:Et.push(i)),i.patchFlag=-2,i}if(Eh(t)&&(t=t.__vccOpts),e){e=Eu(e);let{class:i,style:l}=e;i&&!Ke(i)&&(e.class=He(i)),Le(l)&&(bo(l)&&!he(l)&&(l=ft({},l)),e.style=ds(l))}const a=Ke(t)?1:wu(t)?128:Uf(t)?64:Le(t)?4:ye(t)?2:0;return g(t,e,r,n,s,a,o,!0)}function Eu(t){return t?bo(t)||au(t)?ft({},t):t:null}function Vr(t,e,r=!1,n=!1){const{props:s,ref:o,patchFlag:a,children:i,transition:l}=t,u=e?ku(s||{},e):s,c={__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&_u(u),ref:e&&e.ref?r&&o?he(o)?o.concat(Us(e)):[o,Us(e)]:Us(e):o,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:i,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Oe?a===-1?16:a|16:a,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Vr(t.ssContent),ssFallback:t.ssFallback&&Vr(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&n&&Eo(c,l.clone(c)),c}function We(t=" ",e=0){return je(xs,null,t,e)}function Tt(t,e){const r=je(Ln,null,t);return r.staticCount=e,r}function oe(t="",e=!1){return e?(O(),Ct(fr,null,t)):je(fr,null,t)}function Nt(t){return t==null||typeof t=="boolean"?je(fr):he(t)?je(Oe,null,t.slice()):Jn(t)?br(t):je(xs,null,String(t))}function br(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Vr(t)}function Ni(t,e){let r=0;const{shapeFlag:n}=t;if(e==null)e=null;else if(he(e))r=16;else if(typeof e=="object")if(n&65){const s=e.default;s&&(s._c&&(s._d=!1),Ni(t,s()),s._c&&(s._d=!0));return}else{r=32;const s=e._;!s&&!au(e)?e._ctx=yt:s===3&&yt&&(yt.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else ye(e)?(e={default:e,_ctx:yt},r=32):(e=String(e),n&64?(r=16,e=[We(e)]):r=8);t.children=e,t.shapeFlag|=r}function ku(...t){const e={};for(let r=0;r<t.length;r++){const n=t[r];for(const s in n)if(s==="class")e.class!==n.class&&(e.class=He([e.class,n.class]));else if(s==="style")e.style=ds([e.style,n.style]);else if(go(s)){const o=e[s],a=n[s];a&&o!==a&&!(he(o)&&o.includes(a))&&(e[s]=o?[].concat(o,a):a)}else s!==""&&(e[s]=n[s])}return e}function Gt(t,e,r,n=null){Ht(t,e,7,[r,n])}const gh=ru();let ph=0;function vh(t,e,r){const n=t.type,s=(e?e.appContext:t.appContext)||gh,o={uid:ph++,vnode:t,type:n,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Fi(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:lu(n,s),emitsOptions:mu(n,s),emit:null,emitted:null,propsDefaults:Ie,inheritAttrs:n.inheritAttrs,ctx:Ie,data:Ie,props:Ie,attrs:Ie,slots:Ie,refs:Ie,setupState:Ie,setupContext:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=e?e.root:o,o.emit=ih.bind(null,o),t.ce&&t.ce(o),o}let rt=null,to,Ka;{const t=vo(),e=(r,n)=>{let s;return(s=t[r])||(s=t[r]=[]),s.push(n),o=>{s.length>1?s.forEach(a=>a(o)):s[0](o)}};to=e("__VUE_INSTANCE_SETTERS__",r=>rt=r),Ka=e("__VUE_SSR_SETTERS__",r=>Zn=r)}const gs=t=>{const e=rt;return to(t),t.scope.on(),()=>{t.scope.off(),to(e)}},Pl=()=>{rt&&rt.scope.off(),to(null)};function Cu(t){return t.vnode.shapeFlag&4}let Zn=!1;function yh(t,e=!1,r=!1){e&&Ka(e);const{props:n,children:s}=t.vnode,o=Cu(t);Qf(t,n,o,e),eh(t,s,r||e);const a=o?mh(t,e):void 0;return e&&Ka(!1),a}function mh(t,e){const r=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,jf);const{setup:n}=r;if(n){cr();const s=t.setupContext=n.length>1?bh(t):null,o=gs(t),a=wn(n,t,0,[t.props,s]),i=lc(a);if(ur(),o(),(i||t.sp)&&!$n(t)&&Gc(t),i){if(a.then(Pl,Pl),e)return a.then(l=>{Tl(t,l)}).catch(l=>{fs(l,t,0)});t.asyncDep=a}else Tl(t,a)}else Du(t)}function Tl(t,e,r){ye(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Le(e)&&(t.setupState=Mi(e)),Du(t)}function Du(t,e,r){const n=t.type;t.render||(t.render=n.render||Vt);{const s=gs(t);cr();try{zf(t)}finally{ur(),s()}}}const wh={get(t,e){return lt(t,"get",""),t[e]}};function bh(t){const e=r=>{t.exposed=r||{}};return{attrs:new Proxy(t.attrs,wh),slots:t.slots,emit:t.emit,expose:e}}function Do(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(Mi(_o(t.exposed)),{get(e,r){if(r in e)return e[r];if(r in On)return On[r](t)},has(e,r){return r in e||r in On}})):t.proxy}function _h(t,e=!0){return ye(t)?t.displayName||t.name:t.name||e&&t.__name}function Eh(t){return ye(t)&&"__vccOpts"in t}const ue=(t,e)=>Tf(t,e,Zn);function Ki(t,e,r){const n=arguments.length;return n===2?Le(e)&&!he(e)?Jn(e)?je(t,null,[e]):je(t,e):je(t,null,e):(n>3?r=Array.prototype.slice.call(arguments,2):n===3&&Jn(r)&&(r=[r]),je(t,e,r))}const Au="3.5.16";/**
* @vue/runtime-dom v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Va;const Rl=typeof window<"u"&&window.trustedTypes;if(Rl)try{Va=Rl.createPolicy("vue",{createHTML:t=>t})}catch{}const Bu=Va?t=>Va.createHTML(t):t=>t,kh="http://www.w3.org/2000/svg",Ch="http://www.w3.org/1998/Math/MathML",Jt=typeof document<"u"?document:null,Il=Jt&&Jt.createElement("template"),Dh={insert:(t,e,r)=>{e.insertBefore(t,r||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,r,n)=>{const s=e==="svg"?Jt.createElementNS(kh,t):e==="mathml"?Jt.createElementNS(Ch,t):r?Jt.createElement(t,{is:r}):Jt.createElement(t);return t==="select"&&n&&n.multiple!=null&&s.setAttribute("multiple",n.multiple),s},createText:t=>Jt.createTextNode(t),createComment:t=>Jt.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Jt.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,r,n,s,o){const a=r?r.previousSibling:e.lastChild;if(s&&(s===o||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),r),!(s===o||!(s=s.nextSibling)););else{Il.innerHTML=Bu(n==="svg"?`<svg>${t}</svg>`:n==="mathml"?`<math>${t}</math>`:t);const i=Il.content;if(n==="svg"||n==="mathml"){const l=i.firstChild;for(;l.firstChild;)i.appendChild(l.firstChild);i.removeChild(l)}e.insertBefore(i,r)}return[a?a.nextSibling:e.firstChild,r?r.previousSibling:e.lastChild]}},Ah=Symbol("_vtc");function Bh(t,e,r){const n=t[Ah];n&&(e=(e?[e,...n]:[...n]).join(" ")),e==null?t.removeAttribute("class"):r?t.setAttribute("class",e):t.className=e}const $l=Symbol("_vod"),Sh=Symbol("_vsh"),Fh=Symbol(""),Ph=/(^|;)\s*display\s*:/;function Th(t,e,r){const n=t.style,s=Ke(r);let o=!1;if(r&&!s){if(e)if(Ke(e))for(const a of e.split(";")){const i=a.slice(0,a.indexOf(":")).trim();r[i]==null&&Ls(n,i,"")}else for(const a in e)r[a]==null&&Ls(n,a,"");for(const a in r)a==="display"&&(o=!0),Ls(n,a,r[a])}else if(s){if(e!==r){const a=n[Fh];a&&(r+=";"+a),n.cssText=r,o=Ph.test(r)}}else e&&t.removeAttribute("style");$l in t&&(t[$l]=o?n.display:"",t[Sh]&&(n.display="none"))}const Ol=/\s*!important$/;function Ls(t,e,r){if(he(r))r.forEach(n=>Ls(t,e,n));else if(r==null&&(r=""),e.startsWith("--"))t.setProperty(e,r);else{const n=Rh(t,e);Ol.test(r)?t.setProperty(Yr(n),r.replace(Ol,""),"important"):t[n]=r}}const Ul=["Webkit","Moz","ms"],Mo={};function Rh(t,e){const r=Mo[e];if(r)return r;let n=Dt(e);if(n!=="filter"&&n in t)return Mo[e]=n;n=us(n);for(let s=0;s<Ul.length;s++){const o=Ul[s]+n;if(o in t)return Mo[e]=o}return e}const Ll="http://www.w3.org/1999/xlink";function Hl(t,e,r,n,s,o=sf(e)){n&&e.startsWith("xlink:")?r==null?t.removeAttributeNS(Ll,e.slice(6,e.length)):t.setAttributeNS(Ll,e,r):r==null||o&&!fc(r)?t.removeAttribute(e):t.setAttribute(e,o?"":qt(r)?String(r):r)}function Ml(t,e,r,n,s){if(e==="innerHTML"||e==="textContent"){r!=null&&(t[e]=e==="innerHTML"?Bu(r):r);return}const o=t.tagName;if(e==="value"&&o!=="PROGRESS"&&!o.includes("-")){const i=o==="OPTION"?t.getAttribute("value")||"":t.value,l=r==null?t.type==="checkbox"?"on":"":String(r);(i!==l||!("_value"in t))&&(t.value=l),r==null&&t.removeAttribute(e),t._value=r;return}let a=!1;if(r===""||r==null){const i=typeof t[e];i==="boolean"?r=fc(r):r==null&&i==="string"?(r="",a=!0):i==="number"&&(r=0,a=!0)}try{t[e]=r}catch{}a&&t.removeAttribute(s||e)}function rr(t,e,r,n){t.addEventListener(e,r,n)}function Ih(t,e,r,n){t.removeEventListener(e,r,n)}const Gl=Symbol("_vei");function $h(t,e,r,n,s=null){const o=t[Gl]||(t[Gl]={}),a=o[e];if(n&&a)a.value=n;else{const[i,l]=Oh(e);if(n){const u=o[e]=Hh(n,s);rr(t,i,u,l)}else a&&(Ih(t,i,a,l),o[e]=void 0)}}const jl=/(?:Once|Passive|Capture)$/;function Oh(t){let e;if(jl.test(t)){e={};let n;for(;n=t.match(jl);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Yr(t.slice(2)),e]}let Go=0;const Uh=Promise.resolve(),Lh=()=>Go||(Uh.then(()=>Go=0),Go=Date.now());function Hh(t,e){const r=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=r.attached)return;Ht(Mh(n,r.value),e,5,[n])};return r.value=t,r.attached=Lh(),r}function Mh(t,e){if(he(e)){const r=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{r.call(t),t._stopped=!0},e.map(n=>s=>!s._stopped&&n&&n(s))}else return e}const zl=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,Gh=(t,e,r,n,s,o)=>{const a=s==="svg";e==="class"?Bh(t,n,a):e==="style"?Th(t,r,n):go(e)?Di(e)||$h(t,e,r,n,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):jh(t,e,n,a))?(Ml(t,e,n),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Hl(t,e,n,a,o,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!Ke(n))?Ml(t,Dt(e),n,o,e):(e==="true-value"?t._trueValue=n:e==="false-value"&&(t._falseValue=n),Hl(t,e,n,a))};function jh(t,e,r,n){if(n)return!!(e==="innerHTML"||e==="textContent"||e in t&&zl(e)&&ye(r));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=t.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return zl(e)&&Ke(r)?!1:e in t}const Dr=t=>{const e=t.props["onUpdate:modelValue"]||!1;return he(e)?r=>Os(e,r):e};function zh(t){t.target.composing=!0}function Nl(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Rt=Symbol("_assign"),Ot={created(t,{modifiers:{lazy:e,trim:r,number:n}},s){t[Rt]=Dr(s);const o=n||s.props&&s.props.type==="number";rr(t,e?"change":"input",a=>{if(a.target.composing)return;let i=t.value;r&&(i=i.trim()),o&&(i=Vs(i)),t[Rt](i)}),r&&rr(t,"change",()=>{t.value=t.value.trim()}),e||(rr(t,"compositionstart",zh),rr(t,"compositionend",Nl),rr(t,"change",Nl))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:r,modifiers:{lazy:n,trim:s,number:o}},a){if(t[Rt]=Dr(a),t.composing)return;const i=(o||t.type==="number")&&!/^0\d/.test(t.value)?Vs(t.value):t.value,l=e??"";i!==l&&(document.activeElement===t&&t.type!=="range"&&(n&&e===r||s&&t.value.trim()===l)||(t.value=l))}},Vi={deep:!0,created(t,e,r){t[Rt]=Dr(r),rr(t,"change",()=>{const n=t._modelValue,s=gn(t),o=t.checked,a=t[Rt];if(he(n)){const i=Si(n,s),l=i!==-1;if(o&&!l)a(n.concat(s));else if(!o&&l){const u=[...n];u.splice(i,1),a(u)}}else if(mn(n)){const i=new Set(n);o?i.add(s):i.delete(s),a(i)}else a(Su(t,o))})},mounted:Kl,beforeUpdate(t,e,r){t[Rt]=Dr(r),Kl(t,e,r)}};function Kl(t,{value:e,oldValue:r},n){t._modelValue=e;let s;if(he(e))s=Si(e,n.props.value)>-1;else if(mn(e))s=e.has(n.props.value);else{if(e===r)return;s=Nr(e,Su(t,!0))}t.checked!==s&&(t.checked=s)}const ro={created(t,{value:e},r){t.checked=Nr(e,r.props.value),t[Rt]=Dr(r),rr(t,"change",()=>{t[Rt](gn(t))})},beforeUpdate(t,{value:e,oldValue:r},n){t[Rt]=Dr(n),e!==r&&(t.checked=Nr(e,n.props.value))}},qi={deep:!0,created(t,{value:e,modifiers:{number:r}},n){const s=mn(e);rr(t,"change",()=>{const o=Array.prototype.filter.call(t.options,a=>a.selected).map(a=>r?Vs(gn(a)):gn(a));t[Rt](t.multiple?s?new Set(o):o:o[0]),t._assigning=!0,Kr(()=>{t._assigning=!1})}),t[Rt]=Dr(n)},mounted(t,{value:e}){Vl(t,e)},beforeUpdate(t,e,r){t[Rt]=Dr(r)},updated(t,{value:e}){t._assigning||Vl(t,e)}};function Vl(t,e){const r=t.multiple,n=he(e);if(!(r&&!n&&!mn(e))){for(let s=0,o=t.options.length;s<o;s++){const a=t.options[s],i=gn(a);if(r)if(n){const l=typeof i;l==="string"||l==="number"?a.selected=e.some(u=>String(u)===String(i)):a.selected=Si(e,i)>-1}else a.selected=e.has(i);else if(Nr(gn(a),e)){t.selectedIndex!==s&&(t.selectedIndex=s);return}}!r&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function gn(t){return"_value"in t?t._value:t.value}function Su(t,e){const r=e?"_trueValue":"_falseValue";return r in t?t[r]:e}const no={created(t,e,r){As(t,e,r,null,"created")},mounted(t,e,r){As(t,e,r,null,"mounted")},beforeUpdate(t,e,r,n){As(t,e,r,n,"beforeUpdate")},updated(t,e,r,n){As(t,e,r,n,"updated")}};function Nh(t,e){switch(t){case"SELECT":return qi;case"TEXTAREA":return Ot;default:switch(e){case"checkbox":return Vi;case"radio":return ro;default:return Ot}}}function As(t,e,r,n,s){const a=Nh(t.tagName,r.props&&r.props.type)[s];a&&a(t,e,r,n)}const Kh=["ctrl","shift","alt","meta"],Vh={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>Kh.some(r=>t[`${r}Key`]&&!e.includes(r))},ps=(t,e)=>{const r=t._withMods||(t._withMods={}),n=e.join(".");return r[n]||(r[n]=(s,...o)=>{for(let a=0;a<e.length;a++){const i=Vh[e[a]];if(i&&i(s,e))return}return t(s,...o)})},qh=ft({patchProp:Gh},Dh);let ql;function Wh(){return ql||(ql=fu(qh))}const Fu=(...t)=>{const e=Wh().createApp(...t),{mount:r}=e;return e.mount=n=>{const s=Qh(n);if(!s)return;const o=e._component;!ye(o)&&!o.render&&!o.template&&(o.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const a=r(s,!1,Yh(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),a},e};function Yh(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function Qh(t){return Ke(t)?document.querySelector(t):t}/**
* vue v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const Xh=Object.freeze(Object.defineProperty({__proto__:null,Comment:fr,EffectScope:Fi,Fragment:Oe,ReactiveEffect:Ri,Static:Ln,Text:xs,callWithAsyncErrorHandling:Ht,callWithErrorHandling:wn,camelize:Dt,capitalize:us,cloneVNode:Vr,computed:ue,createApp:Fu,createBlock:Ct,createCommentVNode:oe,createElementBlock:L,createElementVNode:g,createRenderer:fu,createStaticVNode:Tt,createTextVNode:We,createVNode:je,defineComponent:Qe,effectScope:Pi,getCurrentScope:Ti,guardReactiveProps:Eu,h:Ki,handleError:fs,hasInjectionContext:nu,inject:Pt,isProxy:bo,isReactive:or,isReadonly:dr,isRef:ze,isShallow:kt,isVNode:Jn,markRaw:_o,mergeProps:ku,nextTick:Kr,normalizeClass:He,normalizeStyle:ds,onActivated:zc,onBeforeMount:Vc,onBeforeUnmount:Yc,onBeforeUpdate:qc,onDeactivated:Nc,onErrorCaptured:Zc,onMounted:gr,onRenderTracked:Jc,onRenderTriggered:Xc,onScopeDispose:gc,onServerPrefetch:Qc,onUnmounted:hs,onUpdated:Wc,onWatcherCleanup:Ic,openBlock:O,provide:Un,proxyRefs:Mi,queuePostFlushCb:Uc,reactive:Qr,readonly:Hi,ref:Q,renderList:_t,resolveComponent:Ha,setBlockTracking:Na,setTransitionHooks:Eo,shallowReactive:Li,shallowReadonly:Df,shallowRef:Pc,ssrContextKey:gu,toDisplayString:Z,toHandlerKey:$s,toRaw:Ae,toRefs:Rc,unref:ke,useSSRContext:pu,vModelCheckbox:Vi,vModelDynamic:no,vModelRadio:ro,vModelSelect:qi,vModelText:Ot,version:Au,watch:ar,withCtx:Js,withDirectives:ct,withModifiers:ps},Symbol.toStringTag,{value:"Module"}));/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let Pu;const Ao=t=>Pu=t,Tu=Symbol();function qa(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var Mn;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(Mn||(Mn={}));function Jh(){const t=Pi(!0),e=t.run(()=>Q({}));let r=[],n=[];const s=_o({install(o){Ao(s),s._a=o,o.provide(Tu,s),o.config.globalProperties.$pinia=s,n.forEach(a=>r.push(a)),n=[]},use(o){return this._a?r.push(o):n.push(o),this},_p:r,_a:null,_e:t,_s:new Map,state:e});return s}const Ru=()=>{};function Wl(t,e,r,n=Ru){t.push(e);const s=()=>{const o=t.indexOf(e);o>-1&&(t.splice(o,1),n())};return!r&&Ti()&&gc(s),s}function tn(t,...e){t.slice().forEach(r=>{r(...e)})}const Zh=t=>t(),Yl=Symbol(),jo=Symbol();function Wa(t,e){t instanceof Map&&e instanceof Map?e.forEach((r,n)=>t.set(n,r)):t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const r in e){if(!e.hasOwnProperty(r))continue;const n=e[r],s=t[r];qa(s)&&qa(n)&&t.hasOwnProperty(r)&&!ze(n)&&!or(n)?t[r]=Wa(s,n):t[r]=n}return t}const ex=Symbol();function tx(t){return!qa(t)||!t.hasOwnProperty(ex)}const{assign:yr}=Object;function rx(t){return!!(ze(t)&&t.effect)}function nx(t,e,r,n){const{state:s,actions:o,getters:a}=e,i=r.state.value[t];let l;function u(){i||(r.state.value[t]=s?s():{});const c=Rc(r.state.value[t]);return yr(c,o,Object.keys(a||{}).reduce((d,f)=>(d[f]=_o(ue(()=>{Ao(r);const h=r._s.get(t);return a[f].call(h,h)})),d),{}))}return l=Iu(t,u,e,r,n,!0),l}function Iu(t,e,r={},n,s,o){let a;const i=yr({actions:{}},r),l={deep:!0};let u,c,d=[],f=[],h;const m=n.state.value[t];!o&&!m&&(n.state.value[t]={}),Q({});let y;function v(C){let S;u=c=!1,typeof C=="function"?(C(n.state.value[t]),S={type:Mn.patchFunction,storeId:t,events:h}):(Wa(n.state.value[t],C),S={type:Mn.patchObject,payload:C,storeId:t,events:h});const A=y=Symbol();Kr().then(()=>{y===A&&(u=!0)}),c=!0,tn(d,S,n.state.value[t])}const p=o?function(){const{state:S}=r,A=S?S():{};this.$patch(F=>{yr(F,A)})}:Ru;function x(){a.stop(),d=[],f=[],n._s.delete(t)}const w=(C,S="")=>{if(Yl in C)return C[jo]=S,C;const A=function(){Ao(n);const F=Array.from(arguments),P=[],T=[];function I(Y){P.push(Y)}function K(Y){T.push(Y)}tn(f,{args:F,name:A[jo],store:E,after:I,onError:K});let j;try{j=C.apply(this&&this.$id===t?this:E,F)}catch(Y){throw tn(T,Y),Y}return j instanceof Promise?j.then(Y=>(tn(P,Y),Y)).catch(Y=>(tn(T,Y),Promise.reject(Y))):(tn(P,j),j)};return A[Yl]=!0,A[jo]=S,A},b={_p:n,$id:t,$onAction:Wl.bind(null,f),$patch:v,$reset:p,$subscribe(C,S={}){const A=Wl(d,C,S.detached,()=>F()),F=a.run(()=>ar(()=>n.state.value[t],P=>{(S.flush==="sync"?c:u)&&C({storeId:t,type:Mn.direct,events:h},P)},yr({},l,S)));return A},$dispose:x},E=Qr(b);n._s.set(t,E);const _=(n._a&&n._a.runWithContext||Zh)(()=>n._e.run(()=>(a=Pi()).run(()=>e({action:w}))));for(const C in _){const S=_[C];if(ze(S)&&!rx(S)||or(S))o||(m&&tx(S)&&(ze(S)?S.value=m[C]:Wa(S,m[C])),n.state.value[t][C]=S);else if(typeof S=="function"){const A=w(S,C);_[C]=A,i.actions[C]=S}}return yr(E,_),yr(Ae(E),_),Object.defineProperty(E,"$state",{get:()=>n.state.value[t],set:C=>{v(S=>{yr(S,C)})}}),n._p.forEach(C=>{yr(E,a.run(()=>C({store:E,app:n._a,pinia:n,options:i})))}),m&&o&&r.hydrate&&r.hydrate(E.$state,m),u=!0,c=!0,E}/*! #__NO_SIDE_EFFECTS__ */function Bo(t,e,r){let n,s;const o=typeof e=="function";typeof t=="string"?(n=t,s=o?r:e):(s=t,n=t.id);function a(i,l){const u=nu();return i=i||(u?Pt(Tu,null):null),i&&Ao(i),i=Pu,i._s.has(n)||(o?Iu(n,e,s,i):nx(n,s,i)),i._s.get(n)}return a.$id=n,a}const sx="modulepreload",ox=function(t){return"/"+t},Ql={},ce=function(e,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),i=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(r.map(l=>{if(l=ox(l),l in Ql)return;Ql[l]=!0;const u=l.endsWith(".css"),c=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${c}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":sx,u||(d.as="script"),d.crossOrigin="",d.href=l,i&&d.setAttribute("nonce",i),document.head.appendChild(d),u)return new Promise((f,h)=>{d.addEventListener("load",f),d.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${l}`)))})}))}function o(a){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=a,window.dispatchEvent(i),!i.defaultPrevented)throw a}return s.then(a=>{for(const i of a||[])i.status==="rejected"&&o(i.reason);return e().catch(o)})};/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const on=typeof document<"u";function $u(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function ax(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&$u(t.default)}const Te=Object.assign;function zo(t,e){const r={};for(const n in e){const s=e[n];r[n]=Mt(s)?s.map(t):t(s)}return r}const Gn=()=>{},Mt=Array.isArray,Ou=/#/g,ix=/&/g,lx=/\//g,cx=/=/g,ux=/\?/g,Uu=/\+/g,dx=/%5B/g,fx=/%5D/g,Lu=/%5E/g,hx=/%60/g,Hu=/%7B/g,xx=/%7C/g,Mu=/%7D/g,gx=/%20/g;function Wi(t){return encodeURI(""+t).replace(xx,"|").replace(dx,"[").replace(fx,"]")}function px(t){return Wi(t).replace(Hu,"{").replace(Mu,"}").replace(Lu,"^")}function Ya(t){return Wi(t).replace(Uu,"%2B").replace(gx,"+").replace(Ou,"%23").replace(ix,"%26").replace(hx,"`").replace(Hu,"{").replace(Mu,"}").replace(Lu,"^")}function vx(t){return Ya(t).replace(cx,"%3D")}function yx(t){return Wi(t).replace(Ou,"%23").replace(ux,"%3F")}function mx(t){return t==null?"":yx(t).replace(lx,"%2F")}function es(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const wx=/\/$/,bx=t=>t.replace(wx,"");function No(t,e,r="/"){let n,s={},o="",a="";const i=e.indexOf("#");let l=e.indexOf("?");return i<l&&i>=0&&(l=-1),l>-1&&(n=e.slice(0,l),o=e.slice(l+1,i>-1?i:e.length),s=t(o)),i>-1&&(n=n||e.slice(0,i),a=e.slice(i,e.length)),n=Cx(n??e,r),{fullPath:n+(o&&"?")+o+a,path:n,query:s,hash:es(a)}}function _x(t,e){const r=e.query?t(e.query):"";return e.path+(r&&"?")+r+(e.hash||"")}function Xl(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function Ex(t,e,r){const n=e.matched.length-1,s=r.matched.length-1;return n>-1&&n===s&&pn(e.matched[n],r.matched[s])&&Gu(e.params,r.params)&&t(e.query)===t(r.query)&&e.hash===r.hash}function pn(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function Gu(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const r in t)if(!kx(t[r],e[r]))return!1;return!0}function kx(t,e){return Mt(t)?Jl(t,e):Mt(e)?Jl(e,t):t===e}function Jl(t,e){return Mt(e)?t.length===e.length&&t.every((r,n)=>r===e[n]):t.length===1&&t[0]===e}function Cx(t,e){if(t.startsWith("/"))return t;if(!t)return e;const r=e.split("/"),n=t.split("/"),s=n[n.length-1];(s===".."||s===".")&&n.push("");let o=r.length-1,a,i;for(a=0;a<n.length;a++)if(i=n[a],i!==".")if(i==="..")o>1&&o--;else break;return r.slice(0,o).join("/")+"/"+n.slice(a).join("/")}const vr={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var ts;(function(t){t.pop="pop",t.push="push"})(ts||(ts={}));var jn;(function(t){t.back="back",t.forward="forward",t.unknown=""})(jn||(jn={}));function Dx(t){if(!t)if(on){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),bx(t)}const Ax=/^[^#]+#/;function Bx(t,e){return t.replace(Ax,"#")+e}function Sx(t,e){const r=document.documentElement.getBoundingClientRect(),n=t.getBoundingClientRect();return{behavior:e.behavior,left:n.left-r.left-(e.left||0),top:n.top-r.top-(e.top||0)}}const So=()=>({left:window.scrollX,top:window.scrollY});function Fx(t){let e;if("el"in t){const r=t.el,n=typeof r=="string"&&r.startsWith("#"),s=typeof r=="string"?n?document.getElementById(r.slice(1)):document.querySelector(r):r;if(!s)return;e=Sx(s,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function Zl(t,e){return(history.state?history.state.position-e:-1)+t}const Qa=new Map;function Px(t,e){Qa.set(t,e)}function Tx(t){const e=Qa.get(t);return Qa.delete(t),e}let Rx=()=>location.protocol+"//"+location.host;function ju(t,e){const{pathname:r,search:n,hash:s}=e,o=t.indexOf("#");if(o>-1){let i=s.includes(t.slice(o))?t.slice(o).length:1,l=s.slice(i);return l[0]!=="/"&&(l="/"+l),Xl(l,"")}return Xl(r,t)+n+s}function Ix(t,e,r,n){let s=[],o=[],a=null;const i=({state:f})=>{const h=ju(t,location),m=r.value,y=e.value;let v=0;if(f){if(r.value=h,e.value=f,a&&a===m){a=null;return}v=y?f.position-y.position:0}else n(h);s.forEach(p=>{p(r.value,m,{delta:v,type:ts.pop,direction:v?v>0?jn.forward:jn.back:jn.unknown})})};function l(){a=r.value}function u(f){s.push(f);const h=()=>{const m=s.indexOf(f);m>-1&&s.splice(m,1)};return o.push(h),h}function c(){const{history:f}=window;f.state&&f.replaceState(Te({},f.state,{scroll:So()}),"")}function d(){for(const f of o)f();o=[],window.removeEventListener("popstate",i),window.removeEventListener("beforeunload",c)}return window.addEventListener("popstate",i),window.addEventListener("beforeunload",c,{passive:!0}),{pauseListeners:l,listen:u,destroy:d}}function e0(t,e,r,n=!1,s=!1){return{back:t,current:e,forward:r,replaced:n,position:window.history.length,scroll:s?So():null}}function $x(t){const{history:e,location:r}=window,n={value:ju(t,r)},s={value:e.state};s.value||o(n.value,{back:null,current:n.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function o(l,u,c){const d=t.indexOf("#"),f=d>-1?(r.host&&document.querySelector("base")?t:t.slice(d))+l:Rx()+t+l;try{e[c?"replaceState":"pushState"](u,"",f),s.value=u}catch(h){console.error(h),r[c?"replace":"assign"](f)}}function a(l,u){const c=Te({},e.state,e0(s.value.back,l,s.value.forward,!0),u,{position:s.value.position});o(l,c,!0),n.value=l}function i(l,u){const c=Te({},s.value,e.state,{forward:l,scroll:So()});o(c.current,c,!0);const d=Te({},e0(n.value,l,null),{position:c.position+1},u);o(l,d,!1),n.value=l}return{location:n,state:s,push:i,replace:a}}function Ox(t){t=Dx(t);const e=$x(t),r=Ix(t,e.state,e.location,e.replace);function n(o,a=!0){a||r.pauseListeners(),history.go(o)}const s=Te({location:"",base:t,go:n,createHref:Bx.bind(null,t)},e,r);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}function Ux(t){return typeof t=="string"||t&&typeof t=="object"}function zu(t){return typeof t=="string"||typeof t=="symbol"}const Nu=Symbol("");var t0;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(t0||(t0={}));function vn(t,e){return Te(new Error,{type:t,[Nu]:!0},e)}function Qt(t,e){return t instanceof Error&&Nu in t&&(e==null||!!(t.type&e))}const r0="[^/]+?",Lx={sensitive:!1,strict:!1,start:!0,end:!0},Hx=/[.+*?^${}()[\]/\\]/g;function Mx(t,e){const r=Te({},Lx,e),n=[];let s=r.start?"^":"";const o=[];for(const u of t){const c=u.length?[]:[90];r.strict&&!u.length&&(s+="/");for(let d=0;d<u.length;d++){const f=u[d];let h=40+(r.sensitive?.25:0);if(f.type===0)d||(s+="/"),s+=f.value.replace(Hx,"\\$&"),h+=40;else if(f.type===1){const{value:m,repeatable:y,optional:v,regexp:p}=f;o.push({name:m,repeatable:y,optional:v});const x=p||r0;if(x!==r0){h+=10;try{new RegExp(`(${x})`)}catch(b){throw new Error(`Invalid custom RegExp for param "${m}" (${x}): `+b.message)}}let w=y?`((?:${x})(?:/(?:${x}))*)`:`(${x})`;d||(w=v&&u.length<2?`(?:/${w})`:"/"+w),v&&(w+="?"),s+=w,h+=20,v&&(h+=-8),y&&(h+=-20),x===".*"&&(h+=-50)}c.push(h)}n.push(c)}if(r.strict&&r.end){const u=n.length-1;n[u][n[u].length-1]+=.7000000000000001}r.strict||(s+="/?"),r.end?s+="$":r.strict&&!s.endsWith("/")&&(s+="(?:/|$)");const a=new RegExp(s,r.sensitive?"":"i");function i(u){const c=u.match(a),d={};if(!c)return null;for(let f=1;f<c.length;f++){const h=c[f]||"",m=o[f-1];d[m.name]=h&&m.repeatable?h.split("/"):h}return d}function l(u){let c="",d=!1;for(const f of t){(!d||!c.endsWith("/"))&&(c+="/"),d=!1;for(const h of f)if(h.type===0)c+=h.value;else if(h.type===1){const{value:m,repeatable:y,optional:v}=h,p=m in u?u[m]:"";if(Mt(p)&&!y)throw new Error(`Provided param "${m}" is an array but it is not repeatable (* or + modifiers)`);const x=Mt(p)?p.join("/"):p;if(!x)if(v)f.length<2&&(c.endsWith("/")?c=c.slice(0,-1):d=!0);else throw new Error(`Missing required param "${m}"`);c+=x}}return c||"/"}return{re:a,score:n,keys:o,parse:i,stringify:l}}function Gx(t,e){let r=0;for(;r<t.length&&r<e.length;){const n=e[r]-t[r];if(n)return n;r++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function Ku(t,e){let r=0;const n=t.score,s=e.score;for(;r<n.length&&r<s.length;){const o=Gx(n[r],s[r]);if(o)return o;r++}if(Math.abs(s.length-n.length)===1){if(n0(n))return 1;if(n0(s))return-1}return s.length-n.length}function n0(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const jx={type:0,value:""},zx=/[a-zA-Z0-9_]/;function Nx(t){if(!t)return[[]];if(t==="/")return[[jx]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(h){throw new Error(`ERR (${r})/"${u}": ${h}`)}let r=0,n=r;const s=[];let o;function a(){o&&s.push(o),o=[]}let i=0,l,u="",c="";function d(){u&&(r===0?o.push({type:0,value:u}):r===1||r===2||r===3?(o.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),o.push({type:1,value:u,regexp:c,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),u="")}function f(){u+=l}for(;i<t.length;){if(l=t[i++],l==="\\"&&r!==2){n=r,r=4;continue}switch(r){case 0:l==="/"?(u&&d(),a()):l===":"?(d(),r=1):f();break;case 4:f(),r=n;break;case 1:l==="("?r=2:zx.test(l)?f():(d(),r=0,l!=="*"&&l!=="?"&&l!=="+"&&i--);break;case 2:l===")"?c[c.length-1]=="\\"?c=c.slice(0,-1)+l:r=3:c+=l;break;case 3:d(),r=0,l!=="*"&&l!=="?"&&l!=="+"&&i--,c="";break;default:e("Unknown state");break}}return r===2&&e(`Unfinished custom RegExp for param "${u}"`),d(),a(),s}function Kx(t,e,r){const n=Mx(Nx(t.path),r),s=Te(n,{record:t,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function Vx(t,e){const r=[],n=new Map;e=i0({strict:!1,end:!0,sensitive:!1},e);function s(d){return n.get(d)}function o(d,f,h){const m=!h,y=o0(d);y.aliasOf=h&&h.record;const v=i0(e,d),p=[y];if("alias"in d){const b=typeof d.alias=="string"?[d.alias]:d.alias;for(const E of b)p.push(o0(Te({},y,{components:h?h.record.components:y.components,path:E,aliasOf:h?h.record:y})))}let x,w;for(const b of p){const{path:E}=b;if(f&&E[0]!=="/"){const k=f.record.path,_=k[k.length-1]==="/"?"":"/";b.path=f.record.path+(E&&_+E)}if(x=Kx(b,f,v),h?h.alias.push(x):(w=w||x,w!==x&&w.alias.push(x),m&&d.name&&!a0(x)&&a(d.name)),Vu(x)&&l(x),y.children){const k=y.children;for(let _=0;_<k.length;_++)o(k[_],x,h&&h.children[_])}h=h||x}return w?()=>{a(w)}:Gn}function a(d){if(zu(d)){const f=n.get(d);f&&(n.delete(d),r.splice(r.indexOf(f),1),f.children.forEach(a),f.alias.forEach(a))}else{const f=r.indexOf(d);f>-1&&(r.splice(f,1),d.record.name&&n.delete(d.record.name),d.children.forEach(a),d.alias.forEach(a))}}function i(){return r}function l(d){const f=Yx(d,r);r.splice(f,0,d),d.record.name&&!a0(d)&&n.set(d.record.name,d)}function u(d,f){let h,m={},y,v;if("name"in d&&d.name){if(h=n.get(d.name),!h)throw vn(1,{location:d});v=h.record.name,m=Te(s0(f.params,h.keys.filter(w=>!w.optional).concat(h.parent?h.parent.keys.filter(w=>w.optional):[]).map(w=>w.name)),d.params&&s0(d.params,h.keys.map(w=>w.name))),y=h.stringify(m)}else if(d.path!=null)y=d.path,h=r.find(w=>w.re.test(y)),h&&(m=h.parse(y),v=h.record.name);else{if(h=f.name?n.get(f.name):r.find(w=>w.re.test(f.path)),!h)throw vn(1,{location:d,currentLocation:f});v=h.record.name,m=Te({},f.params,d.params),y=h.stringify(m)}const p=[];let x=h;for(;x;)p.unshift(x.record),x=x.parent;return{name:v,path:y,params:m,matched:p,meta:Wx(p)}}t.forEach(d=>o(d));function c(){r.length=0,n.clear()}return{addRoute:o,resolve:u,removeRoute:a,clearRoutes:c,getRoutes:i,getRecordMatcher:s}}function s0(t,e){const r={};for(const n of e)n in t&&(r[n]=t[n]);return r}function o0(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:qx(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function qx(t){const e={},r=t.props||!1;if("component"in t)e.default=r;else for(const n in t.components)e[n]=typeof r=="object"?r[n]:r;return e}function a0(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function Wx(t){return t.reduce((e,r)=>Te(e,r.meta),{})}function i0(t,e){const r={};for(const n in t)r[n]=n in e?e[n]:t[n];return r}function Yx(t,e){let r=0,n=e.length;for(;r!==n;){const o=r+n>>1;Ku(t,e[o])<0?n=o:r=o+1}const s=Qx(t);return s&&(n=e.lastIndexOf(s,n-1)),n}function Qx(t){let e=t;for(;e=e.parent;)if(Vu(e)&&Ku(t,e)===0)return e}function Vu({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function Xx(t){const e={};if(t===""||t==="?")return e;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<n.length;++s){const o=n[s].replace(Uu," "),a=o.indexOf("="),i=es(a<0?o:o.slice(0,a)),l=a<0?null:es(o.slice(a+1));if(i in e){let u=e[i];Mt(u)||(u=e[i]=[u]),u.push(l)}else e[i]=l}return e}function l0(t){let e="";for(let r in t){const n=t[r];if(r=vx(r),n==null){n!==void 0&&(e+=(e.length?"&":"")+r);continue}(Mt(n)?n.map(o=>o&&Ya(o)):[n&&Ya(n)]).forEach(o=>{o!==void 0&&(e+=(e.length?"&":"")+r,o!=null&&(e+="="+o))})}return e}function Jx(t){const e={};for(const r in t){const n=t[r];n!==void 0&&(e[r]=Mt(n)?n.map(s=>s==null?null:""+s):n==null?n:""+n)}return e}const Zx=Symbol(""),c0=Symbol(""),Fo=Symbol(""),qu=Symbol(""),Xa=Symbol("");function An(){let t=[];function e(n){return t.push(n),()=>{const s=t.indexOf(n);s>-1&&t.splice(s,1)}}function r(){t=[]}return{add:e,list:()=>t.slice(),reset:r}}function _r(t,e,r,n,s,o=a=>a()){const a=n&&(n.enterCallbacks[s]=n.enterCallbacks[s]||[]);return()=>new Promise((i,l)=>{const u=f=>{f===!1?l(vn(4,{from:r,to:e})):f instanceof Error?l(f):Ux(f)?l(vn(2,{from:e,to:f})):(a&&n.enterCallbacks[s]===a&&typeof f=="function"&&a.push(f),i())},c=o(()=>t.call(n&&n.instances[s],e,r,u));let d=Promise.resolve(c);t.length<3&&(d=d.then(u)),d.catch(f=>l(f))})}function Ko(t,e,r,n,s=o=>o()){const o=[];for(const a of t)for(const i in a.components){let l=a.components[i];if(!(e!=="beforeRouteEnter"&&!a.instances[i]))if($u(l)){const c=(l.__vccOpts||l)[e];c&&o.push(_r(c,r,n,a,i,s))}else{let u=l();o.push(()=>u.then(c=>{if(!c)throw new Error(`Couldn't resolve component "${i}" at "${a.path}"`);const d=ax(c)?c.default:c;a.mods[i]=c,a.components[i]=d;const h=(d.__vccOpts||d)[e];return h&&_r(h,r,n,a,i,s)()}))}}return o}function u0(t){const e=Pt(Fo),r=Pt(qu),n=ue(()=>{const l=ke(t.to);return e.resolve(l)}),s=ue(()=>{const{matched:l}=n.value,{length:u}=l,c=l[u-1],d=r.matched;if(!c||!d.length)return-1;const f=d.findIndex(pn.bind(null,c));if(f>-1)return f;const h=d0(l[u-2]);return u>1&&d0(c)===h&&d[d.length-1].path!==h?d.findIndex(pn.bind(null,l[u-2])):f}),o=ue(()=>s.value>-1&&sg(r.params,n.value.params)),a=ue(()=>s.value>-1&&s.value===r.matched.length-1&&Gu(r.params,n.value.params));function i(l={}){if(ng(l)){const u=e[ke(t.replace)?"replace":"push"](ke(t.to)).catch(Gn);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:n,href:ue(()=>n.value.href),isActive:o,isExactActive:a,navigate:i}}function eg(t){return t.length===1?t[0]:t}const tg=Qe({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:u0,setup(t,{slots:e}){const r=Qr(u0(t)),{options:n}=Pt(Fo),s=ue(()=>({[f0(t.activeClass,n.linkActiveClass,"router-link-active")]:r.isActive,[f0(t.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:r.isExactActive}));return()=>{const o=e.default&&eg(e.default(r));return t.custom?o:Ki("a",{"aria-current":r.isExactActive?t.ariaCurrentValue:null,href:r.href,onClick:r.navigate,class:s.value},o)}}}),rg=tg;function ng(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function sg(t,e){for(const r in e){const n=e[r],s=t[r];if(typeof n=="string"){if(n!==s)return!1}else if(!Mt(s)||s.length!==n.length||n.some((o,a)=>o!==s[a]))return!1}return!0}function d0(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const f0=(t,e,r)=>t??e??r,og=Qe({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:r}){const n=Pt(Xa),s=ue(()=>t.route||n.value),o=Pt(c0,0),a=ue(()=>{let u=ke(o);const{matched:c}=s.value;let d;for(;(d=c[u])&&!d.components;)u++;return u}),i=ue(()=>s.value.matched[a.value]);Un(c0,ue(()=>a.value+1)),Un(Zx,i),Un(Xa,s);const l=Q();return ar(()=>[l.value,i.value,t.name],([u,c,d],[f,h,m])=>{c&&(c.instances[d]=u,h&&h!==c&&u&&u===f&&(c.leaveGuards.size||(c.leaveGuards=h.leaveGuards),c.updateGuards.size||(c.updateGuards=h.updateGuards))),u&&c&&(!h||!pn(c,h)||!f)&&(c.enterCallbacks[d]||[]).forEach(y=>y(u))},{flush:"post"}),()=>{const u=s.value,c=t.name,d=i.value,f=d&&d.components[c];if(!f)return h0(r.default,{Component:f,route:u});const h=d.props[c],m=h?h===!0?u.params:typeof h=="function"?h(u):h:null,v=Ki(f,Te({},m,e,{onVnodeUnmounted:p=>{p.component.isUnmounted&&(d.instances[c]=null)},ref:l}));return h0(r.default,{Component:v,route:u})||v}}});function h0(t,e){if(!t)return null;const r=t(e);return r.length===1?r[0]:r}const ag=og;function ig(t){const e=Vx(t.routes,t),r=t.parseQuery||Xx,n=t.stringifyQuery||l0,s=t.history,o=An(),a=An(),i=An(),l=Pc(vr);let u=vr;on&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const c=zo.bind(null,$=>""+$),d=zo.bind(null,mx),f=zo.bind(null,es);function h($,q){let ne,ie;return zu($)?(ne=e.getRecordMatcher($),ie=q):ie=$,e.addRoute(ie,ne)}function m($){const q=e.getRecordMatcher($);q&&e.removeRoute(q)}function y(){return e.getRoutes().map($=>$.record)}function v($){return!!e.getRecordMatcher($)}function p($,q){if(q=Te({},q||l.value),typeof $=="string"){const R=No(r,$,q.path),M=e.resolve({path:R.path},q),N=s.createHref(R.fullPath);return Te(R,M,{params:f(M.params),hash:es(R.hash),redirectedFrom:void 0,href:N})}let ne;if($.path!=null)ne=Te({},$,{path:No(r,$.path,q.path).path});else{const R=Te({},$.params);for(const M in R)R[M]==null&&delete R[M];ne=Te({},$,{params:d(R)}),q.params=d(q.params)}const ie=e.resolve(ne,q),Fe=$.hash||"";ie.params=c(f(ie.params));const D=_x(n,Te({},$,{hash:px(Fe),path:ie.path})),B=s.createHref(D);return Te({fullPath:D,hash:Fe,query:n===l0?Jx($.query):$.query||{}},ie,{redirectedFrom:void 0,href:B})}function x($){return typeof $=="string"?No(r,$,l.value.path):Te({},$)}function w($,q){if(u!==$)return vn(8,{from:q,to:$})}function b($){return _($)}function E($){return b(Te(x($),{replace:!0}))}function k($){const q=$.matched[$.matched.length-1];if(q&&q.redirect){const{redirect:ne}=q;let ie=typeof ne=="function"?ne($):ne;return typeof ie=="string"&&(ie=ie.includes("?")||ie.includes("#")?ie=x(ie):{path:ie},ie.params={}),Te({query:$.query,hash:$.hash,params:ie.path!=null?{}:$.params},ie)}}function _($,q){const ne=u=p($),ie=l.value,Fe=$.state,D=$.force,B=$.replace===!0,R=k(ne);if(R)return _(Te(x(R),{state:typeof R=="object"?Te({},Fe,R.state):Fe,force:D,replace:B}),q||ne);const M=ne;M.redirectedFrom=q;let N;return!D&&Ex(n,ie,ne)&&(N=vn(16,{to:M,from:ie}),H(ie,ie,!0,!1)),(N?Promise.resolve(N):A(M,ie)).catch(G=>Qt(G)?Qt(G,2)?G:fe(G):te(G,M,ie)).then(G=>{if(G){if(Qt(G,2))return _(Te({replace:B},x(G.to),{state:typeof G.to=="object"?Te({},Fe,G.to.state):Fe,force:D}),q||M)}else G=P(M,ie,!0,B,Fe);return F(M,ie,G),G})}function C($,q){const ne=w($,q);return ne?Promise.reject(ne):Promise.resolve()}function S($){const q=z.values().next().value;return q&&typeof q.runWithContext=="function"?q.runWithContext($):$()}function A($,q){let ne;const[ie,Fe,D]=lg($,q);ne=Ko(ie.reverse(),"beforeRouteLeave",$,q);for(const R of ie)R.leaveGuards.forEach(M=>{ne.push(_r(M,$,q))});const B=C.bind(null,$,q);return ne.push(B),me(ne).then(()=>{ne=[];for(const R of o.list())ne.push(_r(R,$,q));return ne.push(B),me(ne)}).then(()=>{ne=Ko(Fe,"beforeRouteUpdate",$,q);for(const R of Fe)R.updateGuards.forEach(M=>{ne.push(_r(M,$,q))});return ne.push(B),me(ne)}).then(()=>{ne=[];for(const R of D)if(R.beforeEnter)if(Mt(R.beforeEnter))for(const M of R.beforeEnter)ne.push(_r(M,$,q));else ne.push(_r(R.beforeEnter,$,q));return ne.push(B),me(ne)}).then(()=>($.matched.forEach(R=>R.enterCallbacks={}),ne=Ko(D,"beforeRouteEnter",$,q,S),ne.push(B),me(ne))).then(()=>{ne=[];for(const R of a.list())ne.push(_r(R,$,q));return ne.push(B),me(ne)}).catch(R=>Qt(R,8)?R:Promise.reject(R))}function F($,q,ne){i.list().forEach(ie=>S(()=>ie($,q,ne)))}function P($,q,ne,ie,Fe){const D=w($,q);if(D)return D;const B=q===vr,R=on?history.state:{};ne&&(ie||B?s.replace($.fullPath,Te({scroll:B&&R&&R.scroll},Fe)):s.push($.fullPath,Fe)),l.value=$,H($,q,ne,B),fe()}let T;function I(){T||(T=s.listen(($,q,ne)=>{if(!De.listening)return;const ie=p($),Fe=k(ie);if(Fe){_(Te(Fe,{replace:!0,force:!0}),ie).catch(Gn);return}u=ie;const D=l.value;on&&Px(Zl(D.fullPath,ne.delta),So()),A(ie,D).catch(B=>Qt(B,12)?B:Qt(B,2)?(_(Te(x(B.to),{force:!0}),ie).then(R=>{Qt(R,20)&&!ne.delta&&ne.type===ts.pop&&s.go(-1,!1)}).catch(Gn),Promise.reject()):(ne.delta&&s.go(-ne.delta,!1),te(B,ie,D))).then(B=>{B=B||P(ie,D,!1),B&&(ne.delta&&!Qt(B,8)?s.go(-ne.delta,!1):ne.type===ts.pop&&Qt(B,20)&&s.go(-1,!1)),F(ie,D,B)}).catch(Gn)}))}let K=An(),j=An(),Y;function te($,q,ne){fe($);const ie=j.list();return ie.length?ie.forEach(Fe=>Fe($,q,ne)):console.error($),Promise.reject($)}function xe(){return Y&&l.value!==vr?Promise.resolve():new Promise(($,q)=>{K.add([$,q])})}function fe($){return Y||(Y=!$,I(),K.list().forEach(([q,ne])=>$?ne($):q()),K.reset()),$}function H($,q,ne,ie){const{scrollBehavior:Fe}=t;if(!on||!Fe)return Promise.resolve();const D=!ne&&Tx(Zl($.fullPath,0))||(ie||!ne)&&history.state&&history.state.scroll||null;return Kr().then(()=>Fe($,q,D)).then(B=>B&&Fx(B)).catch(B=>te(B,$,q))}const U=$=>s.go($);let V;const z=new Set,De={currentRoute:l,listening:!0,addRoute:h,removeRoute:m,clearRoutes:e.clearRoutes,hasRoute:v,getRoutes:y,resolve:p,options:t,push:b,replace:E,go:U,back:()=>U(-1),forward:()=>U(1),beforeEach:o.add,beforeResolve:a.add,afterEach:i.add,onError:j.add,isReady:xe,install($){const q=this;$.component("RouterLink",rg),$.component("RouterView",ag),$.config.globalProperties.$router=q,Object.defineProperty($.config.globalProperties,"$route",{enumerable:!0,get:()=>ke(l)}),on&&!V&&l.value===vr&&(V=!0,b(s.location).catch(Fe=>{}));const ne={};for(const Fe in vr)Object.defineProperty(ne,Fe,{get:()=>l.value[Fe],enumerable:!0});$.provide(Fo,q),$.provide(qu,Li(ne)),$.provide(Xa,l);const ie=$.unmount;z.add($),$.unmount=function(){z.delete($),z.size<1&&(u=vr,T&&T(),T=null,l.value=vr,V=!1,Y=!1),ie()}}};function me($){return $.reduce((q,ne)=>q.then(()=>S(ne)),Promise.resolve())}return De}function lg(t,e){const r=[],n=[],s=[],o=Math.max(e.matched.length,t.matched.length);for(let a=0;a<o;a++){const i=e.matched[a];i&&(t.matched.find(u=>pn(u,i))?n.push(i):r.push(i));const l=t.matched[a];l&&(e.matched.find(u=>pn(u,l))||s.push(l))}return[r,n,s]}function cg(){return Pt(Fo)}const Me=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Ne=Object.keys,dt=Array.isArray;function vt(t,e){return typeof e!="object"||Ne(e).forEach(function(r){t[r]=e[r]}),t}typeof Promise>"u"||Me.Promise||(Me.Promise=Promise);const rs=Object.getPrototypeOf,ug={}.hasOwnProperty;function At(t,e){return ug.call(t,e)}function yn(t,e){typeof e=="function"&&(e=e(rs(t))),(typeof Reflect>"u"?Ne:Reflect.ownKeys)(e).forEach(r=>{ir(t,r,e[r])})}const Wu=Object.defineProperty;function ir(t,e,r,n){Wu(t,e,vt(r&&At(r,"get")&&typeof r.get=="function"?{get:r.get,set:r.set,configurable:!0}:{value:r,configurable:!0,writable:!0},n))}function dn(t){return{from:function(e){return t.prototype=Object.create(e.prototype),ir(t.prototype,"constructor",t),{extend:yn.bind(null,t.prototype)}}}}const dg=Object.getOwnPropertyDescriptor;function Yi(t,e){let r;return dg(t,e)||(r=rs(t))&&Yi(r,e)}const fg=[].slice;function so(t,e,r){return fg.call(t,e,r)}function Yu(t,e){return e(t)}function Fn(t){if(!t)throw new Error("Assertion Failed")}function Qu(t){Me.setImmediate?setImmediate(t):setTimeout(t,0)}function Xu(t,e){return t.reduce((r,n,s)=>{var o=e(n,s);return o&&(r[o[0]]=o[1]),r},{})}function lr(t,e){if(typeof e=="string"&&At(t,e))return t[e];if(!e)return t;if(typeof e!="string"){for(var r=[],n=0,s=e.length;n<s;++n){var o=lr(t,e[n]);r.push(o)}return r}var a=e.indexOf(".");if(a!==-1){var i=t[e.substr(0,a)];return i==null?void 0:lr(i,e.substr(a+1))}}function Lt(t,e,r){if(t&&e!==void 0&&(!("isFrozen"in Object)||!Object.isFrozen(t)))if(typeof e!="string"&&"length"in e){Fn(typeof r!="string"&&"length"in r);for(var n=0,s=e.length;n<s;++n)Lt(t,e[n],r[n])}else{var o=e.indexOf(".");if(o!==-1){var a=e.substr(0,o),i=e.substr(o+1);if(i==="")r===void 0?dt(t)&&!isNaN(parseInt(a))?t.splice(a,1):delete t[a]:t[a]=r;else{var l=t[a];l&&At(t,a)||(l=t[a]={}),Lt(l,i,r)}}else r===void 0?dt(t)&&!isNaN(parseInt(e))?t.splice(e,1):delete t[e]:t[e]=r}}function Ju(t){var e={};for(var r in t)At(t,r)&&(e[r]=t[r]);return e}const hg=[].concat;function Zu(t){return hg.apply([],t)}const ed="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Zu([8,16,32,64].map(t=>["Int","Uint","Float"].map(e=>e+t+"Array")))).filter(t=>Me[t]),xg=ed.map(t=>Me[t]);Xu(ed,t=>[t,!0]);let Er=null;function vs(t){Er=typeof WeakMap<"u"&&new WeakMap;const e=Ja(t);return Er=null,e}function Ja(t){if(!t||typeof t!="object")return t;let e=Er&&Er.get(t);if(e)return e;if(dt(t)){e=[],Er&&Er.set(t,e);for(var r=0,n=t.length;r<n;++r)e.push(Ja(t[r]))}else if(xg.indexOf(t.constructor)>=0)e=t;else{const o=rs(t);for(var s in e=o===Object.prototype?{}:Object.create(o),Er&&Er.set(t,e),t)At(t,s)&&(e[s]=Ja(t[s]))}return e}const{toString:gg}={};function Za(t){return gg.call(t).slice(8,-1)}const ei=typeof Symbol<"u"?Symbol.iterator:"@@iterator",pg=typeof ei=="symbol"?function(t){var e;return t!=null&&(e=t[ei])&&e.apply(t)}:function(){return null},an={};function nr(t){var e,r,n,s;if(arguments.length===1){if(dt(t))return t.slice();if(this===an&&typeof t=="string")return[t];if(s=pg(t)){for(r=[];!(n=s.next()).done;)r.push(n.value);return r}if(t==null)return[t];if(typeof(e=t.length)=="number"){for(r=new Array(e);e--;)r[e]=t[e];return r}return[t]}for(e=arguments.length,r=new Array(e);e--;)r[e]=arguments[e];return r}const Qi=typeof Symbol<"u"?t=>t[Symbol.toStringTag]==="AsyncFunction":()=>!1;var Wt=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function td(t,e){Wt=t,rd=e}var rd=()=>!0;const vg=!new Error("").stack;function Xr(){if(vg)try{throw Xr.arguments,new Error}catch(t){return t}return new Error}function ti(t,e){var r=t.stack;return r?(e=e||0,r.indexOf(t.name)===0&&(e+=(t.name+t.message).split(`
`).length),r.split(`
`).slice(e).filter(rd).map(n=>`
`+n).join("")):""}var nd=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Xi=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(nd),yg={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function fn(t,e){this._e=Xr(),this.name=t,this.message=e}function sd(t,e){return t+". Errors: "+Object.keys(e).map(r=>e[r].toString()).filter((r,n,s)=>s.indexOf(r)===n).join(`
`)}function oo(t,e,r,n){this._e=Xr(),this.failures=e,this.failedKeys=n,this.successCount=r,this.message=sd(t,e)}function zn(t,e){this._e=Xr(),this.name="BulkError",this.failures=Object.keys(e).map(r=>e[r]),this.failuresByPos=e,this.message=sd(t,e)}dn(fn).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+ti(this._e,2))}},toString:function(){return this.name+": "+this.message}}),dn(oo).from(fn),dn(zn).from(fn);var Ji=Xi.reduce((t,e)=>(t[e]=e+"Error",t),{});const mg=fn;var ve=Xi.reduce((t,e)=>{var r=e+"Error";function n(s,o){this._e=Xr(),this.name=r,s?typeof s=="string"?(this.message=`${s}${o?`
 `+o:""}`,this.inner=o||null):typeof s=="object"&&(this.message=`${s.name} ${s.message}`,this.inner=s):(this.message=yg[e]||r,this.inner=null)}return dn(n).from(mg),t[e]=n,t},{});ve.Syntax=SyntaxError,ve.Type=TypeError,ve.Range=RangeError;var x0=nd.reduce((t,e)=>(t[e+"Error"]=ve[e],t),{}),Hs=Xi.reduce((t,e)=>(["Syntax","Type","Range"].indexOf(e)===-1&&(t[e+"Error"]=ve[e]),t),{});function $e(){}function ns(t){return t}function wg(t,e){return t==null||t===ns?e:function(r){return e(t(r))}}function qr(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function bg(t,e){return t===$e?e:function(){var r=t.apply(this,arguments);r!==void 0&&(arguments[0]=r);var n=this.onsuccess,s=this.onerror;this.onsuccess=null,this.onerror=null;var o=e.apply(this,arguments);return n&&(this.onsuccess=this.onsuccess?qr(n,this.onsuccess):n),s&&(this.onerror=this.onerror?qr(s,this.onerror):s),o!==void 0?o:r}}function _g(t,e){return t===$e?e:function(){t.apply(this,arguments);var r=this.onsuccess,n=this.onerror;this.onsuccess=this.onerror=null,e.apply(this,arguments),r&&(this.onsuccess=this.onsuccess?qr(r,this.onsuccess):r),n&&(this.onerror=this.onerror?qr(n,this.onerror):n)}}function Eg(t,e){return t===$e?e:function(r){var n=t.apply(this,arguments);vt(r,n);var s=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var a=e.apply(this,arguments);return s&&(this.onsuccess=this.onsuccess?qr(s,this.onsuccess):s),o&&(this.onerror=this.onerror?qr(o,this.onerror):o),n===void 0?a===void 0?void 0:a:vt(n,a)}}function kg(t,e){return t===$e?e:function(){return e.apply(this,arguments)!==!1&&t.apply(this,arguments)}}function Zi(t,e){return t===$e?e:function(){var r=t.apply(this,arguments);if(r&&typeof r.then=="function"){for(var n=this,s=arguments.length,o=new Array(s);s--;)o[s]=arguments[s];return r.then(function(){return e.apply(n,o)})}return e.apply(this,arguments)}}Hs.ModifyError=oo,Hs.DexieError=fn,Hs.BulkError=zn;var ss={};const od=100,[ri,ao,ni]=typeof Promise>"u"?[]:(()=>{let t=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[t,rs(t),t];const e=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[e,rs(e),t]})(),ad=ao&&ao.then,Ms=ri&&ri.constructor,el=!!ni;var si=!1,Cg=ni?()=>{ni.then(Bs)}:Me.setImmediate?setImmediate.bind(null,Bs):Me.MutationObserver?()=>{var t=document.createElement("div");new MutationObserver(()=>{Bs(),t=null}).observe(t,{attributes:!0}),t.setAttribute("i","1")}:()=>{setTimeout(Bs,0)},Nn=function(t,e){Pn.push([t,e]),io&&(Cg(),io=!1)},oi=!0,io=!0,Mr=[],Gs=[],ai=null,ii=ns,hn={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:v0,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(t=>{try{v0(t[0],t[1])}catch{}})}},de=hn,Pn=[],Gr=0,js=[];function se(t){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=$e,this._lib=!1;var e=this._PSD=de;if(Wt&&(this._stackHolder=Xr(),this._prev=null,this._numPrev=0),typeof t!="function"){if(t!==ss)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&ci(this,this._value))}this._state=null,this._value=null,++e.ref,ld(this,t)}const li={get:function(){var t=de,e=lo;function r(n,s){var o=!t.global&&(t!==de||e!==lo);const a=o&&!hr();var i=new se((l,u)=>{tl(this,new id(co(n,t,o,a),co(s,t,o,a),l,u,t))});return Wt&&dd(i,this),i}return r.prototype=ss,r},set:function(t){ir(this,"then",t&&t.prototype===ss?li:{get:function(){return t},set:li.set})}};function id(t,e,r,n,s){this.onFulfilled=typeof t=="function"?t:null,this.onRejected=typeof e=="function"?e:null,this.resolve=r,this.reject=n,this.psd=s}function ld(t,e){try{e(r=>{if(t._state===null){if(r===t)throw new TypeError("A promise cannot be resolved with itself.");var n=t._lib&&ys();r&&typeof r.then=="function"?ld(t,(s,o)=>{r instanceof se?r._then(s,o):r.then(s,o)}):(t._state=!0,t._value=r,cd(t)),n&&ms()}},ci.bind(null,t))}catch(r){ci(t,r)}}function ci(t,e){if(Gs.push(e),t._state===null){var r=t._lib&&ys();e=ii(e),t._state=!1,t._value=e,Wt&&e!==null&&typeof e=="object"&&!e._promise&&function(n,s,o){try{n.apply(null,o)}catch{}}(()=>{var n=Yi(e,"stack");e._promise=t,ir(e,"stack",{get:()=>si?n&&(n.get?n.get.apply(e):n.value):t.stack})}),function(n){Mr.some(s=>s._value===n._value)||Mr.push(n)}(t),cd(t),r&&ms()}}function cd(t){var e=t._listeners;t._listeners=[];for(var r=0,n=e.length;r<n;++r)tl(t,e[r]);var s=t._PSD;--s.ref||s.finalize(),Gr===0&&(++Gr,Nn(()=>{--Gr==0&&rl()},[]))}function tl(t,e){if(t._state!==null){var r=t._state?e.onFulfilled:e.onRejected;if(r===null)return(t._state?e.resolve:e.reject)(t._value);++e.psd.ref,++Gr,Nn(Dg,[r,t,e])}else t._listeners.push(e)}function Dg(t,e,r){try{ai=e;var n,s=e._value;e._state?n=t(s):(Gs.length&&(Gs=[]),n=t(s),Gs.indexOf(s)===-1&&function(o){for(var a=Mr.length;a;)if(Mr[--a]._value===o._value)return void Mr.splice(a,1)}(e)),r.resolve(n)}catch(o){r.reject(o)}finally{ai=null,--Gr==0&&rl(),--r.psd.ref||r.psd.finalize()}}function ud(t,e,r){if(e.length===r)return e;var n="";if(t._state===!1){var s,o,a=t._value;a!=null?(s=a.name||"Error",o=a.message||a,n=ti(a,0)):(s=a,o=""),e.push(s+(o?": "+o:"")+n)}return Wt&&((n=ti(t._stackHolder,2))&&e.indexOf(n)===-1&&e.push(n),t._prev&&ud(t._prev,e,r)),e}function dd(t,e){var r=e?e._numPrev+1:0;r<100&&(t._prev=e,t._numPrev=r)}function Bs(){ys()&&ms()}function ys(){var t=oi;return oi=!1,io=!1,t}function ms(){var t,e,r;do for(;Pn.length>0;)for(t=Pn,Pn=[],r=t.length,e=0;e<r;++e){var n=t[e];n[0].apply(null,n[1])}while(Pn.length>0);oi=!0,io=!0}function rl(){var t=Mr;Mr=[],t.forEach(n=>{n._PSD.onunhandled.call(null,n._value,n)});for(var e=js.slice(0),r=e.length;r;)e[--r]()}function Ss(t){return new se(ss,!1,t)}function Ge(t,e){var r=de;return function(){var n=ys(),s=de;try{return Br(r,!0),t.apply(this,arguments)}catch(o){e&&e(o)}finally{Br(s,!1),n&&ms()}}}yn(se.prototype,{then:li,_then:function(t,e){tl(this,new id(null,null,t,e,de))},catch:function(t){if(arguments.length===1)return this.then(null,t);var e=arguments[0],r=arguments[1];return typeof e=="function"?this.then(null,n=>n instanceof e?r(n):Ss(n)):this.then(null,n=>n&&n.name===e?r(n):Ss(n))},finally:function(t){return this.then(e=>(t(),e),e=>(t(),Ss(e)))},stack:{get:function(){if(this._stack)return this._stack;try{si=!0;var t=ud(this,[],20).join(`
From previous: `);return this._state!==null&&(this._stack=t),t}finally{si=!1}}},timeout:function(t,e){return t<1/0?new se((r,n)=>{var s=setTimeout(()=>n(new ve.Timeout(e)),t);this.then(r,n).finally(clearTimeout.bind(null,s))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&ir(se.prototype,Symbol.toStringTag,"Dexie.Promise"),hn.env=fd(),yn(se,{all:function(){var t=nr.apply(null,arguments).map(Fs);return new se(function(e,r){t.length===0&&e([]);var n=t.length;t.forEach((s,o)=>se.resolve(s).then(a=>{t[o]=a,--n||e(t)},r))})},resolve:t=>{if(t instanceof se)return t;if(t&&typeof t.then=="function")return new se((r,n)=>{t.then(r,n)});var e=new se(ss,!0,t);return dd(e,ai),e},reject:Ss,race:function(){var t=nr.apply(null,arguments).map(Fs);return new se((e,r)=>{t.map(n=>se.resolve(n).then(e,r))})},PSD:{get:()=>de,set:t=>de=t},totalEchoes:{get:()=>lo},newPSD:Ar,usePSD:_n,scheduler:{get:()=>Nn,set:t=>{Nn=t}},rejectionMapper:{get:()=>ii,set:t=>{ii=t}},follow:(t,e)=>new se((r,n)=>Ar((s,o)=>{var a=de;a.unhandleds=[],a.onunhandled=o,a.finalize=qr(function(){(function(i){function l(){i(),js.splice(js.indexOf(l),1)}js.push(l),++Gr,Nn(()=>{--Gr==0&&rl()},[])})(()=>{this.unhandleds.length===0?s():o(this.unhandleds[0])})},a.finalize),t()},e,r,n))}),Ms&&(Ms.allSettled&&ir(se,"allSettled",function(){const t=nr.apply(null,arguments).map(Fs);return new se(e=>{t.length===0&&e([]);let r=t.length;const n=new Array(r);t.forEach((s,o)=>se.resolve(s).then(a=>n[o]={status:"fulfilled",value:a},a=>n[o]={status:"rejected",reason:a}).then(()=>--r||e(n)))})}),Ms.any&&typeof AggregateError<"u"&&ir(se,"any",function(){const t=nr.apply(null,arguments).map(Fs);return new se((e,r)=>{t.length===0&&r(new AggregateError([]));let n=t.length;const s=new Array(n);t.forEach((o,a)=>se.resolve(o).then(i=>e(i),i=>{s[a]=i,--n||r(new AggregateError(s))}))})}));const ut={awaits:0,echoes:0,id:0};var Ag=0,zs=[],Vo=0,lo=0,Bg=0;function Ar(t,e,r,n){var s=de,o=Object.create(s);o.parent=s,o.ref=0,o.global=!1,o.id=++Bg;var a=hn.env;o.env=el?{Promise:se,PromiseProp:{value:se,configurable:!0,writable:!0},all:se.all,race:se.race,allSettled:se.allSettled,any:se.any,resolve:se.resolve,reject:se.reject,nthen:g0(a.nthen,o),gthen:g0(a.gthen,o)}:{},e&&vt(o,e),++s.ref,o.finalize=function(){--this.parent.ref||this.parent.finalize()};var i=_n(o,t,r,n);return o.ref===0&&o.finalize(),i}function bn(){return ut.id||(ut.id=++Ag),++ut.awaits,ut.echoes+=od,ut.id}function hr(){return!!ut.awaits&&(--ut.awaits==0&&(ut.id=0),ut.echoes=ut.awaits*od,!0)}function Fs(t){return ut.echoes&&t&&t.constructor===Ms?(bn(),t.then(e=>(hr(),e),e=>(hr(),Ye(e)))):t}function Sg(t){++lo,ut.echoes&&--ut.echoes!=0||(ut.echoes=ut.id=0),zs.push(de),Br(t,!0)}function Fg(){var t=zs[zs.length-1];zs.pop(),Br(t,!1)}function Br(t,e){var r=de;if((e?!ut.echoes||Vo++&&t===de:!Vo||--Vo&&t===de)||hd(e?Sg.bind(null,t):Fg),t!==de&&(de=t,r===hn&&(hn.env=fd()),el)){var n=hn.env.Promise,s=t.env;ao.then=s.nthen,n.prototype.then=s.gthen,(r.global||t.global)&&(Object.defineProperty(Me,"Promise",s.PromiseProp),n.all=s.all,n.race=s.race,n.resolve=s.resolve,n.reject=s.reject,s.allSettled&&(n.allSettled=s.allSettled),s.any&&(n.any=s.any))}}function fd(){var t=Me.Promise;return el?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(Me,"Promise"),all:t.all,race:t.race,allSettled:t.allSettled,any:t.any,resolve:t.resolve,reject:t.reject,nthen:ao.then,gthen:t.prototype.then}:{}}function _n(t,e,r,n,s){var o=de;try{return Br(t,!0),e(r,n,s)}finally{Br(o,!1)}}function hd(t){ad.call(ri,t)}function co(t,e,r,n){return typeof t!="function"?t:function(){var s=de;r&&bn(),Br(e,!0);try{return t.apply(this,arguments)}finally{Br(s,!1),n&&hd(hr)}}}function g0(t,e){return function(r,n){return t.call(this,co(r,e),co(n,e))}}(""+ad).indexOf("[native code]")===-1&&(bn=hr=$e);const p0="unhandledrejection";function v0(t,e){var r;try{r=e.onuncatched(t)}catch{}if(r!==!1)try{var n,s={promise:e,reason:t};if(Me.document&&document.createEvent?((n=document.createEvent("Event")).initEvent(p0,!0,!0),vt(n,s)):Me.CustomEvent&&vt(n=new CustomEvent(p0,{detail:s}),s),n&&Me.dispatchEvent&&(dispatchEvent(n),!Me.PromiseRejectionEvent&&Me.onunhandledrejection))try{Me.onunhandledrejection(n)}catch{}Wt&&n&&!n.defaultPrevented&&console.warn(`Unhandled rejection: ${t.stack||t}`)}catch{}}var Ye=se.reject;function ui(t,e,r,n){if(t.idbdb&&(t._state.openComplete||de.letThrough||t._vip)){var s=t._createTransaction(e,r,t._dbSchema);try{s.create(),t._state.PR1398_maxLoop=3}catch(o){return o.name===Ji.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t._close(),t.open().then(()=>ui(t,e,r,n))):Ye(o)}return s._promise(e,(o,a)=>Ar(()=>(de.trans=s,n(o,a,s)))).then(o=>s._completion.then(()=>o))}if(t._state.openComplete)return Ye(new ve.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._options.autoOpen)return Ye(new ve.DatabaseClosed);t.open().catch($e)}return t._state.dbReadyPromise.then(()=>ui(t,e,r,n))}const y0="3.2.7",Or="￿",di=-1/0,Xt="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",xd="String expected.",Kn=[],Po=typeof navigator<"u"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),Pg=Po,Tg=Po,gd=t=>!/(dexie\.js|dexie\.min\.js)/.test(t),To="__dbnames",qo="readonly",Wo="readwrite";function Wr(t,e){return t?e?function(){return t.apply(this,arguments)&&e.apply(this,arguments)}:t:e}const pd={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Ps(t){return typeof t!="string"||/\./.test(t)?e=>e:e=>(e[t]===void 0&&t in e&&delete(e=vs(e))[t],e)}class Rg{_trans(e,r,n){const s=this._tx||de.trans,o=this.name;function a(l,u,c){if(!c.schema[o])throw new ve.NotFound("Table "+o+" not part of transaction");return r(c.idbtrans,c)}const i=ys();try{return s&&s.db===this.db?s===de.trans?s._promise(e,a,n):Ar(()=>s._promise(e,a,n),{trans:s,transless:de.transless||de}):ui(this.db,e,[this.name],a)}finally{i&&ms()}}get(e,r){return e&&e.constructor===Object?this.where(e).first(r):this._trans("readonly",n=>this.core.get({trans:n,key:e}).then(s=>this.hook.reading.fire(s))).then(r)}where(e){if(typeof e=="string")return new this.db.WhereClause(this,e);if(dt(e))return new this.db.WhereClause(this,`[${e.join("+")}]`);const r=Ne(e);if(r.length===1)return this.where(r[0]).equals(e[r[0]]);const n=this.schema.indexes.concat(this.schema.primKey).filter(u=>{if(u.compound&&r.every(c=>u.keyPath.indexOf(c)>=0)){for(let c=0;c<r.length;++c)if(r.indexOf(u.keyPath[c])===-1)return!1;return!0}return!1}).sort((u,c)=>u.keyPath.length-c.keyPath.length)[0];if(n&&this.db._maxKey!==Or){const u=n.keyPath.slice(0,r.length);return this.where(u).equals(u.map(c=>e[c]))}!n&&Wt&&console.warn(`The query ${JSON.stringify(e)} on ${this.name} would benefit of a compound index [${r.join("+")}]`);const{idxByName:s}=this.schema,o=this.db._deps.indexedDB;function a(u,c){try{return o.cmp(u,c)===0}catch{return!1}}const[i,l]=r.reduce(([u,c],d)=>{const f=s[d],h=e[d];return[u||f,u||!f?Wr(c,f&&f.multi?m=>{const y=lr(m,d);return dt(y)&&y.some(v=>a(h,v))}:m=>a(h,lr(m,d))):c]},[null,null]);return i?this.where(i.name).equals(e[i.keyPath]).filter(l):n?this.filter(l):this.where(r).equals("")}filter(e){return this.toCollection().and(e)}count(e){return this.toCollection().count(e)}offset(e){return this.toCollection().offset(e)}limit(e){return this.toCollection().limit(e)}each(e){return this.toCollection().each(e)}toArray(e){return this.toCollection().toArray(e)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(e){return new this.db.Collection(new this.db.WhereClause(this,dt(e)?`[${e.join("+")}]`:e))}reverse(){return this.toCollection().reverse()}mapToClass(e){this.schema.mappedClass=e;const r=n=>{if(!n)return n;const s=Object.create(e.prototype);for(var o in n)if(At(n,o))try{s[o]=n[o]}catch{}return s};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=r,this.hook("reading",r),e}defineClass(){return this.mapToClass(function(e){vt(this,e)})}add(e,r){const{auto:n,keyPath:s}=this.schema.primKey;let o=e;return s&&n&&(o=Ps(s)(e)),this._trans("readwrite",a=>this.core.mutate({trans:a,type:"add",keys:r!=null?[r]:null,values:[o]})).then(a=>a.numFailures?se.reject(a.failures[0]):a.lastResult).then(a=>{if(s)try{Lt(e,s,a)}catch{}return a})}update(e,r){if(typeof e!="object"||dt(e))return this.where(":id").equals(e).modify(r);{const n=lr(e,this.schema.primKey.keyPath);if(n===void 0)return Ye(new ve.InvalidArgument("Given object does not contain its primary key"));try{typeof r!="function"?Ne(r).forEach(s=>{Lt(e,s,r[s])}):r(e,{value:e,primKey:n})}catch{}return this.where(":id").equals(n).modify(r)}}put(e,r){const{auto:n,keyPath:s}=this.schema.primKey;let o=e;return s&&n&&(o=Ps(s)(e)),this._trans("readwrite",a=>this.core.mutate({trans:a,type:"put",values:[o],keys:r!=null?[r]:null})).then(a=>a.numFailures?se.reject(a.failures[0]):a.lastResult).then(a=>{if(s)try{Lt(e,s,a)}catch{}return a})}delete(e){return this._trans("readwrite",r=>this.core.mutate({trans:r,type:"delete",keys:[e]})).then(r=>r.numFailures?se.reject(r.failures[0]):void 0)}clear(){return this._trans("readwrite",e=>this.core.mutate({trans:e,type:"deleteRange",range:pd})).then(e=>e.numFailures?se.reject(e.failures[0]):void 0)}bulkGet(e){return this._trans("readonly",r=>this.core.getMany({keys:e,trans:r}).then(n=>n.map(s=>this.hook.reading.fire(s))))}bulkAdd(e,r,n){const s=Array.isArray(r)?r:void 0,o=(n=n||(s?void 0:r))?n.allKeys:void 0;return this._trans("readwrite",a=>{const{auto:i,keyPath:l}=this.schema.primKey;if(l&&s)throw new ve.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(s&&s.length!==e.length)throw new ve.InvalidArgument("Arguments objects and keys must have the same length");const u=e.length;let c=l&&i?e.map(Ps(l)):e;return this.core.mutate({trans:a,type:"add",keys:s,values:c,wantResults:o}).then(({numFailures:d,results:f,lastResult:h,failures:m})=>{if(d===0)return o?f:h;throw new zn(`${this.name}.bulkAdd(): ${d} of ${u} operations failed`,m)})})}bulkPut(e,r,n){const s=Array.isArray(r)?r:void 0,o=(n=n||(s?void 0:r))?n.allKeys:void 0;return this._trans("readwrite",a=>{const{auto:i,keyPath:l}=this.schema.primKey;if(l&&s)throw new ve.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(s&&s.length!==e.length)throw new ve.InvalidArgument("Arguments objects and keys must have the same length");const u=e.length;let c=l&&i?e.map(Ps(l)):e;return this.core.mutate({trans:a,type:"put",keys:s,values:c,wantResults:o}).then(({numFailures:d,results:f,lastResult:h,failures:m})=>{if(d===0)return o?f:h;throw new zn(`${this.name}.bulkPut(): ${d} of ${u} operations failed`,m)})})}bulkDelete(e){const r=e.length;return this._trans("readwrite",n=>this.core.mutate({trans:n,type:"delete",keys:e})).then(({numFailures:n,lastResult:s,failures:o})=>{if(n===0)return s;throw new zn(`${this.name}.bulkDelete(): ${n} of ${r} operations failed`,o)})}}function Vn(t){var e={},r=function(a,i){if(i){for(var l=arguments.length,u=new Array(l-1);--l;)u[l-1]=arguments[l];return e[a].subscribe.apply(null,u),t}if(typeof a=="string")return e[a]};r.addEventType=o;for(var n=1,s=arguments.length;n<s;++n)o(arguments[n]);return r;function o(a,i,l){if(typeof a!="object"){var u;i||(i=kg),l||(l=$e);var c={subscribers:[],fire:l,subscribe:function(d){c.subscribers.indexOf(d)===-1&&(c.subscribers.push(d),c.fire=i(c.fire,d))},unsubscribe:function(d){c.subscribers=c.subscribers.filter(function(f){return f!==d}),c.fire=c.subscribers.reduce(i,l)}};return e[a]=r[a]=c,c}Ne(u=a).forEach(function(d){var f=u[d];if(dt(f))o(d,u[d][0],u[d][1]);else{if(f!=="asap")throw new ve.InvalidArgument("Invalid event config");var h=o(d,ns,function(){for(var m=arguments.length,y=new Array(m);m--;)y[m]=arguments[m];h.subscribers.forEach(function(v){Qu(function(){v.apply(null,y)})})})}})}}function Bn(t,e){return dn(e).from({prototype:t}),e}function rn(t,e){return!(t.filter||t.algorithm||t.or)&&(e?t.justLimit:!t.replayFilter)}function Yo(t,e){t.filter=Wr(t.filter,e)}function Qo(t,e,r){var n=t.replayFilter;t.replayFilter=n?()=>Wr(n(),e()):e,t.justLimit=r&&!n}function Ns(t,e){if(t.isPrimKey)return e.primaryKey;const r=e.getIndexByKeyPath(t.index);if(!r)throw new ve.Schema("KeyPath "+t.index+" on object store "+e.name+" is not indexed");return r}function m0(t,e,r){const n=Ns(t,e.schema);return e.openCursor({trans:r,values:!t.keysOnly,reverse:t.dir==="prev",unique:!!t.unique,query:{index:n,range:t.range}})}function Ts(t,e,r,n){const s=t.replayFilter?Wr(t.filter,t.replayFilter()):t.filter;if(t.or){const o={},a=(i,l,u)=>{if(!s||s(l,u,f=>l.stop(f),f=>l.fail(f))){var c=l.primaryKey,d=""+c;d==="[object ArrayBuffer]"&&(d=""+new Uint8Array(c)),At(o,d)||(o[d]=!0,e(i,l,u))}};return Promise.all([t.or._iterate(a,r),w0(m0(t,n,r),t.algorithm,a,!t.keysOnly&&t.valueMapper)])}return w0(m0(t,n,r),Wr(t.algorithm,s),e,!t.keysOnly&&t.valueMapper)}function w0(t,e,r,n){var s=Ge(n?(o,a,i)=>r(n(o),a,i):r);return t.then(o=>{if(o)return o.start(()=>{var a=()=>o.continue();e&&!e(o,i=>a=i,i=>{o.stop(i),a=$e},i=>{o.fail(i),a=$e})||s(o.value,o,i=>a=i),a()})})}function pt(t,e){try{const r=b0(t),n=b0(e);if(r!==n)return r==="Array"?1:n==="Array"?-1:r==="binary"?1:n==="binary"?-1:r==="string"?1:n==="string"?-1:r==="Date"?1:n!=="Date"?NaN:-1;switch(r){case"number":case"Date":case"string":return t>e?1:t<e?-1:0;case"binary":return function(s,o){const a=s.length,i=o.length,l=a<i?a:i;for(let u=0;u<l;++u)if(s[u]!==o[u])return s[u]<o[u]?-1:1;return a===i?0:a<i?-1:1}(_0(t),_0(e));case"Array":return function(s,o){const a=s.length,i=o.length,l=a<i?a:i;for(let u=0;u<l;++u){const c=pt(s[u],o[u]);if(c!==0)return c}return a===i?0:a<i?-1:1}(t,e)}}catch{}return NaN}function b0(t){const e=typeof t;if(e!=="object")return e;if(ArrayBuffer.isView(t))return"binary";const r=Za(t);return r==="ArrayBuffer"?"binary":r}function _0(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(t)}class Ig{_read(e,r){var n=this._ctx;return n.error?n.table._trans(null,Ye.bind(null,n.error)):n.table._trans("readonly",e).then(r)}_write(e){var r=this._ctx;return r.error?r.table._trans(null,Ye.bind(null,r.error)):r.table._trans("readwrite",e,"locked")}_addAlgorithm(e){var r=this._ctx;r.algorithm=Wr(r.algorithm,e)}_iterate(e,r){return Ts(this._ctx,e,r,this._ctx.table.core)}clone(e){var r=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return e&&vt(n,e),r._ctx=n,r}raw(){return this._ctx.valueMapper=null,this}each(e){var r=this._ctx;return this._read(n=>Ts(r,e,n,r.table.core))}count(e){return this._read(r=>{const n=this._ctx,s=n.table.core;if(rn(n,!0))return s.count({trans:r,query:{index:Ns(n,s.schema),range:n.range}}).then(a=>Math.min(a,n.limit));var o=0;return Ts(n,()=>(++o,!1),r,s).then(()=>o)}).then(e)}sortBy(e,r){const n=e.split(".").reverse(),s=n[0],o=n.length-1;function a(u,c){return c?a(u[n[c]],c-1):u[s]}var i=this._ctx.dir==="next"?1:-1;function l(u,c){var d=a(u,o),f=a(c,o);return d<f?-i:d>f?i:0}return this.toArray(function(u){return u.sort(l)}).then(r)}toArray(e){return this._read(r=>{var n=this._ctx;if(n.dir==="next"&&rn(n,!0)&&n.limit>0){const{valueMapper:s}=n,o=Ns(n,n.table.core.schema);return n.table.core.query({trans:r,limit:n.limit,values:!0,query:{index:o,range:n.range}}).then(({result:a})=>s?a.map(s):a)}{const s=[];return Ts(n,o=>s.push(o),r,n.table.core).then(()=>s)}},e)}offset(e){var r=this._ctx;return e<=0||(r.offset+=e,rn(r)?Qo(r,()=>{var n=e;return(s,o)=>n===0||(n===1?(--n,!1):(o(()=>{s.advance(n),n=0}),!1))}):Qo(r,()=>{var n=e;return()=>--n<0})),this}limit(e){return this._ctx.limit=Math.min(this._ctx.limit,e),Qo(this._ctx,()=>{var r=e;return function(n,s,o){return--r<=0&&s(o),r>=0}},!0),this}until(e,r){return Yo(this._ctx,function(n,s,o){return!e(n.value)||(s(o),r)}),this}first(e){return this.limit(1).toArray(function(r){return r[0]}).then(e)}last(e){return this.reverse().first(e)}filter(e){var r,n;return Yo(this._ctx,function(s){return e(s.value)}),r=this._ctx,n=e,r.isMatch=Wr(r.isMatch,n),this}and(e){return this.filter(e)}or(e){return new this.db.WhereClause(this._ctx.table,e,this)}reverse(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(e){var r=this._ctx;return r.keysOnly=!r.isMatch,this.each(function(n,s){e(s.key,s)})}eachUniqueKey(e){return this._ctx.unique="unique",this.eachKey(e)}eachPrimaryKey(e){var r=this._ctx;return r.keysOnly=!r.isMatch,this.each(function(n,s){e(s.primaryKey,s)})}keys(e){var r=this._ctx;r.keysOnly=!r.isMatch;var n=[];return this.each(function(s,o){n.push(o.key)}).then(function(){return n}).then(e)}primaryKeys(e){var r=this._ctx;if(r.dir==="next"&&rn(r,!0)&&r.limit>0)return this._read(s=>{var o=Ns(r,r.table.core.schema);return r.table.core.query({trans:s,values:!1,limit:r.limit,query:{index:o,range:r.range}})}).then(({result:s})=>s).then(e);r.keysOnly=!r.isMatch;var n=[];return this.each(function(s,o){n.push(o.primaryKey)}).then(function(){return n}).then(e)}uniqueKeys(e){return this._ctx.unique="unique",this.keys(e)}firstKey(e){return this.limit(1).keys(function(r){return r[0]}).then(e)}lastKey(e){return this.reverse().firstKey(e)}distinct(){var e=this._ctx,r=e.index&&e.table.schema.idxByName[e.index];if(!r||!r.multi)return this;var n={};return Yo(this._ctx,function(s){var o=s.primaryKey.toString(),a=At(n,o);return n[o]=!0,!a}),this}modify(e){var r=this._ctx;return this._write(n=>{var s;if(typeof e=="function")s=e;else{var o=Ne(e),a=o.length;s=function(y){for(var v=!1,p=0;p<a;++p){var x=o[p],w=e[x];lr(y,x)!==w&&(Lt(y,x,w),v=!0)}return v}}const i=r.table.core,{outbound:l,extractKey:u}=i.schema.primaryKey,c=this.db._options.modifyChunkSize||200,d=[];let f=0;const h=[],m=(y,v)=>{const{failures:p,numFailures:x}=v;f+=y-x;for(let w of Ne(p))d.push(p[w])};return this.clone().primaryKeys().then(y=>{const v=p=>{const x=Math.min(c,y.length-p);return i.getMany({trans:n,keys:y.slice(p,p+x),cache:"immutable"}).then(w=>{const b=[],E=[],k=l?[]:null,_=[];for(let S=0;S<x;++S){const A=w[S],F={value:vs(A),primKey:y[p+S]};s.call(F,F.value,F)!==!1&&(F.value==null?_.push(y[p+S]):l||pt(u(A),u(F.value))===0?(E.push(F.value),l&&k.push(y[p+S])):(_.push(y[p+S]),b.push(F.value)))}const C=rn(r)&&r.limit===1/0&&(typeof e!="function"||e===Xo)&&{index:r.index,range:r.range};return Promise.resolve(b.length>0&&i.mutate({trans:n,type:"add",values:b}).then(S=>{for(let A in S.failures)_.splice(parseInt(A),1);m(b.length,S)})).then(()=>(E.length>0||C&&typeof e=="object")&&i.mutate({trans:n,type:"put",keys:k,values:E,criteria:C,changeSpec:typeof e!="function"&&e}).then(S=>m(E.length,S))).then(()=>(_.length>0||C&&e===Xo)&&i.mutate({trans:n,type:"delete",keys:_,criteria:C}).then(S=>m(_.length,S))).then(()=>y.length>p+x&&v(p+c))})};return v(0).then(()=>{if(d.length>0)throw new oo("Error modifying one or more objects",d,f,h);return y.length})})})}delete(){var e=this._ctx,r=e.range;return rn(e)&&(e.isPrimKey&&!Tg||r.type===3)?this._write(n=>{const{primaryKey:s}=e.table.core.schema,o=r;return e.table.core.count({trans:n,query:{index:s,range:o}}).then(a=>e.table.core.mutate({trans:n,type:"deleteRange",range:o}).then(({failures:i,lastResult:l,results:u,numFailures:c})=>{if(c)throw new oo("Could not delete some values",Object.keys(i).map(d=>i[d]),a-c);return a-c}))}):this.modify(Xo)}}const Xo=(t,e)=>e.value=null;function $g(t,e){return t<e?-1:t===e?0:1}function Og(t,e){return t>e?-1:t===e?0:1}function wt(t,e,r){var n=t instanceof yd?new t.Collection(t):t;return n._ctx.error=r?new r(e):new TypeError(e),n}function nn(t){return new t.Collection(t,()=>vd("")).limit(0)}function Ug(t,e,r,n,s,o){for(var a=Math.min(t.length,n.length),i=-1,l=0;l<a;++l){var u=e[l];if(u!==n[l])return s(t[l],r[l])<0?t.substr(0,l)+r[l]+r.substr(l+1):s(t[l],n[l])<0?t.substr(0,l)+n[l]+r.substr(l+1):i>=0?t.substr(0,i)+e[i]+r.substr(i+1):null;s(t[l],u)<0&&(i=l)}return a<n.length&&o==="next"?t+r.substr(t.length):a<t.length&&o==="prev"?t.substr(0,r.length):i<0?null:t.substr(0,i)+n[i]+r.substr(i+1)}function Rs(t,e,r,n){var s,o,a,i,l,u,c,d=r.length;if(!r.every(y=>typeof y=="string"))return wt(t,xd);function f(y){s=function(p){return p==="next"?x=>x.toUpperCase():x=>x.toLowerCase()}(y),o=function(p){return p==="next"?x=>x.toLowerCase():x=>x.toUpperCase()}(y),a=y==="next"?$g:Og;var v=r.map(function(p){return{lower:o(p),upper:s(p)}}).sort(function(p,x){return a(p.lower,x.lower)});i=v.map(function(p){return p.upper}),l=v.map(function(p){return p.lower}),u=y,c=y==="next"?"":n}f("next");var h=new t.Collection(t,()=>mr(i[0],l[d-1]+n));h._ondirectionchange=function(y){f(y)};var m=0;return h._addAlgorithm(function(y,v,p){var x=y.key;if(typeof x!="string")return!1;var w=o(x);if(e(w,l,m))return!0;for(var b=null,E=m;E<d;++E){var k=Ug(x,w,i[E],l[E],a,u);k===null&&b===null?m=E+1:(b===null||a(b,k)>0)&&(b=k)}return v(b!==null?function(){y.continue(b+c)}:p),!1}),h}function mr(t,e,r,n){return{type:2,lower:t,upper:e,lowerOpen:r,upperOpen:n}}function vd(t){return{type:1,lower:t,upper:t}}class yd{get Collection(){return this._ctx.table.db.Collection}between(e,r,n,s){n=n!==!1,s=s===!0;try{return this._cmp(e,r)>0||this._cmp(e,r)===0&&(n||s)&&(!n||!s)?nn(this):new this.Collection(this,()=>mr(e,r,!n,!s))}catch{return wt(this,Xt)}}equals(e){return e==null?wt(this,Xt):new this.Collection(this,()=>vd(e))}above(e){return e==null?wt(this,Xt):new this.Collection(this,()=>mr(e,void 0,!0))}aboveOrEqual(e){return e==null?wt(this,Xt):new this.Collection(this,()=>mr(e,void 0,!1))}below(e){return e==null?wt(this,Xt):new this.Collection(this,()=>mr(void 0,e,!1,!0))}belowOrEqual(e){return e==null?wt(this,Xt):new this.Collection(this,()=>mr(void 0,e))}startsWith(e){return typeof e!="string"?wt(this,xd):this.between(e,e+Or,!0,!0)}startsWithIgnoreCase(e){return e===""?this.startsWith(e):Rs(this,(r,n)=>r.indexOf(n[0])===0,[e],Or)}equalsIgnoreCase(e){return Rs(this,(r,n)=>r===n[0],[e],"")}anyOfIgnoreCase(){var e=nr.apply(an,arguments);return e.length===0?nn(this):Rs(this,(r,n)=>n.indexOf(r)!==-1,e,"")}startsWithAnyOfIgnoreCase(){var e=nr.apply(an,arguments);return e.length===0?nn(this):Rs(this,(r,n)=>n.some(s=>r.indexOf(s)===0),e,Or)}anyOf(){const e=nr.apply(an,arguments);let r=this._cmp;try{e.sort(r)}catch{return wt(this,Xt)}if(e.length===0)return nn(this);const n=new this.Collection(this,()=>mr(e[0],e[e.length-1]));n._ondirectionchange=o=>{r=o==="next"?this._ascending:this._descending,e.sort(r)};let s=0;return n._addAlgorithm((o,a,i)=>{const l=o.key;for(;r(l,e[s])>0;)if(++s,s===e.length)return a(i),!1;return r(l,e[s])===0||(a(()=>{o.continue(e[s])}),!1)}),n}notEqual(e){return this.inAnyRange([[di,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){const e=nr.apply(an,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch{return wt(this,Xt)}const r=e.reduce((n,s)=>n?n.concat([[n[n.length-1][1],s]]):[[di,s]],null);return r.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(r,{includeLowers:!1,includeUppers:!1})}inAnyRange(e,r){const n=this._cmp,s=this._ascending,o=this._descending,a=this._min,i=this._max;if(e.length===0)return nn(this);if(!e.every(x=>x[0]!==void 0&&x[1]!==void 0&&s(x[0],x[1])<=0))return wt(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",ve.InvalidArgument);const l=!r||r.includeLowers!==!1,u=r&&r.includeUppers===!0;let c,d=s;function f(x,w){return d(x[0],w[0])}try{c=e.reduce(function(x,w){let b=0,E=x.length;for(;b<E;++b){const k=x[b];if(n(w[0],k[1])<0&&n(w[1],k[0])>0){k[0]=a(k[0],w[0]),k[1]=i(k[1],w[1]);break}}return b===E&&x.push(w),x},[]),c.sort(f)}catch{return wt(this,Xt)}let h=0;const m=u?x=>s(x,c[h][1])>0:x=>s(x,c[h][1])>=0,y=l?x=>o(x,c[h][0])>0:x=>o(x,c[h][0])>=0;let v=m;const p=new this.Collection(this,()=>mr(c[0][0],c[c.length-1][1],!l,!u));return p._ondirectionchange=x=>{x==="next"?(v=m,d=s):(v=y,d=o),c.sort(f)},p._addAlgorithm((x,w,b)=>{for(var E=x.key;v(E);)if(++h,h===c.length)return w(b),!1;return!!function(k){return!m(k)&&!y(k)}(E)||(this._cmp(E,c[h][1])===0||this._cmp(E,c[h][0])===0||w(()=>{d===s?x.continue(c[h][0]):x.continue(c[h][1])}),!1)}),p}startsWithAnyOf(){const e=nr.apply(an,arguments);return e.every(r=>typeof r=="string")?e.length===0?nn(this):this.inAnyRange(e.map(r=>[r,r+Or])):wt(this,"startsWithAnyOf() only works with strings")}}function zt(t){return Ge(function(e){return os(e),t(e.target.error),!1})}function os(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()}const as="storagemutated",kr="x-storagemutated-1",Sr=Vn(null,as);class Lg{_lock(){return Fn(!de.global),++this._reculock,this._reculock!==1||de.global||(de.lockOwnerFor=this),this}_unlock(){if(Fn(!de.global),--this._reculock==0)for(de.global||(de.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{_n(e[1],e[0])}catch{}}return this}_locked(){return this._reculock&&de.lockOwnerFor!==this}create(e){if(!this.mode)return this;const r=this.db.idbdb,n=this.db._state.dbOpenError;if(Fn(!this.idbtrans),!e&&!r)switch(n&&n.name){case"DatabaseClosedError":throw new ve.DatabaseClosed(n);case"MissingAPIError":throw new ve.MissingAPI(n.message,n);default:throw new ve.OpenFailed(n)}if(!this.active)throw new ve.TransactionInactive;return Fn(this._completion._state===null),(e=this.idbtrans=e||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):r.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=Ge(s=>{os(s),this._reject(e.error)}),e.onabort=Ge(s=>{os(s),this.active&&this._reject(new ve.Abort(e.error)),this.active=!1,this.on("abort").fire(s)}),e.oncomplete=Ge(()=>{this.active=!1,this._resolve(),"mutatedParts"in e&&Sr.storagemutated.fire(e.mutatedParts)}),this}_promise(e,r,n){if(e==="readwrite"&&this.mode!=="readwrite")return Ye(new ve.ReadOnly("Transaction is readonly"));if(!this.active)return Ye(new ve.TransactionInactive);if(this._locked())return new se((o,a)=>{this._blockedFuncs.push([()=>{this._promise(e,r,n).then(o,a)},de])});if(n)return Ar(()=>{var o=new se((a,i)=>{this._lock();const l=r(a,i,this);l&&l.then&&l.then(a,i)});return o.finally(()=>this._unlock()),o._lib=!0,o});var s=new se((o,a)=>{var i=r(o,a,this);i&&i.then&&i.then(o,a)});return s._lib=!0,s}_root(){return this.parent?this.parent._root():this}waitFor(e){var r=this._root();const n=se.resolve(e);if(r._waitingFor)r._waitingFor=r._waitingFor.then(()=>n);else{r._waitingFor=n,r._waitingQueue=[];var s=r.idbtrans.objectStore(r.storeNames[0]);(function a(){for(++r._spinCount;r._waitingQueue.length;)r._waitingQueue.shift()();r._waitingFor&&(s.get(-1/0).onsuccess=a)})()}var o=r._waitingFor;return new se((a,i)=>{n.then(l=>r._waitingQueue.push(Ge(a.bind(null,l))),l=>r._waitingQueue.push(Ge(i.bind(null,l)))).finally(()=>{r._waitingFor===o&&(r._waitingFor=null)})})}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new ve.Abort))}table(e){const r=this._memoizedTables||(this._memoizedTables={});if(At(r,e))return r[e];const n=this.schema[e];if(!n)throw new ve.NotFound("Table "+e+" not part of transaction");const s=new this.db.Table(e,n,this);return s.core=this.db.core.table(e),r[e]=s,s}}function fi(t,e,r,n,s,o,a){return{name:t,keyPath:e,unique:r,multi:n,auto:s,compound:o,src:(r&&!a?"&":"")+(n?"*":"")+(s?"++":"")+md(e)}}function md(t){return typeof t=="string"?t:t?"["+[].join.call(t,"+")+"]":""}function wd(t,e,r){return{name:t,primKey:e,indexes:r,mappedClass:null,idxByName:Xu(r,n=>[n.name,n])}}let is=t=>{try{return t.only([[]]),is=()=>[[]],[[]]}catch{return is=()=>Or,Or}};function hi(t){return t==null?()=>{}:typeof t=="string"?function(e){return e.split(".").length===1?n=>n[e]:n=>lr(n,e)}(t):e=>lr(e,t)}function E0(t){return[].slice.call(t)}let Hg=0;function qn(t){return t==null?":id":typeof t=="string"?t:`[${t.join("+")}]`}function Mg(t,e,r){function n(l){if(l.type===3)return null;if(l.type===4)throw new Error("Cannot convert never type to IDBKeyRange");const{lower:u,upper:c,lowerOpen:d,upperOpen:f}=l;return u===void 0?c===void 0?null:e.upperBound(c,!!f):c===void 0?e.lowerBound(u,!!d):e.bound(u,c,!!d,!!f)}const{schema:s,hasGetAll:o}=function(l,u){const c=E0(l.objectStoreNames);return{schema:{name:l.name,tables:c.map(d=>u.objectStore(d)).map(d=>{const{keyPath:f,autoIncrement:h}=d,m=dt(f),y=f==null,v={},p={name:d.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:y,compound:m,keyPath:f,autoIncrement:h,unique:!0,extractKey:hi(f)},indexes:E0(d.indexNames).map(x=>d.index(x)).map(x=>{const{name:w,unique:b,multiEntry:E,keyPath:k}=x,_={name:w,compound:dt(k),keyPath:k,unique:b,multiEntry:E,extractKey:hi(k)};return v[qn(k)]=_,_}),getIndexByKeyPath:x=>v[qn(x)]};return v[":id"]=p.primaryKey,f!=null&&(v[qn(f)]=p.primaryKey),p})},hasGetAll:c.length>0&&"getAll"in u.objectStore(c[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(t,r),a=s.tables.map(l=>function(u){const c=u.name;return{name:c,schema:u,mutate:function({trans:d,type:f,keys:h,values:m,range:y}){return new Promise((v,p)=>{v=Ge(v);const x=d.objectStore(c),w=x.keyPath==null,b=f==="put"||f==="add";if(!b&&f!=="delete"&&f!=="deleteRange")throw new Error("Invalid operation type: "+f);const{length:E}=h||m||{length:1};if(h&&m&&h.length!==m.length)throw new Error("Given keys array must have same length as given values array.");if(E===0)return v({numFailures:0,failures:{},results:[],lastResult:void 0});let k;const _=[],C=[];let S=0;const A=P=>{++S,os(P)};if(f==="deleteRange"){if(y.type===4)return v({numFailures:S,failures:C,results:[],lastResult:void 0});y.type===3?_.push(k=x.clear()):_.push(k=x.delete(n(y)))}else{const[P,T]=b?w?[m,h]:[m,null]:[h,null];if(b)for(let I=0;I<E;++I)_.push(k=T&&T[I]!==void 0?x[f](P[I],T[I]):x[f](P[I])),k.onerror=A;else for(let I=0;I<E;++I)_.push(k=x[f](P[I])),k.onerror=A}const F=P=>{const T=P.target.result;_.forEach((I,K)=>I.error!=null&&(C[K]=I.error)),v({numFailures:S,failures:C,results:f==="delete"?h:_.map(I=>I.result),lastResult:T})};k.onerror=P=>{A(P),F(P)},k.onsuccess=F})},getMany:({trans:d,keys:f})=>new Promise((h,m)=>{h=Ge(h);const y=d.objectStore(c),v=f.length,p=new Array(v);let x,w=0,b=0;const E=_=>{const C=_.target;p[C._pos]=C.result,++b===w&&h(p)},k=zt(m);for(let _=0;_<v;++_)f[_]!=null&&(x=y.get(f[_]),x._pos=_,x.onsuccess=E,x.onerror=k,++w);w===0&&h(p)}),get:({trans:d,key:f})=>new Promise((h,m)=>{h=Ge(h);const y=d.objectStore(c).get(f);y.onsuccess=v=>h(v.target.result),y.onerror=zt(m)}),query:function(d){return f=>new Promise((h,m)=>{h=Ge(h);const{trans:y,values:v,limit:p,query:x}=f,w=p===1/0?void 0:p,{index:b,range:E}=x,k=y.objectStore(c),_=b.isPrimaryKey?k:k.index(b.name),C=n(E);if(p===0)return h({result:[]});if(d){const S=v?_.getAll(C,w):_.getAllKeys(C,w);S.onsuccess=A=>h({result:A.target.result}),S.onerror=zt(m)}else{let S=0;const A=v||!("openKeyCursor"in _)?_.openCursor(C):_.openKeyCursor(C),F=[];A.onsuccess=P=>{const T=A.result;return T?(F.push(v?T.value:T.primaryKey),++S===p?h({result:F}):void T.continue()):h({result:F})},A.onerror=zt(m)}})}(o),openCursor:function({trans:d,values:f,query:h,reverse:m,unique:y}){return new Promise((v,p)=>{v=Ge(v);const{index:x,range:w}=h,b=d.objectStore(c),E=x.isPrimaryKey?b:b.index(x.name),k=m?y?"prevunique":"prev":y?"nextunique":"next",_=f||!("openKeyCursor"in E)?E.openCursor(n(w),k):E.openKeyCursor(n(w),k);_.onerror=zt(p),_.onsuccess=Ge(C=>{const S=_.result;if(!S)return void v(null);S.___id=++Hg,S.done=!1;const A=S.continue.bind(S);let F=S.continuePrimaryKey;F&&(F=F.bind(S));const P=S.advance.bind(S),T=()=>{throw new Error("Cursor not stopped")};S.trans=d,S.stop=S.continue=S.continuePrimaryKey=S.advance=()=>{throw new Error("Cursor not started")},S.fail=Ge(p),S.next=function(){let I=1;return this.start(()=>I--?this.continue():this.stop()).then(()=>this)},S.start=I=>{const K=new Promise((Y,te)=>{Y=Ge(Y),_.onerror=zt(te),S.fail=te,S.stop=xe=>{S.stop=S.continue=S.continuePrimaryKey=S.advance=T,Y(xe)}}),j=()=>{if(_.result)try{I()}catch(Y){S.fail(Y)}else S.done=!0,S.start=()=>{throw new Error("Cursor behind last entry")},S.stop()};return _.onsuccess=Ge(Y=>{_.onsuccess=j,j()}),S.continue=A,S.continuePrimaryKey=F,S.advance=P,j(),K},v(S)},p)})},count({query:d,trans:f}){const{index:h,range:m}=d;return new Promise((y,v)=>{const p=f.objectStore(c),x=h.isPrimaryKey?p:p.index(h.name),w=n(m),b=w?x.count(w):x.count();b.onsuccess=Ge(E=>y(E.target.result)),b.onerror=zt(v)})}}}(l)),i={};return a.forEach(l=>i[l.name]=l),{stack:"dbcore",transaction:t.transaction.bind(t),table(l){if(!i[l])throw new Error(`Table '${l}' not found`);return i[l]},MIN_KEY:-1/0,MAX_KEY:is(e),schema:s}}function xi({_novip:t},e){const r=e.db,n=function(s,o,{IDBKeyRange:a,indexedDB:i},l){return{dbcore:function(c,d){return d.reduce((f,{create:h})=>({...f,...h(f)}),c)}(Mg(o,a,l),s.dbcore)}}(t._middlewares,r,t._deps,e);t.core=n.dbcore,t.tables.forEach(s=>{const o=s.name;t.core.schema.tables.some(a=>a.name===o)&&(s.core=t.core.table(o),t[o]instanceof t.Table&&(t[o].core=s.core))})}function uo({_novip:t},e,r,n){r.forEach(s=>{const o=n[s];e.forEach(a=>{const i=Yi(a,s);(!i||"value"in i&&i.value===void 0)&&(a===t.Transaction.prototype||a instanceof t.Transaction?ir(a,s,{get(){return this.table(s)},set(l){Wu(this,s,{value:l,writable:!0,configurable:!0,enumerable:!0})}}):a[s]=new t.Table(s,o))})})}function gi({_novip:t},e){e.forEach(r=>{for(let n in r)r[n]instanceof t.Table&&delete r[n]})}function Gg(t,e){return t._cfg.version-e._cfg.version}function jg(t,e,r,n){const s=t._dbSchema,o=t._createTransaction("readwrite",t._storeNames,s);o.create(r),o._completion.catch(n);const a=o._reject.bind(o),i=de.transless||de;Ar(()=>{de.trans=o,de.transless=i,e===0?(Ne(s).forEach(l=>{Jo(r,l,s[l].primKey,s[l].indexes)}),xi(t,r),se.follow(()=>t.on.populate.fire(o)).catch(a)):function({_novip:l},u,c,d){const f=[],h=l._versions;let m=l._dbSchema=vi(l,l.idbdb,d),y=!1;const v=h.filter(x=>x._cfg.version>=u);function p(){return f.length?se.resolve(f.shift()(c.idbtrans)).then(p):se.resolve()}return v.forEach(x=>{f.push(()=>{const w=m,b=x._cfg.dbschema;yi(l,w,d),yi(l,b,d),m=l._dbSchema=b;const E=bd(w,b);E.add.forEach(_=>{Jo(d,_[0],_[1].primKey,_[1].indexes)}),E.change.forEach(_=>{if(_.recreate)throw new ve.Upgrade("Not yet support for changing primary key");{const C=d.objectStore(_.name);_.add.forEach(S=>pi(C,S)),_.change.forEach(S=>{C.deleteIndex(S.name),pi(C,S)}),_.del.forEach(S=>C.deleteIndex(S))}});const k=x._cfg.contentUpgrade;if(k&&x._cfg.version>u){xi(l,d),c._memoizedTables={},y=!0;let _=Ju(b);E.del.forEach(F=>{_[F]=w[F]}),gi(l,[l.Transaction.prototype]),uo(l,[l.Transaction.prototype],Ne(_),_),c.schema=_;const C=Qi(k);let S;C&&bn();const A=se.follow(()=>{if(S=k(c),S&&C){var F=hr.bind(null,null);S.then(F,F)}});return S&&typeof S.then=="function"?se.resolve(S):A.then(()=>S)}}),f.push(w=>{(!y||!Pg)&&function(b,E){[].slice.call(E.db.objectStoreNames).forEach(k=>b[k]==null&&E.db.deleteObjectStore(k))}(x._cfg.dbschema,w),gi(l,[l.Transaction.prototype]),uo(l,[l.Transaction.prototype],l._storeNames,l._dbSchema),c.schema=l._dbSchema})}),p().then(()=>{var x,w;w=d,Ne(x=m).forEach(b=>{w.db.objectStoreNames.contains(b)||Jo(w,b,x[b].primKey,x[b].indexes)})})}(t,e,o,r).catch(a)})}function bd(t,e){const r={del:[],add:[],change:[]};let n;for(n in t)e[n]||r.del.push(n);for(n in e){const s=t[n],o=e[n];if(s){const a={name:n,def:o,recreate:!1,del:[],add:[],change:[]};if(""+(s.primKey.keyPath||"")!=""+(o.primKey.keyPath||"")||s.primKey.auto!==o.primKey.auto&&!Po)a.recreate=!0,r.change.push(a);else{const i=s.idxByName,l=o.idxByName;let u;for(u in i)l[u]||a.del.push(u);for(u in l){const c=i[u],d=l[u];c?c.src!==d.src&&a.change.push(d):a.add.push(d)}(a.del.length>0||a.add.length>0||a.change.length>0)&&r.change.push(a)}}else r.add.push([n,o])}return r}function Jo(t,e,r,n){const s=t.db.createObjectStore(e,r.keyPath?{keyPath:r.keyPath,autoIncrement:r.auto}:{autoIncrement:r.auto});return n.forEach(o=>pi(s,o)),s}function pi(t,e){t.createIndex(e.name,e.keyPath,{unique:e.unique,multiEntry:e.multi})}function vi(t,e,r){const n={};return so(e.objectStoreNames,0).forEach(s=>{const o=r.objectStore(s);let a=o.keyPath;const i=fi(md(a),a||"",!1,!1,!!o.autoIncrement,a&&typeof a!="string",!0),l=[];for(let c=0;c<o.indexNames.length;++c){const d=o.index(o.indexNames[c]);a=d.keyPath;var u=fi(d.name,a,!!d.unique,!!d.multiEntry,!1,a&&typeof a!="string",!1);l.push(u)}n[s]=wd(s,i,l)}),n}function yi({_novip:t},e,r){const n=r.db.objectStoreNames;for(let s=0;s<n.length;++s){const o=n[s],a=r.objectStore(o);t._hasGetAll="getAll"in a;for(let i=0;i<a.indexNames.length;++i){const l=a.indexNames[i],u=a.index(l).keyPath,c=typeof u=="string"?u:"["+so(u).join("+")+"]";if(e[o]){const d=e[o].idxByName[c];d&&(d.name=l,delete e[o].idxByName[c],e[o].idxByName[l]=d)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&Me.WorkerGlobalScope&&Me instanceof Me.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(t._hasGetAll=!1)}class zg{_parseStoresSpec(e,r){Ne(e).forEach(n=>{if(e[n]!==null){var s=e[n].split(",").map((a,i)=>{const l=(a=a.trim()).replace(/([&*]|\+\+)/g,""),u=/^\[/.test(l)?l.match(/^\[(.*)\]$/)[1].split("+"):l;return fi(l,u||null,/\&/.test(a),/\*/.test(a),/\+\+/.test(a),dt(u),i===0)}),o=s.shift();if(o.multi)throw new ve.Schema("Primary key cannot be multi-valued");s.forEach(a=>{if(a.auto)throw new ve.Schema("Only primary key can be marked as autoIncrement (++)");if(!a.keyPath)throw new ve.Schema("Index must have a name and cannot be an empty string")}),r[n]=wd(n,o,s)}})}stores(e){const r=this.db;this._cfg.storesSource=this._cfg.storesSource?vt(this._cfg.storesSource,e):e;const n=r._versions,s={};let o={};return n.forEach(a=>{vt(s,a._cfg.storesSource),o=a._cfg.dbschema={},a._parseStoresSpec(s,o)}),r._dbSchema=o,gi(r,[r._allTables,r,r.Transaction.prototype]),uo(r,[r._allTables,r,r.Transaction.prototype,this._cfg.tables],Ne(o),o),r._storeNames=Ne(o),this}upgrade(e){return this._cfg.contentUpgrade=Zi(this._cfg.contentUpgrade||$e,e),this}}function nl(t,e){let r=t._dbNamesDB;return r||(r=t._dbNamesDB=new jr(To,{addons:[],indexedDB:t,IDBKeyRange:e}),r.version(1).stores({dbnames:"name"})),r.table("dbnames")}function sl(t){return t&&typeof t.databases=="function"}function mi(t){return Ar(function(){return de.letThrough=!0,t()})}function Ng(){var t;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(e){var r=function(){return indexedDB.databases().finally(e)};t=setInterval(r,100),r()}).finally(function(){return clearInterval(t)}):Promise.resolve()}function Kg(t){const e=t._state,{indexedDB:r}=t._deps;if(e.isBeingOpened||t.idbdb)return e.dbReadyPromise.then(()=>e.dbOpenError?Ye(e.dbOpenError):t);Wt&&(e.openCanceller._stackHolder=Xr()),e.isBeingOpened=!0,e.dbOpenError=null,e.openComplete=!1;const n=e.openCanceller;function s(){if(e.openCanceller!==n)throw new ve.DatabaseClosed("db.open() was cancelled")}let o=e.dbReadyResolve,a=null,i=!1;const l=()=>new se((u,c)=>{if(s(),!r)throw new ve.MissingAPI;const d=t.name,f=e.autoSchema?r.open(d):r.open(d,Math.round(10*t.verno));if(!f)throw new ve.MissingAPI;f.onerror=zt(c),f.onblocked=Ge(t._fireOnBlocked),f.onupgradeneeded=Ge(h=>{if(a=f.transaction,e.autoSchema&&!t._options.allowEmptyDB){f.onerror=os,a.abort(),f.result.close();const y=r.deleteDatabase(d);y.onsuccess=y.onerror=Ge(()=>{c(new ve.NoSuchDatabase(`Database ${d} doesnt exist`))})}else{a.onerror=zt(c);var m=h.oldVersion>Math.pow(2,62)?0:h.oldVersion;i=m<1,t._novip.idbdb=f.result,jg(t,m/10,a,c)}},c),f.onsuccess=Ge(()=>{a=null;const h=t._novip.idbdb=f.result,m=so(h.objectStoreNames);if(m.length>0)try{const v=h.transaction((y=m).length===1?y[0]:y,"readonly");e.autoSchema?function({_novip:p},x,w){p.verno=x.version/10;const b=p._dbSchema=vi(0,x,w);p._storeNames=so(x.objectStoreNames,0),uo(p,[p._allTables],Ne(b),b)}(t,h,v):(yi(t,t._dbSchema,v),function(p,x){const w=bd(vi(0,p.idbdb,x),p._dbSchema);return!(w.add.length||w.change.some(b=>b.add.length||b.change.length))}(t,v)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),xi(t,v)}catch{}var y;Kn.push(t),h.onversionchange=Ge(v=>{e.vcFired=!0,t.on("versionchange").fire(v)}),h.onclose=Ge(v=>{t.on("close").fire(v)}),i&&function({indexedDB:v,IDBKeyRange:p},x){!sl(v)&&x!==To&&nl(v,p).put({name:x}).catch($e)}(t._deps,d),u()},c)}).catch(u=>u&&u.name==="UnknownError"&&e.PR1398_maxLoop>0?(e.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),l()):se.reject(u));return se.race([n,(typeof navigator>"u"?se.resolve():Ng()).then(l)]).then(()=>(s(),e.onReadyBeingFired=[],se.resolve(mi(()=>t.on.ready.fire(t.vip))).then(function u(){if(e.onReadyBeingFired.length>0){let c=e.onReadyBeingFired.reduce(Zi,$e);return e.onReadyBeingFired=[],se.resolve(mi(()=>c(t.vip))).then(u)}}))).finally(()=>{e.onReadyBeingFired=null,e.isBeingOpened=!1}).then(()=>t).catch(u=>{e.dbOpenError=u;try{a&&a.abort()}catch{}return n===e.openCanceller&&t._close(),Ye(u)}).finally(()=>{e.openComplete=!0,o()})}function wi(t){var e=o=>t.next(o),r=s(e),n=s(o=>t.throw(o));function s(o){return a=>{var i=o(a),l=i.value;return i.done?l:l&&typeof l.then=="function"?l.then(r,n):dt(l)?Promise.all(l).then(r,n):r(l)}}return s(e)()}function Vg(t,e,r){var n=arguments.length;if(n<2)throw new ve.InvalidArgument("Too few arguments");for(var s=new Array(n-1);--n;)s[n-1]=arguments[n];return r=s.pop(),[t,Zu(s),r]}function _d(t,e,r,n,s){return se.resolve().then(()=>{const o=de.transless||de,a=t._createTransaction(e,r,t._dbSchema,n),i={trans:a,transless:o};if(n)a.idbtrans=n.idbtrans;else try{a.create(),t._state.PR1398_maxLoop=3}catch(d){return d.name===Ji.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t._close(),t.open().then(()=>_d(t,e,r,null,s))):Ye(d)}const l=Qi(s);let u;l&&bn();const c=se.follow(()=>{if(u=s.call(a,a),u)if(l){var d=hr.bind(null,null);u.then(d,d)}else typeof u.next=="function"&&typeof u.throw=="function"&&(u=wi(u))},i);return(u&&typeof u.then=="function"?se.resolve(u).then(d=>a.active?d:Ye(new ve.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))):c.then(()=>u)).then(d=>(n&&a._resolve(),a._completion.then(()=>d))).catch(d=>(a._reject(d),Ye(d)))})}function Is(t,e,r){const n=dt(t)?t.slice():[t];for(let s=0;s<r;++s)n.push(e);return n}const qg={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(t){return{...t,table(e){const r=t.table(e),{schema:n}=r,s={},o=[];function a(c,d,f){const h=qn(c),m=s[h]=s[h]||[],y=c==null?0:typeof c=="string"?1:c.length,v=d>0,p={...f,isVirtual:v,keyTail:d,keyLength:y,extractKey:hi(c),unique:!v&&f.unique};return m.push(p),p.isPrimaryKey||o.push(p),y>1&&a(y===2?c[0]:c.slice(0,y-1),d+1,f),m.sort((x,w)=>x.keyTail-w.keyTail),p}const i=a(n.primaryKey.keyPath,0,n.primaryKey);s[":id"]=[i];for(const c of n.indexes)a(c.keyPath,0,c);function l(c){const d=c.query.index;return d.isVirtual?{...c,query:{index:d,range:(f=c.query.range,h=d.keyTail,{type:f.type===1?2:f.type,lower:Is(f.lower,f.lowerOpen?t.MAX_KEY:t.MIN_KEY,h),lowerOpen:!0,upper:Is(f.upper,f.upperOpen?t.MIN_KEY:t.MAX_KEY,h),upperOpen:!0})}}:c;var f,h}return{...r,schema:{...n,primaryKey:i,indexes:o,getIndexByKeyPath:function(c){const d=s[qn(c)];return d&&d[0]}},count:c=>r.count(l(c)),query:c=>r.query(l(c)),openCursor(c){const{keyTail:d,isVirtual:f,keyLength:h}=c.query.index;return f?r.openCursor(l(c)).then(m=>m&&function(y){return Object.create(y,{continue:{value:function(p){p!=null?y.continue(Is(p,c.reverse?t.MAX_KEY:t.MIN_KEY,d)):c.unique?y.continue(y.key.slice(0,h).concat(c.reverse?t.MIN_KEY:t.MAX_KEY,d)):y.continue()}},continuePrimaryKey:{value(p,x){y.continuePrimaryKey(Is(p,t.MAX_KEY,d),x)}},primaryKey:{get:()=>y.primaryKey},key:{get(){const p=y.key;return h===1?p[0]:p.slice(0,h)}},value:{get:()=>y.value}})}(m)):r.openCursor(c)}}}}}};function ol(t,e,r,n){return r=r||{},n=n||"",Ne(t).forEach(s=>{if(At(e,s)){var o=t[s],a=e[s];if(typeof o=="object"&&typeof a=="object"&&o&&a){const i=Za(o);i!==Za(a)?r[n+s]=e[s]:i==="Object"?ol(o,a,r,n+s+"."):o!==a&&(r[n+s]=e[s])}else o!==a&&(r[n+s]=e[s])}else r[n+s]=void 0}),Ne(e).forEach(s=>{At(t,s)||(r[n+s]=e[s])}),r}const Wg={stack:"dbcore",name:"HooksMiddleware",level:2,create:t=>({...t,table(e){const r=t.table(e),{primaryKey:n}=r.schema;return{...r,mutate(o){const a=de.trans,{deleting:i,creating:l,updating:u}=a.table(e).hook;switch(o.type){case"add":if(l.fire===$e)break;return a._promise("readwrite",()=>c(o),!0);case"put":if(l.fire===$e&&u.fire===$e)break;return a._promise("readwrite",()=>c(o),!0);case"delete":if(i.fire===$e)break;return a._promise("readwrite",()=>c(o),!0);case"deleteRange":if(i.fire===$e)break;return a._promise("readwrite",()=>function(f){return d(f.trans,f.range,1e4)}(o),!0)}return r.mutate(o);function c(f){const h=de.trans,m=f.keys||function(y,v){return v.type==="delete"?v.keys:v.keys||v.values.map(y.extractKey)}(n,f);if(!m)throw new Error("Keys missing");return(f=f.type==="add"||f.type==="put"?{...f,keys:m}:{...f}).type!=="delete"&&(f.values=[...f.values]),f.keys&&(f.keys=[...f.keys]),function(y,v,p){return v.type==="add"?Promise.resolve([]):y.getMany({trans:v.trans,keys:p,cache:"immutable"})}(r,f,m).then(y=>{const v=m.map((p,x)=>{const w=y[x],b={onerror:null,onsuccess:null};if(f.type==="delete")i.fire.call(b,p,w,h);else if(f.type==="add"||w===void 0){const E=l.fire.call(b,p,f.values[x],h);p==null&&E!=null&&(p=E,f.keys[x]=p,n.outbound||Lt(f.values[x],n.keyPath,p))}else{const E=ol(w,f.values[x]),k=u.fire.call(b,E,p,w,h);if(k){const _=f.values[x];Object.keys(k).forEach(C=>{At(_,C)?_[C]=k[C]:Lt(_,C,k[C])})}}return b});return r.mutate(f).then(({failures:p,results:x,numFailures:w,lastResult:b})=>{for(let E=0;E<m.length;++E){const k=x?x[E]:m[E],_=v[E];k==null?_.onerror&&_.onerror(p[E]):_.onsuccess&&_.onsuccess(f.type==="put"&&y[E]?f.values[E]:k)}return{failures:p,results:x,numFailures:w,lastResult:b}}).catch(p=>(v.forEach(x=>x.onerror&&x.onerror(p)),Promise.reject(p)))})}function d(f,h,m){return r.query({trans:f,values:!1,query:{index:n,range:h},limit:m}).then(({result:y})=>c({type:"delete",keys:y,trans:f}).then(v=>v.numFailures>0?Promise.reject(v.failures[0]):y.length<m?{failures:[],numFailures:0,lastResult:void 0}:d(f,{...h,lower:y[y.length-1],lowerOpen:!0},m)))}}}}})};function Ed(t,e,r){try{if(!e||e.keys.length<t.length)return null;const n=[];for(let s=0,o=0;s<e.keys.length&&o<t.length;++s)pt(e.keys[s],t[o])===0&&(n.push(r?vs(e.values[s]):e.values[s]),++o);return n.length===t.length?n:null}catch{return null}}const Yg={stack:"dbcore",level:-1,create:t=>({table:e=>{const r=t.table(e);return{...r,getMany:n=>{if(!n.cache)return r.getMany(n);const s=Ed(n.keys,n.trans._cache,n.cache==="clone");return s?se.resolve(s):r.getMany(n).then(o=>(n.trans._cache={keys:n.keys,values:n.cache==="clone"?vs(o):o},o))},mutate:n=>(n.type!=="add"&&(n.trans._cache=null),r.mutate(n))}}})};function al(t){return!("from"in t)}const Zt=function(t,e){if(!this){const r=new Zt;return t&&"d"in t&&vt(r,t),r}vt(this,arguments.length?{d:1,from:t,to:arguments.length>1?e:t}:{d:0})};function ls(t,e,r){const n=pt(e,r);if(isNaN(n))return;if(n>0)throw RangeError();if(al(t))return vt(t,{from:e,to:r,d:1});const s=t.l,o=t.r;if(pt(r,t.from)<0)return s?ls(s,e,r):t.l={from:e,to:r,d:1,l:null,r:null},k0(t);if(pt(e,t.to)>0)return o?ls(o,e,r):t.r={from:e,to:r,d:1,l:null,r:null},k0(t);pt(e,t.from)<0&&(t.from=e,t.l=null,t.d=o?o.d+1:1),pt(r,t.to)>0&&(t.to=r,t.r=null,t.d=t.l?t.l.d+1:1);const a=!t.r;s&&!t.l&&fo(t,s),o&&a&&fo(t,o)}function fo(t,e){al(e)||function r(n,{from:s,to:o,l:a,r:i}){ls(n,s,o),a&&r(n,a),i&&r(n,i)}(t,e)}function Qg(t,e){const r=bi(e);let n=r.next();if(n.done)return!1;let s=n.value;const o=bi(t);let a=o.next(s.from),i=a.value;for(;!n.done&&!a.done;){if(pt(i.from,s.to)<=0&&pt(i.to,s.from)>=0)return!0;pt(s.from,i.from)<0?s=(n=r.next(i.from)).value:i=(a=o.next(s.from)).value}return!1}function bi(t){let e=al(t)?null:{s:0,n:t};return{next(r){const n=arguments.length>0;for(;e;)switch(e.s){case 0:if(e.s=1,n)for(;e.n.l&&pt(r,e.n.from)<0;)e={up:e,n:e.n.l,s:1};else for(;e.n.l;)e={up:e,n:e.n.l,s:1};case 1:if(e.s=2,!n||pt(r,e.n.to)<=0)return{value:e.n,done:!1};case 2:if(e.n.r){e.s=3,e={up:e,n:e.n.r,s:0};continue}case 3:e=e.up}return{done:!0}}}}function k0(t){var e,r;const n=(((e=t.r)===null||e===void 0?void 0:e.d)||0)-(((r=t.l)===null||r===void 0?void 0:r.d)||0),s=n>1?"r":n<-1?"l":"";if(s){const o=s==="r"?"l":"r",a={...t},i=t[s];t.from=i.from,t.to=i.to,t[s]=i[s],a[s]=i[o],t[o]=a,a.d=C0(a)}t.d=C0(t)}function C0({r:t,l:e}){return(t?e?Math.max(t.d,e.d):t.d:e?e.d:0)+1}yn(Zt.prototype,{add(t){return fo(this,t),this},addKey(t){return ls(this,t,t),this},addKeys(t){return t.forEach(e=>ls(this,e,e)),this},[ei](){return bi(this)}});const Xg={stack:"dbcore",level:0,create:t=>{const e=t.schema.name,r=new Zt(t.MIN_KEY,t.MAX_KEY);return{...t,table:n=>{const s=t.table(n),{schema:o}=s,{primaryKey:a}=o,{extractKey:i,outbound:l}=a,u={...s,mutate:f=>{const h=f.trans,m=h.mutatedParts||(h.mutatedParts={}),y=k=>{const _=`idb://${e}/${n}/${k}`;return m[_]||(m[_]=new Zt)},v=y(""),p=y(":dels"),{type:x}=f;let[w,b]=f.type==="deleteRange"?[f.range]:f.type==="delete"?[f.keys]:f.values.length<50?[[],f.values]:[];const E=f.trans._cache;return s.mutate(f).then(k=>{if(dt(w)){x!=="delete"&&(w=k.results),v.addKeys(w);const _=Ed(w,E);_||x==="add"||p.addKeys(w),(_||b)&&function(C,S,A,F){function P(T){const I=C(T.name||"");function K(Y){return Y!=null?T.extractKey(Y):null}const j=Y=>T.multiEntry&&dt(Y)?Y.forEach(te=>I.addKey(te)):I.addKey(Y);(A||F).forEach((Y,te)=>{const xe=A&&K(A[te]),fe=F&&K(F[te]);pt(xe,fe)!==0&&(xe!=null&&j(xe),fe!=null&&j(fe))})}S.indexes.forEach(P)}(y,o,_,b)}else if(w){const _={from:w.lower,to:w.upper};p.add(_),v.add(_)}else v.add(r),p.add(r),o.indexes.forEach(_=>y(_.name).add(r));return k})}},c=({query:{index:f,range:h}})=>{var m,y;return[f,new Zt((m=h.lower)!==null&&m!==void 0?m:t.MIN_KEY,(y=h.upper)!==null&&y!==void 0?y:t.MAX_KEY)]},d={get:f=>[a,new Zt(f.key)],getMany:f=>[a,new Zt().addKeys(f.keys)],count:c,query:c,openCursor:c};return Ne(d).forEach(f=>{u[f]=function(h){const{subscr:m}=de;if(m){const y=b=>{const E=`idb://${e}/${n}/${b}`;return m[E]||(m[E]=new Zt)},v=y(""),p=y(":dels"),[x,w]=d[f](h);if(y(x.name||"").add(w),!x.isPrimaryKey){if(f!=="count"){const b=f==="query"&&l&&h.values&&s.query({...h,values:!1});return s[f].apply(this,arguments).then(E=>{if(f==="query"){if(l&&h.values)return b.then(({result:_})=>(v.addKeys(_),E));const k=h.values?E.result.map(i):E.result;h.values?v.addKeys(k):p.addKeys(k)}else if(f==="openCursor"){const k=E,_=h.values;return k&&Object.create(k,{key:{get:()=>(p.addKey(k.primaryKey),k.key)},primaryKey:{get(){const C=k.primaryKey;return p.addKey(C),C}},value:{get:()=>(_&&v.addKey(k.primaryKey),k.value)}})}return E})}p.add(r)}}return s[f].apply(this,arguments)}}),u}}}};class jr{constructor(e,r){this._middlewares={},this.verno=0;const n=jr.dependencies;this._options=r={addons:jr.addons,autoOpen:!0,indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange,...r},this._deps={indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange};const{addons:s}=r;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;const o={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:$e,dbReadyPromise:null,cancelOpen:$e,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};var a;o.dbReadyPromise=new se(i=>{o.dbReadyResolve=i}),o.openCanceller=new se((i,l)=>{o.cancelOpen=l}),this._state=o,this.name=e,this.on=Vn(this,"populate","blocked","versionchange","close",{ready:[Zi,$e]}),this.on.ready.subscribe=Yu(this.on.ready.subscribe,i=>(l,u)=>{jr.vip(()=>{const c=this._state;if(c.openComplete)c.dbOpenError||se.resolve().then(l),u&&i(l);else if(c.onReadyBeingFired)c.onReadyBeingFired.push(l),u&&i(l);else{i(l);const d=this;u||i(function f(){d.on.ready.unsubscribe(l),d.on.ready.unsubscribe(f)})}})}),this.Collection=(a=this,Bn(Ig.prototype,function(i,l){this.db=a;let u=pd,c=null;if(l)try{u=l()}catch(m){c=m}const d=i._ctx,f=d.table,h=f.hook.reading.fire;this._ctx={table:f,index:d.index,isPrimKey:!d.index||f.schema.primKey.keyPath&&d.index===f.schema.primKey.name,range:u,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:c,or:d.or,valueMapper:h!==ns?h:null}})),this.Table=function(i){return Bn(Rg.prototype,function(l,u,c){this.db=i,this._tx=c,this.name=l,this.schema=u,this.hook=i._allTables[l]?i._allTables[l].hook:Vn(null,{creating:[bg,$e],reading:[wg,ns],updating:[Eg,$e],deleting:[_g,$e]})})}(this),this.Transaction=function(i){return Bn(Lg.prototype,function(l,u,c,d,f){this.db=i,this.mode=l,this.storeNames=u,this.schema=c,this.chromeTransactionDurability=d,this.idbtrans=null,this.on=Vn(this,"complete","error","abort"),this.parent=f||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new se((h,m)=>{this._resolve=h,this._reject=m}),this._completion.then(()=>{this.active=!1,this.on.complete.fire()},h=>{var m=this.active;return this.active=!1,this.on.error.fire(h),this.parent?this.parent._reject(h):m&&this.idbtrans&&this.idbtrans.abort(),Ye(h)})})}(this),this.Version=function(i){return Bn(zg.prototype,function(l){this.db=i,this._cfg={version:l,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}(this),this.WhereClause=function(i){return Bn(yd.prototype,function(l,u,c){this.db=i,this._ctx={table:l,index:u===":id"?null:u,or:c};const d=i._deps.indexedDB;if(!d)throw new ve.MissingAPI;this._cmp=this._ascending=d.cmp.bind(d),this._descending=(f,h)=>d.cmp(h,f),this._max=(f,h)=>d.cmp(f,h)>0?f:h,this._min=(f,h)=>d.cmp(f,h)<0?f:h,this._IDBKeyRange=i._deps.IDBKeyRange})}(this),this.on("versionchange",i=>{i.newVersion>0?console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`):console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`),this.close()}),this.on("blocked",i=>{!i.newVersion||i.newVersion<i.oldVersion?console.warn(`Dexie.delete('${this.name}') was blocked`):console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${i.oldVersion/10}`)}),this._maxKey=is(r.IDBKeyRange),this._createTransaction=(i,l,u,c)=>new this.Transaction(i,l,u,this._options.chromeTransactionDurability,c),this._fireOnBlocked=i=>{this.on("blocked").fire(i),Kn.filter(l=>l.name===this.name&&l!==this&&!l._state.vcFired).map(l=>l.on("versionchange").fire(i))},this.use(qg),this.use(Wg),this.use(Xg),this.use(Yg),this.vip=Object.create(this,{_vip:{value:!0}}),s.forEach(i=>i(this))}version(e){if(isNaN(e)||e<.1)throw new ve.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new ve.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);const r=this._versions;var n=r.filter(s=>s._cfg.version===e)[0];return n||(n=new this.Version(e),r.push(n),r.sort(Gg),n.stores({}),this._state.autoSchema=!1,n)}_whenReady(e){return this.idbdb&&(this._state.openComplete||de.letThrough||this._vip)?e():new se((r,n)=>{if(this._state.openComplete)return n(new ve.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen)return void n(new ve.DatabaseClosed);this.open().catch($e)}this._state.dbReadyPromise.then(r,n)}).then(e)}use({stack:e,create:r,level:n,name:s}){s&&this.unuse({stack:e,name:s});const o=this._middlewares[e]||(this._middlewares[e]=[]);return o.push({stack:e,create:r,level:n??10,name:s}),o.sort((a,i)=>a.level-i.level),this}unuse({stack:e,name:r,create:n}){return e&&this._middlewares[e]&&(this._middlewares[e]=this._middlewares[e].filter(s=>n?s.create!==n:!!r&&s.name!==r)),this}open(){return Kg(this)}_close(){const e=this._state,r=Kn.indexOf(this);if(r>=0&&Kn.splice(r,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}e.dbReadyPromise=new se(n=>{e.dbReadyResolve=n}),e.openCanceller=new se((n,s)=>{e.cancelOpen=s})}close(){this._close();const e=this._state;this._options.autoOpen=!1,e.dbOpenError=new ve.DatabaseClosed,e.isBeingOpened&&e.cancelOpen(e.dbOpenError)}delete(){const e=arguments.length>0,r=this._state;return new se((n,s)=>{const o=()=>{this.close();var a=this._deps.indexedDB.deleteDatabase(this.name);a.onsuccess=Ge(()=>{(function({indexedDB:i,IDBKeyRange:l},u){!sl(i)&&u!==To&&nl(i,l).delete(u).catch($e)})(this._deps,this.name),n()}),a.onerror=zt(s),a.onblocked=this._fireOnBlocked};if(e)throw new ve.InvalidArgument("Arguments not allowed in db.delete()");r.isBeingOpened?r.dbReadyPromise.then(o):o()})}backendDB(){return this.idbdb}isOpen(){return this.idbdb!==null}hasBeenClosed(){const e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"}hasFailed(){return this._state.dbOpenError!==null}dynamicallyOpened(){return this._state.autoSchema}get tables(){return Ne(this._allTables).map(e=>this._allTables[e])}transaction(){const e=Vg.apply(this,arguments);return this._transaction.apply(this,e)}_transaction(e,r,n){let s=de.trans;s&&s.db===this&&e.indexOf("!")===-1||(s=null);const o=e.indexOf("?")!==-1;let a,i;e=e.replace("!","").replace("?","");try{if(i=r.map(u=>{var c=u instanceof this.Table?u.name:u;if(typeof c!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return c}),e=="r"||e===qo)a=qo;else{if(e!="rw"&&e!=Wo)throw new ve.InvalidArgument("Invalid transaction mode: "+e);a=Wo}if(s){if(s.mode===qo&&a===Wo){if(!o)throw new ve.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");s=null}s&&i.forEach(u=>{if(s&&s.storeNames.indexOf(u)===-1){if(!o)throw new ve.SubTransaction("Table "+u+" not included in parent transaction.");s=null}}),o&&s&&!s.active&&(s=null)}}catch(u){return s?s._promise(null,(c,d)=>{d(u)}):Ye(u)}const l=_d.bind(null,this,a,i,s,n);return s?s._promise(a,l,"lock"):de.trans?_n(de.transless,()=>this._whenReady(l)):this._whenReady(l)}table(e){if(!At(this._allTables,e))throw new ve.InvalidTable(`Table ${e} does not exist`);return this._allTables[e]}}const Jg=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable";class Zg{constructor(e){this._subscribe=e}subscribe(e,r,n){return this._subscribe(e&&typeof e!="function"?e:{next:e,error:r,complete:n})}[Jg](){return this}}function kd(t,e){return Ne(e).forEach(r=>{fo(t[r]||(t[r]=new Zt),e[r])}),t}function ep(t){let e,r=!1;const n=new Zg(s=>{const o=Qi(t);let a=!1,i={},l={};const u={get closed(){return a},unsubscribe:()=>{a=!0,Sr.storagemutated.unsubscribe(h)}};s.start&&s.start(u);let c=!1,d=!1;function f(){return Ne(l).some(y=>i[y]&&Qg(i[y],l[y]))}const h=y=>{kd(i,y),f()&&m()},m=()=>{if(c||a)return;i={};const y={},v=function(p){o&&bn();const x=()=>Ar(t,{subscr:p,trans:null}),w=de.trans?_n(de.transless,x):x();return o&&w.then(hr,hr),w}(y);d||(Sr(as,h),d=!0),c=!0,Promise.resolve(v).then(p=>{r=!0,e=p,c=!1,a||(f()?m():(i={},l=y,s.next&&s.next(p)))},p=>{c=!1,r=!1,s.error&&s.error(p),u.unsubscribe()})};return m(),u});return n.hasValue=()=>r,n.getValue=()=>e,n}let _i;try{_i={indexedDB:Me.indexedDB||Me.mozIndexedDB||Me.webkitIndexedDB||Me.msIndexedDB,IDBKeyRange:Me.IDBKeyRange||Me.webkitIDBKeyRange}}catch{_i={indexedDB:null,IDBKeyRange:null}}const Ir=jr;function Ks(t){let e=sr;try{sr=!0,Sr.storagemutated.fire(t)}finally{sr=e}}yn(Ir,{...Hs,delete:t=>new Ir(t,{addons:[]}).delete(),exists:t=>new Ir(t,{addons:[]}).open().then(e=>(e.close(),!0)).catch("NoSuchDatabaseError",()=>!1),getDatabaseNames(t){try{return function({indexedDB:e,IDBKeyRange:r}){return sl(e)?Promise.resolve(e.databases()).then(n=>n.map(s=>s.name).filter(s=>s!==To)):nl(e,r).toCollection().primaryKeys()}(Ir.dependencies).then(t)}catch{return Ye(new ve.MissingAPI)}},defineClass:()=>function(t){vt(this,t)},ignoreTransaction:t=>de.trans?_n(de.transless,t):t(),vip:mi,async:function(t){return function(){try{var e=wi(t.apply(this,arguments));return e&&typeof e.then=="function"?e:se.resolve(e)}catch(r){return Ye(r)}}},spawn:function(t,e,r){try{var n=wi(t.apply(r,e||[]));return n&&typeof n.then=="function"?n:se.resolve(n)}catch(s){return Ye(s)}},currentTransaction:{get:()=>de.trans||null},waitFor:function(t,e){const r=se.resolve(typeof t=="function"?Ir.ignoreTransaction(t):t).timeout(e||6e4);return de.trans?de.trans.waitFor(r):r},Promise:se,debug:{get:()=>Wt,set:t=>{td(t,t==="dexie"?()=>!0:gd)}},derive:dn,extend:vt,props:yn,override:Yu,Events:Vn,on:Sr,liveQuery:ep,extendObservabilitySet:kd,getByKeyPath:lr,setByKeyPath:Lt,delByKeyPath:function(t,e){typeof e=="string"?Lt(t,e,void 0):"length"in e&&[].map.call(e,function(r){Lt(t,r,void 0)})},shallowClone:Ju,deepClone:vs,getObjectDiff:ol,cmp:pt,asap:Qu,minKey:di,addons:[],connections:Kn,errnames:Ji,dependencies:_i,semVer:y0,version:y0.split(".").map(t=>parseInt(t)).reduce((t,e,r)=>t+e/Math.pow(10,2*r))}),Ir.maxKey=is(Ir.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Sr(as,t=>{if(!sr){let e;Po?(e=document.createEvent("CustomEvent"),e.initCustomEvent(kr,!0,!0,t)):e=new CustomEvent(kr,{detail:t}),sr=!0,dispatchEvent(e),sr=!1}}),addEventListener(kr,({detail:t})=>{sr||Ks(t)}));let sr=!1;if(typeof BroadcastChannel<"u"){const t=new BroadcastChannel(kr);typeof t.unref=="function"&&t.unref(),Sr(as,e=>{sr||t.postMessage(e)}),t.onmessage=e=>{e.data&&Ks(e.data)}}else if(typeof self<"u"&&typeof navigator<"u"){Sr(as,e=>{try{sr||(typeof localStorage<"u"&&localStorage.setItem(kr,JSON.stringify({trig:Math.random(),changedParts:e})),typeof self.clients=="object"&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach(r=>r.postMessage({type:kr,changedParts:e})))}catch{}}),typeof addEventListener<"u"&&addEventListener("storage",e=>{if(e.key===kr){const r=JSON.parse(e.newValue);r&&Ks(r.changedParts)}});const t=self.document&&navigator.serviceWorker;t&&t.addEventListener("message",function({data:e}){e&&e.type===kr&&Ks(e.changedParts)})}se.rejectionMapper=function(t,e){if(!t||t instanceof fn||t instanceof TypeError||t instanceof SyntaxError||!t.name||!x0[t.name])return t;var r=new x0[t.name](e||t.message,t);return"stack"in t&&ir(r,"stack",{get:function(){return this.inner.stack}}),r},td(Wt,gd);class Cd extends jr{constructor(){super("cryptoPortfolioV2");_e(this,"locations");_e(this,"holdings");_e(this,"prices");_e(this,"tokens");this.version(1).stores({locations:"id, name, type, isCustom",holdings:"id, locationId, symbol, quantity, createdAt, updatedAt",prices:"[symbol+date], priceJpy, fetchedAt"}),this.version(2).stores({locations:"id, name, type, isCustom",holdings:"id, symbol, createdAt, updatedAt, isEncrypted, encryptedQuantity, encryptedLocationId, encryptedNote",prices:"[symbol+date], priceJpy, fetchedAt"}).upgrade(r=>r.table("holdings").toCollection().modify(n=>{n.isEncrypted||(n.isEncrypted=!1)})),this.version(3).stores({locations:"id, name, type, isCustom",holdings:"id, symbol, createdAt, updatedAt, isEncrypted, encryptedQuantity, encryptedLocationId, encryptedNote",prices:"[symbol+date], symbol, priceJpy, fetchedAt",tokens:"symbol, name, id"}),this.on("populate",()=>this.populate())}async populate(){}}const ge=new Cd,Ve={async getLocations(){const t=await ge.locations.orderBy("name").toArray();return console.log("[DEBUG] dbServiceV2.getLocations - returning",t.length,"locations"),t},async getLocationsByType(t){return await ge.locations.where("type").equals(t).sortBy("name")},async addCustomLocation(t){const e={id:`custom-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,name:t,type:"custom",isCustom:!0};return await ge.locations.add(e),e},async getLocation(t){return await ge.locations.get(t)},async addHolding(t){const e=Date.now(),r={...t,id:`holding-${e}-${Math.random().toString(36).substr(2,9)}`,createdAt:e,updatedAt:e};return await ge.holdings.add(r)},async updateHolding(t,e){return await ge.holdings.update(t,{...e,updatedAt:Date.now()})},async deleteHolding(t){await ge.holdings.delete(t)},async getHoldings(){return await ge.holdings.orderBy("updatedAt").reverse().toArray()},async getHoldingsByLocation(t){return await ge.holdings.where("locationId").equals(t).toArray()},async getHoldingsBySymbol(t){return await ge.holdings.where("symbol").equals(t.toUpperCase()).toArray()},async getAggregatedHoldings(){const t=await this.getHoldings(),e=new Map;for(const r of t){const n=r.symbol.toUpperCase();e.has(n)||e.set(n,{totalQuantity:0,holdings:[],notes:[]});const s=e.get(n);s.totalQuantity+=r.quantity,s.holdings.push(r),r.note&&r.note.trim()&&s.notes.push(r.note.trim())}return e},async setPrice(t,e,r,n){await ge.prices.put({symbol:t.toUpperCase(),date:e,priceJpy:r,fxRate:n,fetchedAt:Date.now()})},async getPrice(t,e){return await ge.prices.get([t.toUpperCase(),e])},async getLatestPrice(t){return await ge.prices.where("symbol").equals(t.toUpperCase()).reverse().first()},isPriceFresh(t){return Date.now()-t.fetchedAt<432e5},async getToken(t){return await ge.tokens.get(t.toUpperCase())},async addToken(t){await ge.tokens.put({...t,symbol:t.symbol.toUpperCase()})},async ensureTokenExists(t){const e=t.toUpperCase();await this.getToken(e)||await this.addToken({symbol:e,name:e,id:e.toLowerCase()})},async clearAllData(){await ge.transaction("rw",ge.holdings,ge.prices,async()=>{await ge.holdings.clear(),await ge.prices.clear()})}},ho=Object.freeze(Object.defineProperty({__proto__:null,CryptoPortfolioDBV2:Cd,dbServiceV2:Ve,dbV2:ge},Symbol.toStringTag,{value:"Module"}));class xt{static async deriveKey(e,r){const s=new TextEncoder().encode(e),o=r||crypto.getRandomValues(new Uint8Array(this.SALT_LENGTH)),a=await crypto.subtle.importKey("raw",s,{name:"PBKDF2"},!1,["deriveBits","deriveKey"]);return{key:await crypto.subtle.deriveKey({name:"PBKDF2",salt:o,iterations:this.ITERATIONS,hash:"SHA-256"},a,{name:"AES-GCM",length:this.KEY_LENGTH},!1,["encrypt","decrypt"]),salt:o}}static async encrypt(e,r){const s=new TextEncoder().encode(e),o=crypto.getRandomValues(new Uint8Array(this.IV_LENGTH)),a=await crypto.subtle.encrypt({name:"AES-GCM",iv:o},r,s);return{ciphertext:this.arrayBufferToBase64(a),iv:this.arrayBufferToBase64(o)}}static async decrypt(e,r){const n=this.base64ToArrayBuffer(e.ciphertext),s=this.base64ToArrayBuffer(e.iv),o=await crypto.subtle.decrypt({name:"AES-GCM",iv:s},r,n);return new TextDecoder().decode(o)}static async hashPassword(e,r){const s=new TextEncoder().encode(e),o=r||crypto.getRandomValues(new Uint8Array(this.SALT_LENGTH)),a=await crypto.subtle.importKey("raw",s,{name:"PBKDF2"},!1,["deriveBits"]),i=await crypto.subtle.deriveBits({name:"PBKDF2",salt:o,iterations:this.ITERATIONS,hash:"SHA-256"},a,256);return{hash:this.arrayBufferToBase64(i),salt:this.arrayBufferToBase64(o)}}static async verifyPassword(e,r,n){const s=new Uint8Array(this.base64ToArrayBuffer(n)),{hash:o}=await this.hashPassword(e,s);return o===r}static arrayBufferToBase64(e){const r=new Uint8Array(e);let n="";for(let s=0;s<r.byteLength;s++)n+=String.fromCharCode(r[s]);return btoa(n)}static base64ToArrayBuffer(e){const r=atob(e),n=new Uint8Array(r.length);for(let s=0;s<r.length;s++)n[s]=r.charCodeAt(s);return n.buffer}}_e(xt,"ITERATIONS",15e4),_e(xt,"KEY_LENGTH",256),_e(xt,"SALT_LENGTH",16),_e(xt,"IV_LENGTH",12);class Dd{constructor(){_e(this,"encryptionKey",null)}setEncryptionKey(e){this.encryptionKey=e}clearEncryptionKey(){this.encryptionKey=null}isUnlocked(){return this.encryptionKey!==null}async encryptField(e){if(!this.encryptionKey)throw new Error("Encryption key not available");const r=await xt.encrypt(e,this.encryptionKey);return JSON.stringify(r)}async decryptField(e){if(!this.encryptionKey)throw new Error("Encryption key not available");const r=JSON.parse(e);return await xt.decrypt(r,this.encryptionKey)}async encryptHolding(e){const r=await this.encryptField(e.quantity.toString()),n=await this.encryptField(e.locationId),s=e.note?await this.encryptField(e.note):void 0;return{id:e.id,symbol:e.symbol,createdAt:e.createdAt,updatedAt:e.updatedAt,encryptedQuantity:r,encryptedLocationId:n,encryptedNote:s,isEncrypted:!0}}async decryptHolding(e){const r=parseFloat(await this.decryptField(e.encryptedQuantity)),n=await this.decryptField(e.encryptedLocationId),s=e.encryptedNote?await this.decryptField(e.encryptedNote):void 0;return{id:e.id,symbol:e.symbol,quantity:r,locationId:n,note:s,createdAt:e.createdAt,updatedAt:e.updatedAt}}async addHolding(e){if(!this.isUnlocked())throw new Error("Storage is locked");const r=Date.now(),n={...e,id:`holding-${r}-${Math.random().toString(36).substr(2,9)}`,createdAt:r,updatedAt:r},s=await this.encryptHolding(n);await Ve.ensureTokenExists(e.symbol),await ge.table("holdings").add(s),localStorage.setItem("lastDataModified",Date.now().toString());try{const{metadataService:o}=await ce(async()=>{const{metadataService:i}=await import("./metadata.service-8MYvfiJN.js");return{metadataService:i}},[]),a={isNew:!0,isModified:!1,isDeleted:!1,isSynced:!1,lastModified:new Date(r),lastSyncTime:null,version:1};o.updateCacheForItem("holding",n.id,a),console.log("[DEBUG] addHolding - metadata updated for new holding:",n.id)}catch(o){console.warn("Failed to update metadata for new holding:",o)}return n.id}async updateHolding(e,r){if(!this.isUnlocked())throw new Error("Storage is locked");const n={updatedAt:Date.now()};r.quantity!==void 0&&(n.encryptedQuantity=await this.encryptField(r.quantity.toString())),r.locationId!==void 0&&(n.encryptedLocationId=await this.encryptField(r.locationId)),r.note!==void 0&&(n.encryptedNote=r.note?await this.encryptField(r.note):null),r.symbol!==void 0&&(n.symbol=r.symbol);const s=await ge.table("holdings").update(e,n);localStorage.setItem("lastDataModified",Date.now().toString());try{const{metadataService:o}=await ce(async()=>{const{metadataService:u}=await import("./metadata.service-8MYvfiJN.js");return{metadataService:u}},[]),a=await ge.table("holdings").get(e),i=(a==null?void 0:a.metadata)||o.createDefaultMetadata(),l=o.markAsModified(i);o.updateCacheForItem("holding",e,l)}catch(o){console.warn("Failed to update metadata for holding update:",o)}return s}async deleteHolding(e){if(!this.isUnlocked())throw new Error("Storage is locked");try{const{metadataService:r}=await ce(async()=>{const{metadataService:a}=await import("./metadata.service-8MYvfiJN.js");return{metadataService:a}},[]),n=await ge.table("holdings").get(e),s=(n==null?void 0:n.metadata)||r.createDefaultMetadata(),o=r.markAsDeleted(s);r.updateCacheForItem("holding",e,o)}catch(r){console.warn("Failed to update metadata for holding deletion:",r)}await ge.table("holdings").delete(e),localStorage.setItem("lastDataModified",Date.now().toString())}async getHoldings(){if(!this.isUnlocked())throw new Error("Storage is locked");console.log("[DEBUG] getHoldings - fetching from database...");const e=await ge.table("holdings").orderBy("updatedAt").reverse().toArray();console.log("[DEBUG] getHoldings - fetched",e.length,"raw holdings from database");const r=[];for(let n=0;n<e.length;n++){const s=e[n];console.log("[DEBUG] getHoldings - processing holding",n,"isEncrypted:",s.isEncrypted);try{if(s.isEncrypted){const o=await this.decryptHolding(s);r.push(o),console.log("[DEBUG] getHoldings - successfully decrypted holding",n)}else r.push(s),console.log("[DEBUG] getHoldings - added unencrypted holding",n)}catch(o){throw console.error("[DEBUG] getHoldings - failed to decrypt holding",n,":",o),console.error("[DEBUG] getHoldings - this is likely due to encryption key mismatch"),new Error("ENCRYPTION_KEY_MISMATCH")}}return console.log("[DEBUG] getHoldings - returning",r.length,"processed holdings"),r}async clearIncompatibleEncryptedData(){console.log("[DEBUG] clearIncompatibleEncryptedData - clearing encrypted holdings..."),await ge.holdings.clear(),console.log("[DEBUG] clearIncompatibleEncryptedData - encrypted holdings cleared")}async getHoldingsByLocation(e){if(!this.isUnlocked())throw new Error("Storage is locked");return(await this.getHoldings()).filter(n=>n.locationId===e)}async getHoldingsBySymbol(e){if(!this.isUnlocked())throw new Error("Storage is locked");return(await this.getHoldings()).filter(n=>n.symbol===e.toUpperCase())}async getAggregatedHoldings(){const e=await this.getHoldings(),r=new Map;for(const n of e){const s=n.symbol.toUpperCase();r.has(s)||r.set(s,{totalQuantity:0,holdings:[],notes:[]});const o=r.get(s);o.totalQuantity+=n.quantity,o.holdings.push(n),n.note&&n.note.trim()&&o.notes.push(n.note.trim())}return r}async migrateUnencryptedData(){if(!this.isUnlocked())throw new Error("Storage is locked");const r=(await ge.table("holdings").toArray()).filter(n=>!n.isEncrypted);if(r.length!==0){console.log(`Migrating ${r.length} unencrypted holdings...`);for(const n of r){const s=await this.encryptHolding(n);await ge.table("holdings").update(n.id,s)}console.log("Migration completed successfully")}}async getLocations(){return await Ve.getLocations()}async getLocationsByType(e){return await Ve.getLocationsByType(e)}async addCustomLocation(e){return await Ve.addCustomLocation(e)}async getLocation(e){return await Ve.getLocation(e)}async setPrice(e,r,n,s){return await Ve.setPrice(e,r,n,s)}async getPrice(e,r){return await Ve.getPrice(e,r)}async getLatestPrice(e){return await Ve.getLatestPrice(e)}isPriceFresh(e){return Ve.isPriceFresh(e)}async clearAllData(){if(!this.isUnlocked())throw new Error("Storage is locked");await Ve.clearAllData()}async clearAllDataForNewUser(){console.log("[DEBUG] clearAllDataForNewUser - clearing encrypted holdings data..."),await ge.holdings.clear(),await ge.prices.clear(),console.log("[DEBUG] clearAllDataForNewUser - encrypted data cleared successfully"),await this.ensureInitialDataExists()}async ensureInitialDataExists(){}async getAuthState(){const e=localStorage.getItem("crypto-portfolio-auth");if(console.log("[DEBUG] getAuthState - raw localStorage data:",e),!e)return{isAuthenticated:!1};try{const r=JSON.parse(e);return console.log("[DEBUG] getAuthState - parsed data:",r),r}catch(r){return console.log("[DEBUG] getAuthState - parse error:",r),{isAuthenticated:!1}}}async setAuthState(e){console.log("[DEBUG] setAuthState - setting state:",e),localStorage.setItem("crypto-portfolio-auth",JSON.stringify(e))}async clearAuthState(){localStorage.removeItem("crypto-portfolio-auth"),await this.clearAllData()}async forceReset(){try{localStorage.removeItem("crypto-portfolio-auth"),await Ve.clearAllData(),console.log("Force reset completed successfully")}catch(e){console.error("Force reset failed:",e)}}}const Ee=new Dd,Kt=Object.freeze(Object.defineProperty({__proto__:null,SecureStorageService:Dd,secureStorage:Ee},Symbol.toStringTag,{value:"Module"})),tp="https://api.coingecko.com/api/v3";class rp{async fetchAPI(e){try{const r=await fetch(`${tp}${e}`);if(!r.ok)throw new Error(`CoinGecko API error: ${r.status}`);return await r.json()}catch(r){throw console.error("CoinGecko API fetch error:",r),r}}async searchTokens(e){if(!e.trim())return[];try{return(await this.fetchAPI(`/search?query=${encodeURIComponent(e)}`)).coins.slice(0,10)}catch(r){return console.error("Token search failed:",r),[]}}async getCurrentPrices(e){if(e.length===0)return{};try{const r=e.join(","),n=await this.fetchAPI(`/simple/price?ids=${r}&vs_currencies=jpy,usd`),s={};for(const[o,a]of Object.entries(n))if(a.jpy)s[o]=a.jpy;else if(a.usd){const i=await this.getUSDToJPYRate();s[o]=a.usd*i}return s}catch(r){throw console.error("Price fetch failed:",r),r}}async getHistoricalPrice(e,r){var n,s,o,a;try{const i=this.formatDateForAPI(r),l=await this.fetchAPI(`/coins/${e}/history?date=${i}`);if((s=(n=l.market_data)==null?void 0:n.current_price)!=null&&s.jpy)return l.market_data.current_price.jpy;if((a=(o=l.market_data)==null?void 0:o.current_price)!=null&&a.usd){const u=await this.getUSDToJPYRate();return l.market_data.current_price.usd*u}return null}catch(i){return console.error("Historical price fetch failed:",i),null}}async getPreviousDayPrice(e){const r=new Date;r.setDate(r.getDate()-1);const n=r.toISOString().split("T")[0];return await this.getHistoricalPrice(e,n)}async getUSDToJPYRate(){try{return(await this.fetchAPI("/exchange_rates")).rates.jpy.value}catch(e){return console.error("Exchange rate fetch failed:",e),150}}formatDateForAPI(e){const r=new Date(e),n=String(r.getDate()).padStart(2,"0"),s=String(r.getMonth()+1).padStart(2,"0"),o=r.getFullYear();return`${n}-${s}-${o}`}getPreviousDayDateString(){const e=new Date;return e.setDate(e.getDate()-1),e.toISOString().split("T")[0]}}const Ei=new rp,En=Bo("tokens",()=>{const t=Q([]),e=Q(!1),r=Q(null),n=Q([]),s=Q(!1),o=ue(()=>[...t.value].sort((f,h)=>f.symbol.localeCompare(h.symbol)));async function a(){try{e.value=!0,r.value=null,t.value=await ge.tokens.toArray()}catch(f){r.value="トークンの読み込みに失敗しました",console.error("Failed to load tokens:",f)}finally{e.value=!1}}async function i(f){try{r.value=null;const h={symbol:f.symbol.toUpperCase(),name:f.name,id:f.id,iconUrl:f.iconUrl};return await Ve.addToken(h),await a(),!0}catch(h){return r.value="トークンの追加に失敗しました",console.error("Failed to add token:",h),!1}}async function l(f){try{return r.value=null,await ge.tokens.delete(f),await a(),!0}catch(h){return r.value="トークンの削除に失敗しました",console.error("Failed to remove token:",h),!1}}async function u(f){if(!f.trim()){n.value=[];return}try{s.value=!0;const h=await Ei.searchTokens(f);n.value=h.map(m=>({id:m.id,symbol:m.symbol.toUpperCase(),name:m.name,iconUrl:m.thumb||m.large}))}catch(h){console.error("Search failed:",h),n.value=[]}finally{s.value=!1}}function c(){n.value=[]}function d(){r.value=null}return{tokens:t,sortedTokens:o,isLoading:e,error:r,searchResults:n,isSearching:s,loadTokens:a,addToken:i,removeToken:l,searchTokens:u,clearSearch:c,clearError:d}}),np=Object.freeze(Object.defineProperty({__proto__:null,useTokensStore:En},Symbol.toStringTag,{value:"Module"})),ws=Bo("holdingsV2",()=>{const t=Q([]),e=Q(new Map),r=Q({}),n=Q(!1),s=Q(!1),o=Q(null),a=Q(null),i=ue(()=>{var p;let v=0;for(const[x,w]of e.value){const b=(p=r.value[x])==null?void 0:p.priceJpy;b&&w.totalQuantity&&(v+=b*w.totalQuantity)}return v});async function l(){try{if(n.value=!0,o.value=null,!Ee.isUnlocked()){console.log("[DEBUG] loadHoldings - storage is locked, skipping load"),t.value=[];return}console.log("[DEBUG] loadHoldings - attempting to load holdings from secure storage"),t.value=await Ee.getHoldings(),console.log("[DEBUG] loadHoldings - successfully loaded",t.value.length,"holdings")}catch(v){o.value="ポートフォリオの読み込みに失敗しました",console.error("Failed to load holdings:",v),console.error("Error name:",v instanceof Error?v.name:"Unknown"),console.error("Error message:",v instanceof Error?v.message:v),console.error("Error stack:",v instanceof Error?v.stack:"No stack")}finally{n.value=!1}}async function u(){try{if(n.value=!0,o.value=null,!Ee.isUnlocked()){console.log("[DEBUG] loadAggregatedHoldings - storage is locked, skipping load"),e.value=new Map;return}console.log("[DEBUG] loadAggregatedHoldings - attempting to load aggregated holdings"),e.value=await Ee.getAggregatedHoldings(),console.log("[DEBUG] loadAggregatedHoldings - successfully loaded",e.value.size,"aggregated holdings")}catch(v){o.value="ポートフォリオの読み込みに失敗しました",console.error("Failed to load aggregated holdings:",v),console.error("Error name:",v instanceof Error?v.name:"Unknown"),console.error("Error message:",v instanceof Error?v.message:v),console.error("Error stack:",v instanceof Error?v.stack:"No stack")}finally{n.value=!1}}async function c(v){try{if(o.value=null,console.log("[DEBUG] addHolding - storage unlocked:",Ee.isUnlocked()),console.log("[DEBUG] addHolding - attempting to add:",v),!Ee.isUnlocked()){console.log("[DEBUG] addHolding - storage is locked, attempting to unlock...");const{authService:p}=await ce(async()=>{const{authService:w}=await Promise.resolve().then(()=>xn);return{authService:w}},void 0),x=await p.isAuthenticated();if(console.log("[DEBUG] addHolding - authentication status:",x),!x)throw new Error("Not authenticated - cannot add holding");try{console.log("[DEBUG] addHolding - attempting to restore encryption key from session...");const{useSessionStore:w}=await ce(async()=>{const{useSessionStore:k}=await Promise.resolve().then(()=>Id);return{useSessionStore:k}},void 0),b=w();if(console.log("[DEBUG] addHolding - requesting unlock through session store..."),await b.requestUnlock()&&Ee.isUnlocked())console.log("[DEBUG] addHolding - unlock successful, retrying operation...");else throw console.log("[DEBUG] addHolding - unlock failed or cancelled"),new Error("ストレージのロック解除に失敗しました")}catch(w){throw console.error("[DEBUG] addHolding - failed to unlock storage:",w),new Error("ストレージがロックされています。パスワードを再入力してください。")}}await Ee.addHolding(v),console.log("[DEBUG] addHolding - successfully added to storage"),await Promise.all([l(),u()]),console.log("[DEBUG] addHolding - completed reload");try{const{syncService:p}=await ce(async()=>{const{syncService:x}=await Promise.resolve().then(()=>zr);return{syncService:x}},void 0);p.isEnabled.value?(console.log("[DEBUG] addHolding - triggering automatic sync"),p.performSync().then(x=>{x.success?console.log("[DEBUG] addHolding - automatic sync completed successfully"):(console.warn("[DEBUG] addHolding - automatic sync failed:",x.message),window.showToast&&window.showToast.warning("同期エラー",`データの自動同期に失敗しました: ${x.message}`))}).catch(x=>{console.error("[DEBUG] addHolding - automatic sync error:",x),window.showToast&&window.showToast.error("同期エラー","データの自動同期中にエラーが発生しました")})):console.log("[DEBUG] addHolding - sync not enabled, skipping automatic sync")}catch(p){console.warn("[DEBUG] addHolding - failed to trigger sync:",p)}return!0}catch(p){return o.value="保有データの追加に失敗しました",console.error("Failed to add holding:",p),console.error("Error details:",p),!1}}async function d(v,p){try{o.value=null,await Ee.updateHolding(v,p),await Promise.all([l(),u()]);try{const{syncService:x}=await ce(async()=>{const{syncService:w}=await Promise.resolve().then(()=>zr);return{syncService:w}},void 0);x.isEnabled.value&&(console.log("[DEBUG] updateHolding - triggering automatic sync"),x.performSync().then(w=>{w.success?console.log("[DEBUG] updateHolding - automatic sync completed successfully"):(console.warn("[DEBUG] updateHolding - automatic sync failed:",w.message),window.showToast&&window.showToast.warning("同期エラー",`データの自動同期に失敗しました: ${w.message}`))}).catch(w=>{console.error("[DEBUG] updateHolding - automatic sync error:",w),window.showToast&&window.showToast.error("同期エラー","データの自動同期中にエラーが発生しました")}))}catch(x){console.warn("[DEBUG] updateHolding - failed to trigger sync:",x)}return!0}catch(x){return o.value="保有データの更新に失敗しました",console.error("Failed to update holding:",x),!1}}async function f(v){try{o.value=null,await Ee.deleteHolding(v),await Promise.all([l(),u()]);try{const{syncService:p}=await ce(async()=>{const{syncService:x}=await Promise.resolve().then(()=>zr);return{syncService:x}},void 0);p.isEnabled.value&&(console.log("[DEBUG] deleteHolding - triggering automatic sync"),p.performSync().then(x=>{x.success?console.log("[DEBUG] deleteHolding - automatic sync completed successfully"):(console.warn("[DEBUG] deleteHolding - automatic sync failed:",x.message),window.showToast&&window.showToast.warning("同期エラー",`データの自動同期に失敗しました: ${x.message}`))}).catch(x=>{console.error("[DEBUG] deleteHolding - automatic sync error:",x),window.showToast&&window.showToast.error("同期エラー","データの自動同期中にエラーが発生しました")}))}catch(p){console.warn("[DEBUG] deleteHolding - failed to trigger sync:",p)}return!0}catch(p){return o.value="保有データの削除に失敗しました",console.error("Failed to delete holding:",p),!1}}async function h(){if(e.value.size!==0)try{s.value=!0,o.value=null;const v=Ei.getPreviousDayDateString(),p=Array.from(e.value.keys()),x=En(),w=[],b={};for(const C of p){const S=x.tokens.find(A=>A.symbol===C);S!=null&&S.id&&(w.push(S.id),b[C]=S.id)}if(w.length===0)return;const E=p.map(async C=>{const S=b[C];if(!S)return null;const A=await Ve.getPrice(C,v);if(A&&Ve.isPriceFresh(A))return{symbol:C,price:A};const F=await Ei.getPreviousDayPrice(S);return F?(await Ve.setPrice(C,v,F),{symbol:C,price:{symbol:C,date:v,priceJpy:F,fetchedAt:Date.now()}}):null}),k=await Promise.all(E),_={};k.forEach(C=>{C&&(_[C.symbol]=C.price)}),r.value={...r.value,..._},a.value=new Date}catch(v){o.value="価格の更新に失敗しました",console.error("Failed to update prices:",v)}finally{s.value=!1}}async function m(){try{const v=Array.from(e.value.keys()),p={};for(const x of v){const w=await Ve.getLatestPrice(x);w&&(p[x]=w)}r.value=p}catch(v){console.error("Failed to load prices:",v)}}function y(){o.value=null}return{holdings:t,aggregatedHoldings:e,prices:r,totalValue:i,isLoading:n,isPriceLoading:s,error:o,lastPriceUpdate:a,loadHoldings:l,loadAggregatedHoldings:u,addHolding:c,updateHolding:d,deleteHolding:f,updatePrices:h,loadPrices:m,clearError:y}}),sp=Object.freeze(Object.defineProperty({__proto__:null,useHoldingsStoreV2:ws},Symbol.toStringTag,{value:"Module"})),bs=Bo("locations",()=>{const t=Q([]),e=Q(!1),r=Q(null);async function n(){console.log("[DEBUG] ensureInitialLocationsExist - checking if initial data exists...");const u=await ge.locations.count();if(console.log("[DEBUG] ensureInitialLocationsExist - location count:",u),u===0){console.log("[DEBUG] ensureInitialLocationsExist - populating locations...");const c=[{id:"bitflyer",name:"bitFlyer",type:"domestic_cex",isCustom:!1},{id:"coincheck",name:"Coincheck",type:"domestic_cex",isCustom:!1},{id:"bitbank",name:"bitbank",type:"domestic_cex",isCustom:!1},{id:"gmo-coin",name:"GMO Coin",type:"domestic_cex",isCustom:!1},{id:"sbi-vc",name:"SBI VC Trade",type:"domestic_cex",isCustom:!1},{id:"binance",name:"Binance",type:"global_cex",isCustom:!1},{id:"coinbase",name:"Coinbase",type:"global_cex",isCustom:!1},{id:"kraken",name:"Kraken",type:"global_cex",isCustom:!1},{id:"bybit",name:"Bybit",type:"global_cex",isCustom:!1},{id:"okx",name:"OKX",type:"global_cex",isCustom:!1},{id:"metamask",name:"MetaMask",type:"sw_wallet",isCustom:!1},{id:"trust-wallet",name:"Trust Wallet",type:"sw_wallet",isCustom:!1},{id:"phantom",name:"Phantom",type:"sw_wallet",isCustom:!1},{id:"keplr",name:"Keplr",type:"sw_wallet",isCustom:!1},{id:"backpack",name:"Backpack",type:"sw_wallet",isCustom:!1},{id:"ledger",name:"Ledger",type:"hw_wallet",isCustom:!1},{id:"trezor",name:"Trezor",type:"hw_wallet",isCustom:!1}];try{await ge.locations.bulkAdd(c),console.log("[DEBUG] ensureInitialLocationsExist - locations populated successfully")}catch(d){console.error("[DEBUG] ensureInitialLocationsExist - failed to populate locations:",d)}}}async function s(){try{e.value=!0,r.value=null,console.log("[DEBUG] loadLocations - starting to load locations...");const u=await ge.locations.count();console.log("[DEBUG] loadLocations - database location count:",u),u===0&&(console.log("[DEBUG] loadLocations - no locations found, ensuring initial data exists..."),await n()),t.value=await Ve.getLocations(),console.log("[DEBUG] loadLocations - loaded locations:",t.value.length),console.log("[DEBUG] loadLocations - location details:",t.value.map(c=>({id:c.id,name:c.name,type:c.type})))}catch(u){r.value="場所の読み込みに失敗しました",console.error("Failed to load locations:",u)}finally{e.value=!1}}async function o(u){try{r.value=null;const c=await Ve.addCustomLocation(u);return t.value.push(c),console.log("[DEBUG] Added custom location:",c),c}catch(c){throw r.value="カスタム場所の追加に失敗しました",console.error("Failed to add custom location:",c),c}}function a(u){const c=t.value.filter(d=>d.type===u);return console.log(`[DEBUG] getLocationsByType(${u}):`,c.length,"locations"),c}function i(u){return t.value.find(c=>c.id===u)}function l(){r.value=null}return{locations:t,isLoading:e,error:r,loadLocations:s,addCustomLocation:o,getLocationsByType:a,getLocation:i,clearError:l}}),op=Object.freeze(Object.defineProperty({__proto__:null,useLocationsStore:bs},Symbol.toStringTag,{value:"Module"}));function Zo(t,e="JPY"){return new Intl.NumberFormat("ja-JP",{style:"currency",currency:e,minimumFractionDigits:0,maximumFractionDigits:2}).format(Math.floor(t*100)/100)}function ki(t,e=8){return t===0?"0":t<.001?t.toFixed(8).replace(/\.?0+$/,""):t>=1?t.toFixed(Math.min(e,4)).replace(/\.?0+$/,""):t.toFixed(e).replace(/\.?0+$/,"")}function ap(t,e=2){return new Intl.NumberFormat("ja-JP",{style:"percent",minimumFractionDigits:e,maximumFractionDigits:e}).format(t/100)}function ip(t){const e=typeof t=="string"?new Date(t):t;return new Intl.DateTimeFormat("ja-JP",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}).format(e)}const lp={class:"space-y-6"},cp={class:"flex justify-between items-center"},up=["disabled"],dp={class:"bg-white dark:bg-gray-800 shadow-sm rounded-lg overflow-hidden"},fp={class:"overflow-x-auto"},hp={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},xp={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},gp={key:0},pp=["onClick"],vp={class:"px-6 py-4 whitespace-nowrap"},yp={class:"flex items-center"},mp={class:"flex-shrink-0 h-8 w-8"},wp=["src","alt"],bp={key:1,class:"h-8 w-8 bg-gray-300 dark:bg-gray-600 rounded-full flex items-center justify-center"},_p={class:"text-xs font-bold text-gray-600 dark:text-gray-300"},Ep={class:"ml-3"},kp={class:"text-sm font-medium text-gray-900 dark:text-white"},Cp={class:"text-sm text-gray-500 dark:text-gray-400"},Dp={class:"px-6 py-4 whitespace-nowrap text-right"},Ap={class:"text-sm text-gray-900 dark:text-white"},Bp={class:"px-6 py-4 whitespace-nowrap text-right"},Sp={class:"text-sm text-gray-900 dark:text-white"},Fp={key:0},Pp={key:1,class:"text-gray-400"},Tp={class:"px-6 py-4 whitespace-nowrap text-right"},Rp={class:"text-sm font-medium text-gray-900 dark:text-white"},Ip={key:0},$p={key:1,class:"text-gray-400"},Op={class:"px-6 py-4"},Up={class:"text-sm text-gray-500 dark:text-gray-400 truncate max-w-xs"},Lp={key:0,class:"bg-gray-50 dark:bg-gray-700 font-medium sticky bottom-0"},Hp={class:"border-t border-gray-200 dark:border-gray-600"},Mp={class:"px-6 py-4 text-right text-lg font-bold text-gray-900 dark:text-white"},Gp={key:0,class:"text-sm text-gray-500 dark:text-gray-400 text-center"},jp={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},zp={class:"bg-white dark:bg-gray-800 rounded-lg w-full max-w-2xl mx-4 max-h-[80vh] overflow-hidden"},Np={class:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700"},Kp={class:"text-lg font-medium text-gray-900 dark:text-white"},Vp={class:"p-6 overflow-y-auto"},qp={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},Wp={class:"divide-y divide-gray-200 dark:divide-gray-700"},Yp={class:"px-4 py-2 text-sm text-gray-900 dark:text-white"},Qp={class:"px-4 py-2 text-sm text-gray-900 dark:text-white text-right"},Xp={class:"px-4 py-2 text-sm text-gray-900 dark:text-white text-right"},Jp=Qe({__name:"SummaryView",setup(t){const e=ws(),r=En(),n=bs(),s=Q(!1),o=Q(""),a=Q([]),i=Q(0),l=ue(()=>{var p;let v=0;for(const[x,w]of e.aggregatedHoldings){const b=(p=e.prices[x])==null?void 0:p.priceJpy;b&&w.totalQuantity&&(v+=b*w.totalQuantity)}return v});function u(v){const p=r.tokens.find(x=>x.symbol===v);return p==null?void 0:p.iconUrl}function c(v){const p=r.tokens.find(x=>x.symbol===v);return p==null?void 0:p.name}function d(v,p){var w;const x=(w=e.prices[v])==null?void 0:w.priceJpy;return x?x*p:null}function f(v){const p=n.locations.find(x=>x.id===v);return(p==null?void 0:p.name)||"Unknown"}function h(v,p){o.value=v,a.value=p.holdings,i.value=p.totalQuantity,s.value=!0}function m(){s.value=!1,o.value="",a.value=[],i.value=0}async function y(){await e.updatePrices()}return gr(async()=>{await Promise.all([r.loadTokens(),n.loadLocations()]);const{withEncryption:v}=await ce(async()=>{const{withEncryption:p}=await import("./encryption-guard-C6xbHHhh.js");return{withEncryption:p}},[]);await v(async()=>{await e.loadAggregatedHoldings(),await e.loadPrices(),e.aggregatedHoldings.size>0&&await e.updatePrices()})}),(v,p)=>(O(),L("div",lp,[g("div",cp,[p[2]||(p[2]=g("h2",{class:"text-2xl font-bold text-gray-900 dark:text-white"}," ポートフォリオ ",-1)),g("button",{onClick:y,disabled:ke(e).isPriceLoading,class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed dark:focus:ring-offset-gray-800"},[(O(),L("svg",{class:He([{"animate-spin":ke(e).isPriceLoading},"w-4 h-4 mr-2"]),fill:"none",viewBox:"0 0 24 24"},p[0]||(p[0]=[g("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),g("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]),2)),p[1]||(p[1]=We(" 価格を取得 "))],8,up)]),g("div",dp,[g("div",fp,[g("table",hp,[p[6]||(p[6]=g("thead",{class:"bg-gray-50 dark:bg-gray-700"},[g("tr",null,[g("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," 通貨 "),g("th",{scope:"col",class:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," 合計数量 "),g("th",{scope:"col",class:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," 価格（JPY） "),g("th",{scope:"col",class:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," 評価額（JPY） "),g("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," メモ ")])],-1)),g("tbody",xp,[ke(e).aggregatedHoldings.size===0?(O(),L("tr",gp,p[3]||(p[3]=[g("td",{colspan:"5",class:"px-6 py-12 text-center text-gray-500 dark:text-gray-400"},[g("div",{class:"flex flex-col items-center"},[g("svg",{class:"w-12 h-12 mb-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[g("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})]),g("p",{class:"text-lg font-medium mb-2"},"保有通貨がありません"),g("p",{class:"text-sm"},"「保有数量入力」タブから仮想通貨を追加してください")])],-1)]))):oe("",!0),(O(!0),L(Oe,null,_t(ke(e).aggregatedHoldings,([x,w])=>(O(),L("tr",{key:x,onClick:b=>h(x,w),class:"hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer"},[g("td",vp,[g("div",yp,[g("div",mp,[u(x)?(O(),L("img",{key:0,src:u(x),alt:x,class:"h-8 w-8 rounded-full"},null,8,wp)):(O(),L("div",bp,[g("span",_p,Z(x.charAt(0)),1)]))]),g("div",Ep,[g("div",kp,Z(x),1),g("div",Cp,Z(c(x)||"不明"),1)])])]),g("td",Dp,[g("div",Ap,Z(ke(ki)(w.totalQuantity)),1)]),g("td",Bp,[g("div",Sp,[ke(e).prices[x]?(O(),L("span",Fp,Z(ke(Zo)(ke(e).prices[x].priceJpy)),1)):(O(),L("span",Pp,"-"))])]),g("td",Tp,[g("div",Rp,[d(x,w.totalQuantity)?(O(),L("span",Ip,Z(ke(Zo)(d(x,w.totalQuantity))),1)):(O(),L("span",$p,"-"))])]),g("td",Op,[g("div",Up,Z(w.notes.join(", ")||"-"),1)])],8,pp))),128))]),ke(e).aggregatedHoldings.size>0?(O(),L("tfoot",Lp,[g("tr",Hp,[p[4]||(p[4]=g("td",{class:"px-6 py-4 text-sm text-gray-900 dark:text-white",colspan:"3"}," 合計評価額 ",-1)),g("td",Mp,Z(ke(Zo)(l.value)),1),p[5]||(p[5]=g("td",null,null,-1))])])):oe("",!0)])])]),ke(e).lastPriceUpdate?(O(),L("div",Gp," 最終更新: "+Z(ke(ip)(ke(e).lastPriceUpdate)),1)):oe("",!0),s.value?(O(),L("div",jp,[g("div",zp,[g("div",Np,[g("h3",Kp,Z(o.value)+" の保有詳細 ",1),g("button",{onClick:m,class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},p[7]||(p[7]=[g("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[g("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),g("div",Vp,[g("table",qp,[p[8]||(p[8]=g("thead",{class:"bg-gray-50 dark:bg-gray-700"},[g("tr",null,[g("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"場所"),g("th",{class:"px-4 py-2 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"数量"),g("th",{class:"px-4 py-2 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"割合")])],-1)),g("tbody",Wp,[(O(!0),L(Oe,null,_t(a.value,x=>(O(),L("tr",{key:x.id},[g("td",Yp,Z(f(x.locationId)),1),g("td",Qp,Z(ke(ki)(x.quantity)),1),g("td",Xp,Z(ke(ap)(x.quantity/i.value*100)),1)]))),128))])])])])])):oe("",!0)]))}}),Zp={class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},e1={class:"bg-white dark:bg-gray-800 rounded-lg w-full max-w-lg mx-4 max-h-[90vh] overflow-hidden"},t1={class:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700"},r1={class:"text-lg font-medium text-gray-900 dark:text-white"},n1={class:"p-6 space-y-6"},s1={class:"relative"},o1={label:"国内取引所"},a1=["value"],i1={label:"海外取引所"},l1=["value"],c1={label:"ソフトウェアウォレット"},u1=["value"],d1={label:"ハードウェアウォレット"},f1=["value"],h1={key:0,label:"カスタム"},x1=["value"],g1={key:0},p1={class:"relative"},v1={key:0,class:"absolute right-3 top-2.5"},y1={key:1,class:"mb-4"},m1={class:"max-h-40 overflow-y-auto border border-gray-200 dark:border-gray-600 rounded-md"},w1=["onClick"],b1={class:"flex-shrink-0 h-8 w-8 mr-3"},_1=["src","alt"],E1={key:1,class:"h-8 w-8 bg-gray-300 dark:bg-gray-600 rounded-full flex items-center justify-center"},k1={class:"text-xs font-bold text-gray-600 dark:text-gray-300"},C1={class:"flex-1 min-w-0"},D1={class:"text-sm font-medium text-gray-900 dark:text-white truncate"},A1={class:"text-sm text-gray-500 dark:text-gray-400"},B1={key:2},S1={class:"flex items-center p-4 border border-gray-200 dark:border-gray-600 rounded-md bg-gray-50 dark:bg-gray-700"},F1={class:"flex-shrink-0 h-10 w-10 mr-4"},P1=["src","alt"],T1={key:1,class:"h-10 w-10 bg-gray-300 dark:bg-gray-600 rounded-full flex items-center justify-center"},R1={class:"text-sm font-bold text-gray-600 dark:text-gray-300"},I1={class:"flex-1"},$1={class:"text-sm font-medium text-gray-900 dark:text-white"},O1={class:"text-sm text-gray-500 dark:text-gray-400"},U1={key:3,class:"p-3 bg-red-50 dark:bg-red-900/50 border border-red-200 dark:border-red-800 rounded-md"},L1={class:"text-sm text-red-800 dark:text-red-200"},H1={class:"flex justify-end space-x-3 px-6 py-4 border-t border-gray-200 dark:border-gray-700"},M1=["disabled"],G1={key:0},j1={key:1},z1=Qe({__name:"AddHoldingModal",props:{holding:{}},emits:["close","saved"],setup(t,{emit:e}){const r=t,n=e,s=En(),o=bs(),a=ws(),i=ue(()=>!!r.holding),l=Q(""),u=Q(""),c=Q(""),d=Q(null),f=Q(""),h=Q(""),m=Q(!1),y=Q(""),v=ue(()=>s.searchResults),p=ue(()=>o.getLocationsByType("domestic_cex")),x=ue(()=>o.getLocationsByType("global_cex")),w=ue(()=>o.getLocationsByType("sw_wallet")),b=ue(()=>o.getLocationsByType("hw_wallet")),E=ue(()=>o.getLocationsByType("custom")),k=ue(()=>{const F=l.value&&l.value!=="custom",P=l.value==="custom"&&u.value.trim(),T=d.value,I=parseFloat(f.value)>0;return(F||P)&&T&&I});let _=null;function C(){_&&clearTimeout(_),_=setTimeout(()=>{c.value.trim()?s.searchTokens(c.value):s.clearSearch()},300)}function S(F){d.value=F,s.clearSearch(),c.value=""}async function A(){var F;if(k.value)try{m.value=!0,y.value="";let P=l.value;l.value==="custom"&&(P=(await o.addCustomLocation(u.value.trim())).id),d.value&&await s.addToken({id:d.value.id,symbol:d.value.symbol,name:d.value.name,iconUrl:d.value.iconUrl});const T={locationId:P,symbol:d.value.symbol.toUpperCase(),quantity:parseFloat(f.value),note:h.value.trim()||void 0};let I=!1;if(i.value&&r.holding?I=await a.updateHolding(r.holding.id,T):I=await a.addHolding(T),I){n("saved");try{const{metadataService:K}=await ce(async()=>{const{metadataService:fe}=await import("./metadata.service-8MYvfiJN.js");return{metadataService:fe}},[]),{syncService:j}=await ce(async()=>{const{syncService:fe}=await Promise.resolve().then(()=>zr);return{syncService:fe}},void 0),Y=new Date;let te;if(i.value&&r.holding)te=r.holding.id;else{const{dbV2:fe}=await ce(async()=>{const{dbV2:U}=await Promise.resolve().then(()=>ho);return{dbV2:U}},void 0);te=((F=(await fe.holdings.orderBy("updatedAt").reverse().limit(1).toArray())[0])==null?void 0:F.id)||Y.getTime()}const xe={isNew:!i.value,isModified:i.value,isDeleted:!1,isSynced:!j.isEnabled.value,lastModified:Y,lastSyncTime:j.isEnabled.value?null:Y,version:1};await K.updateCacheForItem("holding",te,xe),console.log("[DEBUG] Holding metadata updated after save for ID:",te,"isEditing:",i.value,"syncEnabled:",j.isEnabled.value)}catch(K){console.warn("[DEBUG] Holding metadata update failed:",K)}try{const{syncService:K}=await ce(async()=>{const{syncService:j}=await Promise.resolve().then(()=>zr);return{syncService:j}},void 0);if(K.isEnabled.value&&K.hasCloudPassword.value){console.log("[DEBUG] Holding saved - triggering auto sync"),await new Promise(Y=>setTimeout(Y,200));const j=await K.performSync();j.success?console.log("[DEBUG] Holding saved - auto sync completed successfully"):(console.warn("[DEBUG] Holding saved - auto sync failed:",j.message),j.conflictData&&console.log("[DEBUG] Holding saved - conflict detected during auto sync"))}else console.log("[DEBUG] Holding saved - auto sync skipped: enabled =",K.isEnabled.value,"hasPassword =",K.hasCloudPassword.value)}catch(K){console.warn("[DEBUG] Holding saved - auto sync failed:",K)}}else y.value=i.value?"データの更新に失敗しました":"データの追加に失敗しました"}catch(P){y.value="エラーが発生しました: "+P.message,console.error("Failed to save holding:",P)}finally{m.value=!1}}return ar(()=>r.holding,F=>{if(F){l.value=F.locationId,f.value=F.quantity.toString(),h.value=F.note||"";const P=s.tokens.find(T=>T.symbol===F.symbol);P&&(d.value={id:P.id,symbol:P.symbol,name:P.name,iconUrl:P.iconUrl})}},{immediate:!0}),gr(async()=>{console.log("[DEBUG] AddHoldingModal - starting data load");const{dbV2:F}=await ce(async()=>{const{dbV2:I}=await Promise.resolve().then(()=>ho);return{dbV2:I}},void 0),P=await F.locations.count();console.log("[DEBUG] AddHoldingModal - database location count before load:",P),await Promise.all([s.loadTokens(),o.loadLocations()]);const T=await F.locations.count();console.log("[DEBUG] AddHoldingModal - database location count after load:",T),console.log("[DEBUG] AddHoldingModal - data load completed"),console.log("[DEBUG] Total locations loaded:",o.locations.length),console.log("[DEBUG] Domestic CEX:",p.value.length),console.log("[DEBUG] Global CEX:",x.value.length),console.log("[DEBUG] SW Wallets:",w.value.length),console.log("[DEBUG] HW Wallets:",b.value.length),console.log("[DEBUG] AddHoldingModal - actual location data:",o.locations.map(I=>({id:I.id,name:I.name,type:I.type})))}),(F,P)=>(O(),L("div",Zp,[g("div",e1,[g("div",t1,[g("h3",r1,Z(i.value?"保有データを編集":"保有データを追加"),1),g("button",{onClick:P[0]||(P[0]=T=>F.$emit("close")),class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},P[7]||(P[7]=[g("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[g("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),g("div",n1,[g("div",null,[P[10]||(P[10]=g("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," 場所 ",-1)),g("div",s1,[ct(g("select",{"onUpdate:modelValue":P[1]||(P[1]=T=>l.value=T),class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:text-white"},[P[8]||(P[8]=g("option",{value:""},"場所を選択してください",-1)),g("optgroup",o1,[(O(!0),L(Oe,null,_t(p.value,T=>(O(),L("option",{key:T.id,value:T.id},Z(T.name),9,a1))),128))]),g("optgroup",i1,[(O(!0),L(Oe,null,_t(x.value,T=>(O(),L("option",{key:T.id,value:T.id},Z(T.name),9,l1))),128))]),g("optgroup",c1,[(O(!0),L(Oe,null,_t(w.value,T=>(O(),L("option",{key:T.id,value:T.id},Z(T.name),9,u1))),128))]),g("optgroup",d1,[(O(!0),L(Oe,null,_t(b.value,T=>(O(),L("option",{key:T.id,value:T.id},Z(T.name),9,f1))),128))]),E.value.length>0?(O(),L("optgroup",h1,[(O(!0),L(Oe,null,_t(E.value,T=>(O(),L("option",{key:T.id,value:T.id},Z(T.name),9,x1))),128))])):oe("",!0),P[9]||(P[9]=g("option",{value:"custom"},"その他（カスタム）",-1))],512),[[qi,l.value]])])]),l.value==="custom"?(O(),L("div",g1,[P[11]||(P[11]=g("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," カスタム場所名 ",-1)),ct(g("input",{"onUpdate:modelValue":P[2]||(P[2]=T=>u.value=T),type:"text",placeholder:"場所名を入力...",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:text-white"},null,512),[[Ot,u.value]])])):oe("",!0),g("div",null,[P[13]||(P[13]=g("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," 通貨 ",-1)),g("div",p1,[ct(g("input",{"onUpdate:modelValue":P[3]||(P[3]=T=>c.value=T),onInput:C,type:"text",placeholder:"通貨名またはティッカーで検索",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:text-white"},null,544),[[Ot,c.value]]),ke(s).isSearching?(O(),L("div",v1,P[12]||(P[12]=[g("div",{class:"animate-spin rounded-full h-5 w-5 border-b-2 border-indigo-600"},null,-1)]))):oe("",!0)])]),v.value.length>0?(O(),L("div",y1,[P[14]||(P[14]=g("h4",{class:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3"},"検索結果",-1)),g("div",m1,[(O(!0),L(Oe,null,_t(v.value,T=>(O(),L("div",{key:T.id,onClick:I=>S(T),class:"flex items-center p-3 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer border-b border-gray-200 dark:border-gray-600 last:border-b-0"},[g("div",b1,[T.iconUrl?(O(),L("img",{key:0,src:T.iconUrl,alt:T.symbol,class:"h-8 w-8 rounded-full"},null,8,_1)):(O(),L("div",E1,[g("span",k1,Z(T.symbol.charAt(0)),1)]))]),g("div",C1,[g("div",D1,Z(T.name),1),g("div",A1,Z(T.symbol),1)])],8,w1))),128))])])):oe("",!0),d.value?(O(),L("div",B1,[P[15]||(P[15]=g("h4",{class:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3"},"選択された通貨",-1)),g("div",S1,[g("div",F1,[d.value.iconUrl?(O(),L("img",{key:0,src:d.value.iconUrl,alt:d.value.symbol,class:"h-10 w-10 rounded-full"},null,8,P1)):(O(),L("div",T1,[g("span",R1,Z(d.value.symbol.charAt(0)),1)]))]),g("div",I1,[g("div",$1,Z(d.value.name),1),g("div",O1,Z(d.value.symbol),1)])])])):oe("",!0),g("div",null,[P[16]||(P[16]=g("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," 数量 ",-1)),ct(g("input",{"onUpdate:modelValue":P[4]||(P[4]=T=>f.value=T),type:"number",step:"0.00000001",min:"0",placeholder:"0.00000000",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:text-white"},null,512),[[Ot,f.value]])]),g("div",null,[P[17]||(P[17]=g("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," メモ（任意） ",-1)),ct(g("input",{"onUpdate:modelValue":P[5]||(P[5]=T=>h.value=T),type:"text",placeholder:"メモを入力...",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:text-white"},null,512),[[Ot,h.value]])]),y.value?(O(),L("div",U1,[g("p",L1,Z(y.value),1)])):oe("",!0)]),g("div",H1,[g("button",{onClick:P[6]||(P[6]=T=>F.$emit("close")),class:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-600 hover:bg-gray-200 dark:hover:bg-gray-500 rounded-md"}," キャンセル "),g("button",{onClick:A,disabled:!k.value||m.value,class:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed rounded-md"},[m.value?(O(),L("span",G1,Z(i.value?"更新中...":"追加中..."),1)):(O(),L("span",j1,Z(i.value?"更新":"追加"),1))],8,M1)])])]))}}),N1={class:"space-y-6"},K1={class:"flex justify-between items-center"},V1={class:"bg-white dark:bg-gray-800 shadow-sm rounded-lg overflow-hidden"},q1={class:"overflow-x-auto"},W1={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},Y1={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},Q1={key:0},X1={class:"px-6 py-4 whitespace-nowrap"},J1={class:"text-sm text-gray-900 dark:text-white"},Z1={class:"text-sm text-gray-500 dark:text-gray-400"},ev={class:"px-6 py-4 whitespace-nowrap"},tv={class:"flex items-center"},rv={class:"flex-shrink-0 h-8 w-8"},nv=["src","alt"],sv={key:1,class:"h-8 w-8 bg-gray-300 dark:bg-gray-600 rounded-full flex items-center justify-center"},ov={class:"text-xs font-bold text-gray-600 dark:text-gray-300"},av={class:"ml-3"},iv={class:"text-sm font-medium text-gray-900 dark:text-white"},lv={class:"text-sm text-gray-500 dark:text-gray-400"},cv={class:"px-6 py-4 whitespace-nowrap text-right"},uv={class:"text-sm text-gray-900 dark:text-white"},dv={class:"px-6 py-4"},fv=["value","onBlur"],hv={class:"px-6 py-4 whitespace-nowrap text-center"},xv={class:"flex items-center justify-center space-x-2"},gv=["onClick"],pv=["onClick"],vv={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},yv={class:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-md mx-4"},mv={class:"text-sm text-gray-600 dark:text-gray-400 mb-6"},wv=Qe({__name:"EditView",setup(t){const e=ws(),r=En(),n=bs(),s=Q(!1),o=Q(null),a=Q(null),i={domestic_cex:"国内取引所",global_cex:"海外取引所",sw_wallet:"ソフトウェアウォレット",hw_wallet:"ハードウェアウォレット",custom:"カスタム"};function l(w){const b=n.locations.find(E=>E.id===w);return(b==null?void 0:b.name)||"Unknown"}function u(w){const b=n.locations.find(E=>E.id===w);return b?i[b.type]:""}function c(w){const b=r.tokens.find(E=>E.symbol===w);return b==null?void 0:b.iconUrl}function d(w){const b=r.tokens.find(E=>E.symbol===w);return b==null?void 0:b.name}function f(w){o.value=w}function h(w){a.value=w}function m(){a.value=null}async function y(){a.value&&(await e.deleteHolding(a.value.id),a.value=null)}function v(){s.value=!1,o.value=null}function p(){v(),e.loadHoldings()}async function x(w,b){await e.updateHolding(w,{note:b})}return gr(async()=>{await Promise.all([r.loadTokens(),n.loadLocations(),e.loadHoldings()])}),(w,b)=>(O(),L("div",N1,[g("div",K1,[b[2]||(b[2]=g("h2",{class:"text-2xl font-bold text-gray-900 dark:text-white"}," 保有数量入力 ",-1)),g("button",{onClick:b[0]||(b[0]=E=>s.value=!0),class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 dark:focus:ring-offset-gray-900"},b[1]||(b[1]=[g("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[g("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),We(" 通貨を追加 ")]))]),g("div",V1,[g("div",q1,[g("table",W1,[b[6]||(b[6]=g("thead",{class:"bg-gray-50 dark:bg-gray-700"},[g("tr",null,[g("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," 場所 "),g("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," 通貨 "),g("th",{scope:"col",class:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," 数量 "),g("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," メモ "),g("th",{scope:"col",class:"px-6 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," 操作 ")])],-1)),g("tbody",Y1,[ke(e).holdings.length===0?(O(),L("tr",Q1,b[3]||(b[3]=[g("td",{colspan:"5",class:"px-6 py-12 text-center text-gray-500 dark:text-gray-400"},[g("div",{class:"flex flex-col items-center"},[g("svg",{class:"w-12 h-12 mb-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[g("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})]),g("p",{class:"text-lg font-medium mb-2"},"保有データがありません"),g("p",{class:"text-sm"},"「通貨を追加」ボタンから仮想通貨を追加してください")])],-1)]))):oe("",!0),(O(!0),L(Oe,null,_t(ke(e).holdings,E=>(O(),L("tr",{key:E.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700"},[g("td",X1,[g("div",J1,Z(l(E.locationId)),1),g("div",Z1,Z(u(E.locationId)),1)]),g("td",ev,[g("div",tv,[g("div",rv,[c(E.symbol)?(O(),L("img",{key:0,src:c(E.symbol),alt:E.symbol,class:"h-8 w-8 rounded-full"},null,8,nv)):(O(),L("div",sv,[g("span",ov,Z(E.symbol.charAt(0)),1)]))]),g("div",av,[g("div",iv,Z(E.symbol),1),g("div",lv,Z(d(E.symbol)||"不明"),1)])])]),g("td",cv,[g("div",uv,Z(ke(ki)(E.quantity)),1)]),g("td",dv,[g("input",{value:E.note||"",onBlur:k=>x(E.id,k.target.value),type:"text",placeholder:"メモを入力...",class:"w-full text-sm text-gray-900 dark:text-white bg-transparent border-none focus:outline-none focus:ring-0 placeholder-gray-400"},null,40,fv)]),g("td",hv,[g("div",xv,[g("button",{onClick:k=>f(E),class:"text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-300",title:"編集"},b[4]||(b[4]=[g("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[g("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)]),8,gv),g("button",{onClick:k=>h(E),class:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:"削除"},b[5]||(b[5]=[g("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[g("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,pv)])])]))),128))])])])]),s.value||o.value?(O(),Ct(z1,{key:0,holding:o.value,onClose:v,onSaved:p},null,8,["holding"])):oe("",!0),a.value?(O(),L("div",vv,[g("div",yv,[b[7]||(b[7]=g("h3",{class:"text-lg font-medium text-gray-900 dark:text-white mb-4"}," 保有データを削除 ",-1)),g("p",mv,Z(l(a.value.locationId))+"の"+Z(a.value.symbol)+"を削除してもよろしいですか？この操作は元に戻せません。 ",1),g("div",{class:"flex justify-end space-x-3"},[g("button",{onClick:m,class:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-600 hover:bg-gray-200 dark:hover:bg-gray-500 rounded-md"}," キャンセル "),g("button",{onClick:y,class:"px-4 py-2 text-sm font-medium text-white bg-red-600 hover:bg-red-700 rounded-md"}," 削除 ")])])])):oe("",!0)]))}});class Ad{constructor(){_e(this,"idleTimer",null);_e(this,"warningTimer",null);_e(this,"IDLE_TIMEOUT",30*60*1e3);_e(this,"WARNING_TIME",25*60*1e3);_e(this,"onWarningCallback");_e(this,"onLogoutCallback")}async isFirstTimeSetup(){return!(await Ee.getAuthState()).passwordHash}async setupPassword(e){const r=this.validatePassword(e);if(!r.isValid)return{success:!1,error:r.errors.join(", ")};try{const{hash:n,salt:s}=await xt.hashPassword(e),{key:o}=await xt.deriveKey(e);return await Ee.setAuthState({isAuthenticated:!0,passwordHash:n,salt:s}),Ee.setEncryptionKey(o),await Ee.migrateUnencryptedData(),{success:!0}}catch(n){return console.error("Failed to setup password:",n),{success:!1,error:"パスワードの設定に失敗しました"}}}async login(e){try{const r=await Ee.getAuthState();if(!r.passwordHash||!r.salt)return{success:!1,error:"パスワードが設定されていません"};if(!await xt.verifyPassword(e,r.passwordHash,r.salt))return{success:!1,error:"パスワードが正しくありません"};const s=new Uint8Array(this.base64ToArrayBuffer(r.salt)),{key:o}=await xt.deriveKey(e,s);Ee.setEncryptionKey(o);const a={...r,isAuthenticated:!0};console.log("[DEBUG] Setting auth state to:",a),await Ee.setAuthState(a);const i=await Ee.getAuthState();return console.log("[DEBUG] Verified auth state after setting:",i),console.log("[DEBUG] Login completed - auto sync disabled to prevent conflicts"),{success:!0}}catch(r){return console.error("Login failed:",r),{success:!1,error:"ログインに失敗しました"}}}async changePassword(e,r){const n=this.validatePassword(r);if(!n.isValid)return{success:!1,error:n.errors.join(", ")};try{const s=await Ee.getAuthState();if(!s.passwordHash||!s.salt)return{success:!1,error:"パスワードが設定されていません"};if(!await xt.verifyPassword(e,s.passwordHash,s.salt))return{success:!1,error:"現在のパスワードが正しくありません"};const{hash:a,salt:i}=await xt.hashPassword(r),{key:l}=await xt.deriveKey(r),u=await Ee.getHoldings();Ee.setEncryptionKey(l);for(const c of u)await Ee.updateHolding(c.id,{quantity:c.quantity,locationId:c.locationId,note:c.note,symbol:c.symbol});return await Ee.setAuthState({isAuthenticated:!0,passwordHash:a,salt:i}),{success:!0}}catch(s){return console.error("Failed to change password:",s),{success:!1,error:"パスワードの変更に失敗しました"}}}async logout(){console.log("[DEBUG] authService.logout() called - Stack trace:"),console.trace(),this.clearTimers(),Ee.clearEncryptionKey();const e=await Ee.getAuthState();console.log("[DEBUG] logout() - setting isAuthenticated to false"),await Ee.setAuthState({...e,isAuthenticated:!1})}async resetAndClearData(){try{this.clearTimers(),await Ee.forceReset(),Ee.clearEncryptionKey(),localStorage.clear();try{await this.clearIndexedDB("CryptoPortfolioDB"),await this.clearIndexedDB("CryptoPortfolioDBV2")}catch(e){console.warn("Failed to clear IndexedDB:",e)}console.log("All data cleared successfully")}catch(e){throw console.error("Failed to reset data:",e),e}}clearIndexedDB(e){return new Promise((r,n)=>{const s=indexedDB.deleteDatabase(e);s.onsuccess=()=>r(),s.onerror=()=>n(s.error),s.onblocked=()=>{console.warn(`IndexedDB ${e} deletion blocked`),r()}})}async isAuthenticated(){const e=await Ee.getAuthState();return console.log("[DEBUG] authService.isAuthenticated - authState:",e),e.isAuthenticated}async isUnlockedAndAuthenticated(){return(await Ee.getAuthState()).isAuthenticated&&Ee.isUnlocked()}async unlockWithPassword(e){try{const r=await Ee.getAuthState();if(console.log("[DEBUG] unlockWithPassword - authState:",r),!r.passwordHash||!r.salt)return{success:!1,error:"認証情報が見つかりません"};if(!await xt.verifyPassword(e,r.passwordHash,r.salt))return{success:!1,error:"パスワードが正しくありません"};const s=new Uint8Array(this.base64ToArrayBuffer(r.salt)),{key:o}=await xt.deriveKey(e,s);return Ee.setEncryptionKey(o),await Ee.setAuthState({...r,isAuthenticated:!0}),console.log("[DEBUG] unlockWithPassword - encryption key set, storage unlocked:",Ee.isUnlocked()),{success:!0}}catch(r){return console.error("Unlock failed:",r),{success:!1,error:"ロック解除に失敗しました"}}}validatePassword(e){const r=[];return e.length<8&&r.push("パスワードは8文字以上である必要があります"),/[A-Z]/.test(e)||r.push("大文字を含む必要があります"),/[a-z]/.test(e)||r.push("小文字を含む必要があります"),/[0-9]/.test(e)||r.push("数字を含む必要があります"),{isValid:r.length===0,errors:r}}getPasswordStrength(e){let r=0;return e.length>=8&&(r+=25),e.length>=12&&(r+=25),/[A-Z]/.test(e)&&(r+=12.5),/[a-z]/.test(e)&&(r+=12.5),/[0-9]/.test(e)&&(r+=12.5),/[^A-Za-z0-9]/.test(e)&&(r+=12.5),Math.min(100,r)}startIdleTimer(){this.clearTimers(),this.warningTimer=window.setTimeout(()=>{var e;(e=this.onWarningCallback)==null||e.call(this)},this.WARNING_TIME),this.idleTimer=window.setTimeout(()=>{var e;this.logout(),(e=this.onLogoutCallback)==null||e.call(this)},this.IDLE_TIMEOUT)}clearTimers(){this.idleTimer&&(clearTimeout(this.idleTimer),this.idleTimer=null),this.warningTimer&&(clearTimeout(this.warningTimer),this.warningTimer=null)}resetIdleTimer(){Ee.isUnlocked()&&this.startIdleTimer()}extendSession(){this.resetIdleTimer()}onWarning(e){this.onWarningCallback=e}onTimeout(e){this.onLogoutCallback=e}getRemainingTime(){return this.idleTimer?this.IDLE_TIMEOUT:0}base64ToArrayBuffer(e){const r=atob(e),n=new Uint8Array(r.length);for(let s=0;s<r.length;s++)n[s]=r.charCodeAt(s);return n.buffer}}const Ur=new Ad,xn=Object.freeze(Object.defineProperty({__proto__:null,AuthService:Ad,authService:Ur},Symbol.toStringTag,{value:"Module"})),Bd=ig({history:Ox(),routes:[{path:"/",redirect:"/summary"},{path:"/login",name:"login",component:()=>ce(()=>import("./LoginForm-C-GBhCdC.js"),[]),meta:{title:"ログイン",requiresAuth:!1}},{path:"/summary",name:"summary",component:Jp,meta:{title:"ポートフォリオ",requiresAuth:!0}},{path:"/edit",name:"edit",component:wv,meta:{title:"保有数量入力",requiresAuth:!0}}]});Bd.beforeEach(async(t,e,r)=>{console.log("[DEBUG] Router guard - navigating to:",t.path);const n=t.meta.requiresAuth!==!1;let s=!1;try{s=await Ur.isAuthenticated()}catch(o){console.error("[DEBUG] Router guard - auth check failed:",o),s=!1}console.log("[DEBUG] Router guard - requiresAuth:",n,"isAuthenticated:",s),n&&!s?(console.log("[DEBUG] Router guard - redirecting to /login"),r("/login")):t.name==="login"&&s?(console.log("[DEBUG] Router guard - redirecting to /summary"),r("/summary")):(console.log("[DEBUG] Router guard - allowing navigation"),r())});const bv={class:"fixed top-4 right-4 z-50 space-y-2"},_v={class:"p-4"},Ev={class:"flex items-start"},kv={class:"flex-shrink-0"},Cv={key:0,class:"h-6 w-6 text-green-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Dv={key:1,class:"h-6 w-6 text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Av={key:2,class:"h-6 w-6 text-blue-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Bv={key:3,class:"h-6 w-6 text-yellow-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Sv={class:"ml-3 w-0 flex-1 pt-0.5"},Fv={class:"text-sm font-medium text-gray-900 dark:text-white"},Pv={key:0,class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},Tv={class:"ml-4 flex-shrink-0 flex"},Rv=["onClick"],Iv={key:0,class:"bg-gray-200 dark:bg-gray-600 h-1"},$v=Qe({__name:"Toast",setup(t,{expose:e}){const r=Qr([]);let n=0;function s(l,u,c,d=5e3){const f=`toast-${++n}`,h={id:f,type:l,title:u,message:c,duration:d,entering:!1,progress:100};return r.push(h),setTimeout(()=>{h.entering=!0},10),d>0&&(setTimeout(()=>{h.progress=0},100),setTimeout(()=>{o(f)},d+100)),f}function o(l){const u=r.findIndex(c=>c.id===l);if(u>-1){const c=r[u];c.entering=!1,setTimeout(()=>{r.splice(u,1)},300)}}function a(){r.splice(0,r.length)}return window.showToast={success:(l,u,c)=>s("success",l,u,c),error:(l,u,c)=>s("error",l,u,c),info:(l,u,c)=>s("info",l,u,c),warning:(l,u,c)=>s("warning",l,u,c)},e({useToast:()=>({success:(l,u,c)=>s("success",l,u,c),error:(l,u,c)=>s("error",l,u,c),info:(l,u,c)=>s("info",l,u,c),warning:(l,u,c)=>s("warning",l,u,c),clear:a})}),(l,u)=>(O(),L("div",bv,[(O(!0),L(Oe,null,_t(r,c=>(O(),L("div",{key:c.id,class:He(["max-w-sm w-full bg-white dark:bg-gray-800 shadow-lg rounded-lg pointer-events-auto ring-1 ring-black ring-opacity-5 overflow-hidden transform transition-all duration-300",c.entering?"translate-x-0 opacity-100":"translate-x-full opacity-0"])},[g("div",_v,[g("div",Ev,[g("div",kv,[c.type==="success"?(O(),L("svg",Cv,u[0]||(u[0]=[g("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)]))):c.type==="error"?(O(),L("svg",Dv,u[1]||(u[1]=[g("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)]))):c.type==="info"?(O(),L("svg",Av,u[2]||(u[2]=[g("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)]))):(O(),L("svg",Bv,u[3]||(u[3]=[g("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.732 15.5c-.77.833.192 2.5 1.732 2.5z"},null,-1)])))]),g("div",Sv,[g("p",Fv,Z(c.title),1),c.message?(O(),L("p",Pv,Z(c.message),1)):oe("",!0)]),g("div",Tv,[g("button",{onClick:d=>o(c.id),class:"bg-white dark:bg-gray-800 rounded-md inline-flex text-gray-400 hover:text-gray-500 dark:hover:text-gray-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"},u[4]||(u[4]=[g("span",{class:"sr-only"},"閉じる",-1),g("svg",{class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[g("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)]),8,Rv)])])]),c.duration?(O(),L("div",Iv,[g("div",{class:He(["h-full transition-all ease-linear",c.type==="success"?"bg-green-400":c.type==="error"?"bg-red-400":c.type==="info"?"bg-blue-400":"bg-yellow-400"]),style:ds(`width: ${c.progress}%; transition-duration: ${c.duration}ms`)},null,6)])):oe("",!0)],2))),128))]))}}),$t={clientId:"330109580011-ipcks6cfrjmdjcm9rt0ff8n0qcs1fbci.apps.googleusercontent.com",apiKey:"",appFolder:"CryptoPortfolioApp",backupFileName:"portfolio-backup.json",discoveryDoc:"https://www.googleapis.com/discovery/v1/apis/drive/v3/rest",scopes:["https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.appdata"]},D0={autoSyncInterval:3e5,maxBackupSize:10*1024*1024},Ft={AUTH_FAILED:"Google認証に失敗しました",UPLOAD_FAILED:"データのアップロードに失敗しました",DOWNLOAD_FAILED:"データのダウンロードに失敗しました",ENCRYPTION_FAILED:"データの暗号化に失敗しました",DECRYPTION_FAILED:"データの復号化に失敗しました",INVALID_PASSWORD:"クラウドパスワードが正しくありません",QUOTA_EXCEEDED:"Google Driveの容量制限に達しました"};class Ov{constructor(){_e(this,"_isInitialized",Q(!1));_e(this,"_isAuthenticated",Q(!1));_e(this,"_isLoading",Q(!1));_e(this,"_user",Q(null));_e(this,"_error",Q(null));_e(this,"authInstance",null);_e(this,"gapiLoaded",!1);_e(this,"accessToken",null);this.loadPersistedAuthState(),this.initializeGoogleAPI()}get isInitialized(){return ue(()=>this._isInitialized.value)}get isAuthenticated(){return ue(()=>this._isAuthenticated.value)}get isLoading(){return ue(()=>this._isLoading.value)}get user(){return ue(()=>this._user.value)}get error(){return ue(()=>this._error.value)}async initializeGoogleAPI(){try{this._isLoading.value=!0,this._error.value=null,$t.clientId,this.gapiLoaded||await this.loadGoogleAPI(),await new Promise((e,r)=>{window.gapi.load("client",{callback:e,onerror:r})}),await window.gapi.client.init({apiKey:$t.apiKey,discoveryDocs:[$t.discoveryDoc]}),window.google.accounts.id.initialize({client_id:$t.clientId,callback:this.handleCredentialResponse.bind(this)}),this.authInstance=window.google.accounts.oauth2.initTokenClient({client_id:$t.clientId,scope:$t.scopes.join(" "),callback:this.handleTokenResponse.bind(this)}),this.accessToken&&window.gapi.client.setToken({access_token:this.accessToken}),this._isInitialized.value=!0,console.log("Google API initialized successfully")}catch(e){console.error("Failed to initialize Google API:",e),console.error("Error details:",e.message||e),console.error("Client ID:",$t.clientId),this._error.value=Ft.AUTH_FAILED}finally{this._isLoading.value=!1}}async loadGoogleAPI(){return new Promise((e,r)=>{if(window.google&&window.gapi){console.log("Google APIs already loaded"),this.gapiLoaded=!0,e();return}console.log("Loading Google Identity Services...");const n=document.createElement("script");n.src="https://accounts.google.com/gsi/client",n.onload=()=>{console.log("Google Identity Services loaded");const s=document.createElement("script");s.src="https://apis.google.com/js/api.js",s.onload=()=>{console.log("Google API client loaded successfully"),this.gapiLoaded=!0,e()},s.onerror=()=>{console.error("Failed to load Google API client"),r(new Error("Failed to load Google API client"))},document.head.appendChild(s)},n.onerror=()=>{console.error("Failed to load Google Identity Services"),r(new Error("Failed to load Google Identity Services"))},document.head.appendChild(n)})}handleCredentialResponse(e){console.log("ID token received:",e.credential)}async handleTokenResponse(e){if(console.log("OAuth token received:",e),e.access_token){this.accessToken=e.access_token,window.gapi.client.setToken({access_token:e.access_token}),this._isAuthenticated.value=!0,this._error.value=null;try{const{googleDriveApiService:r}=await ce(async()=>{const{googleDriveApiService:s}=await Promise.resolve().then(()=>xo);return{googleDriveApiService:s}},void 0),n=await r.getUserInfo();this._user.value={id:n.email,email:n.email,name:n.name,picture:n.picture}}catch(r){console.error("Failed to get user info:",r),this._user.value={id:"unknown",email:"unknown@example.com",name:"Unknown User",picture:void 0}}this.persistAuthState()}}handleSignOut(){this._user.value=null,this._isAuthenticated.value=!1,this.accessToken=null,window.gapi.client.setToken(null),this.clearPersistedAuthState()}loadPersistedAuthState(){try{const e=localStorage.getItem("google_auth_state");if(e){const r=JSON.parse(e);r.accessToken&&r.expiresAt>Date.now()?(this.accessToken=r.accessToken,this._isAuthenticated.value=!0,this._user.value=r.user||{id:"unknown",email:"unknown@example.com",name:"Unknown User",picture:void 0}):this.clearPersistedAuthState()}}catch(e){console.error("Failed to load persisted auth state:",e),this.clearPersistedAuthState()}}persistAuthState(){try{const e={accessToken:this.accessToken,user:this._user.value,expiresAt:Date.now()+36e5};localStorage.setItem("google_auth_state",JSON.stringify(e))}catch(e){console.error("Failed to persist auth state:",e)}}clearPersistedAuthState(){try{localStorage.removeItem("google_auth_state")}catch(e){console.error("Failed to clear persisted auth state:",e)}}async signIn(){try{if(this._isLoading.value=!0,this._error.value=null,!this.authInstance)throw new Error("Google Auth not initialized");this.authInstance.requestAccessToken()}catch(e){throw console.error("Sign in failed:",e),this._error.value=Ft.AUTH_FAILED,e}finally{this._isLoading.value=!1}}async signOut(){try{this._isLoading.value=!0,this._error.value=null,this.authInstance&&await this.authInstance.signOut()}catch(e){console.error("Sign out failed:",e),this._error.value="サインアウトに失敗しました"}finally{this._isLoading.value=!1}}getAccessToken(){return this._isAuthenticated.value?this.accessToken:null}async refreshToken(){try{return!this.authInstance||!this._isAuthenticated.value?null:(this.authInstance.requestAccessToken(),this.accessToken)}catch(e){return console.error("Failed to refresh token:",e),this._error.value="トークンの更新に失敗しました",null}}clearError(){this._error.value=null}async waitForInitialization(){if(!this._isInitialized.value)return new Promise(e=>{const r=()=>{this._isInitialized.value?e():setTimeout(r,100)};r()})}async forceInitialize(){console.log("Force initializing Google Auth service..."),this._isInitialized.value=!1,this._error.value=null,await this.initializeGoogleAPI()}async authenticateAndInitialize(){try{if(this._isLoading.value=!0,this._error.value=null,this._isInitialized.value||await this.waitForInitialization(),!this.authInstance)throw new Error("Google Auth not initialized");return new Promise((e,r)=>{const n=async s=>{try{if(this.handleTokenResponse(s),s.access_token){const{googleDriveApiService:o}=await ce(async()=>{const{googleDriveApiService:l}=await Promise.resolve().then(()=>xo);return{googleDriveApiService:l}},void 0),a=await o.findBackupFile(),i=a&&a.size&&parseInt(a.size.toString())>0?"existing_user":"new_user";e(i)}else r(new Error("認証に失敗しました"))}catch(o){r(o)}};this.authInstance.callback=n,this.authInstance.requestAccessToken()})}catch(e){throw console.error("統合認証に失敗:",e),this._error.value=this.getAuthErrorMessage(e),e}finally{this._isLoading.value=!1}}getAuthErrorMessage(e){var r,n;return e.error==="access_denied"?`Google Drive との連携が必要です
データの同期にはファイル保存権限が必要です`:e.error==="network_error"||(r=e.message)!=null&&r.includes("network")?`ネットワークエラーが発生しました
接続を確認して再試行してください`:(n=e.message)!=null&&n.includes("Client ID")?`Google Client ID が設定されていません
.envファイルを確認してください`:"認証エラーが発生しました"}}const qe=new Ov;var be=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Uv(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Lv(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return t[n]}})}),r}var Sd={exports:{}};function Hv(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ea={exports:{}};const Mv={},Gv=Object.freeze(Object.defineProperty({__proto__:null,default:Mv},Symbol.toStringTag,{value:"Module"})),jv=Lv(Gv);var A0;function Ce(){return A0||(A0=1,function(t,e){(function(r,n){t.exports=n()})(be,function(){var r=r||function(n,s){var o;if(typeof window<"u"&&window.crypto&&(o=window.crypto),typeof self<"u"&&self.crypto&&(o=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(o=globalThis.crypto),!o&&typeof window<"u"&&window.msCrypto&&(o=window.msCrypto),!o&&typeof be<"u"&&be.crypto&&(o=be.crypto),!o&&typeof Hv=="function")try{o=jv}catch{}var a=function(){if(o){if(typeof o.getRandomValues=="function")try{return o.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof o.randomBytes=="function")try{return o.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},i=Object.create||function(){function x(){}return function(w){var b;return x.prototype=w,b=new x,x.prototype=null,b}}(),l={},u=l.lib={},c=u.Base=function(){return{extend:function(x){var w=i(this);return x&&w.mixIn(x),(!w.hasOwnProperty("init")||this.init===w.init)&&(w.init=function(){w.$super.init.apply(this,arguments)}),w.init.prototype=w,w.$super=this,w},create:function(){var x=this.extend();return x.init.apply(x,arguments),x},init:function(){},mixIn:function(x){for(var w in x)x.hasOwnProperty(w)&&(this[w]=x[w]);x.hasOwnProperty("toString")&&(this.toString=x.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),d=u.WordArray=c.extend({init:function(x,w){x=this.words=x||[],w!=s?this.sigBytes=w:this.sigBytes=x.length*4},toString:function(x){return(x||h).stringify(this)},concat:function(x){var w=this.words,b=x.words,E=this.sigBytes,k=x.sigBytes;if(this.clamp(),E%4)for(var _=0;_<k;_++){var C=b[_>>>2]>>>24-_%4*8&255;w[E+_>>>2]|=C<<24-(E+_)%4*8}else for(var S=0;S<k;S+=4)w[E+S>>>2]=b[S>>>2];return this.sigBytes+=k,this},clamp:function(){var x=this.words,w=this.sigBytes;x[w>>>2]&=4294967295<<32-w%4*8,x.length=n.ceil(w/4)},clone:function(){var x=c.clone.call(this);return x.words=this.words.slice(0),x},random:function(x){for(var w=[],b=0;b<x;b+=4)w.push(a());return new d.init(w,x)}}),f=l.enc={},h=f.Hex={stringify:function(x){for(var w=x.words,b=x.sigBytes,E=[],k=0;k<b;k++){var _=w[k>>>2]>>>24-k%4*8&255;E.push((_>>>4).toString(16)),E.push((_&15).toString(16))}return E.join("")},parse:function(x){for(var w=x.length,b=[],E=0;E<w;E+=2)b[E>>>3]|=parseInt(x.substr(E,2),16)<<24-E%8*4;return new d.init(b,w/2)}},m=f.Latin1={stringify:function(x){for(var w=x.words,b=x.sigBytes,E=[],k=0;k<b;k++){var _=w[k>>>2]>>>24-k%4*8&255;E.push(String.fromCharCode(_))}return E.join("")},parse:function(x){for(var w=x.length,b=[],E=0;E<w;E++)b[E>>>2]|=(x.charCodeAt(E)&255)<<24-E%4*8;return new d.init(b,w)}},y=f.Utf8={stringify:function(x){try{return decodeURIComponent(escape(m.stringify(x)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(x){return m.parse(unescape(encodeURIComponent(x)))}},v=u.BufferedBlockAlgorithm=c.extend({reset:function(){this._data=new d.init,this._nDataBytes=0},_append:function(x){typeof x=="string"&&(x=y.parse(x)),this._data.concat(x),this._nDataBytes+=x.sigBytes},_process:function(x){var w,b=this._data,E=b.words,k=b.sigBytes,_=this.blockSize,C=_*4,S=k/C;x?S=n.ceil(S):S=n.max((S|0)-this._minBufferSize,0);var A=S*_,F=n.min(A*4,k);if(A){for(var P=0;P<A;P+=_)this._doProcessBlock(E,P);w=E.splice(0,A),b.sigBytes-=F}return new d.init(w,F)},clone:function(){var x=c.clone.call(this);return x._data=this._data.clone(),x},_minBufferSize:0});u.Hasher=v.extend({cfg:c.extend(),init:function(x){this.cfg=this.cfg.extend(x),this.reset()},reset:function(){v.reset.call(this),this._doReset()},update:function(x){return this._append(x),this._process(),this},finalize:function(x){x&&this._append(x);var w=this._doFinalize();return w},blockSize:16,_createHelper:function(x){return function(w,b){return new x.init(b).finalize(w)}},_createHmacHelper:function(x){return function(w,b){return new p.HMAC.init(x,b).finalize(w)}}});var p=l.algo={};return l}(Math);return r})}(ea)),ea.exports}var ta={exports:{}},B0;function Ro(){return B0||(B0=1,function(t,e){(function(r,n){t.exports=n(Ce())})(be,function(r){return function(n){var s=r,o=s.lib,a=o.Base,i=o.WordArray,l=s.x64={};l.Word=a.extend({init:function(u,c){this.high=u,this.low=c}}),l.WordArray=a.extend({init:function(u,c){u=this.words=u||[],c!=n?this.sigBytes=c:this.sigBytes=u.length*8},toX32:function(){for(var u=this.words,c=u.length,d=[],f=0;f<c;f++){var h=u[f];d.push(h.high),d.push(h.low)}return i.create(d,this.sigBytes)},clone:function(){for(var u=a.clone.call(this),c=u.words=this.words.slice(0),d=c.length,f=0;f<d;f++)c[f]=c[f].clone();return u}})}(),r})}(ta)),ta.exports}var ra={exports:{}},S0;function zv(){return S0||(S0=1,function(t,e){(function(r,n){t.exports=n(Ce())})(be,function(r){return function(){if(typeof ArrayBuffer=="function"){var n=r,s=n.lib,o=s.WordArray,a=o.init,i=o.init=function(l){if(l instanceof ArrayBuffer&&(l=new Uint8Array(l)),(l instanceof Int8Array||typeof Uint8ClampedArray<"u"&&l instanceof Uint8ClampedArray||l instanceof Int16Array||l instanceof Uint16Array||l instanceof Int32Array||l instanceof Uint32Array||l instanceof Float32Array||l instanceof Float64Array)&&(l=new Uint8Array(l.buffer,l.byteOffset,l.byteLength)),l instanceof Uint8Array){for(var u=l.byteLength,c=[],d=0;d<u;d++)c[d>>>2]|=l[d]<<24-d%4*8;a.call(this,c,u)}else a.apply(this,arguments)};i.prototype=o}}(),r.lib.WordArray})}(ra)),ra.exports}var na={exports:{}},F0;function Nv(){return F0||(F0=1,function(t,e){(function(r,n){t.exports=n(Ce())})(be,function(r){return function(){var n=r,s=n.lib,o=s.WordArray,a=n.enc;a.Utf16=a.Utf16BE={stringify:function(l){for(var u=l.words,c=l.sigBytes,d=[],f=0;f<c;f+=2){var h=u[f>>>2]>>>16-f%4*8&65535;d.push(String.fromCharCode(h))}return d.join("")},parse:function(l){for(var u=l.length,c=[],d=0;d<u;d++)c[d>>>1]|=l.charCodeAt(d)<<16-d%2*16;return o.create(c,u*2)}},a.Utf16LE={stringify:function(l){for(var u=l.words,c=l.sigBytes,d=[],f=0;f<c;f+=2){var h=i(u[f>>>2]>>>16-f%4*8&65535);d.push(String.fromCharCode(h))}return d.join("")},parse:function(l){for(var u=l.length,c=[],d=0;d<u;d++)c[d>>>1]|=i(l.charCodeAt(d)<<16-d%2*16);return o.create(c,u*2)}};function i(l){return l<<8&4278255360|l>>>8&16711935}}(),r.enc.Utf16})}(na)),na.exports}var sa={exports:{}},P0;function Jr(){return P0||(P0=1,function(t,e){(function(r,n){t.exports=n(Ce())})(be,function(r){return function(){var n=r,s=n.lib,o=s.WordArray,a=n.enc;a.Base64={stringify:function(l){var u=l.words,c=l.sigBytes,d=this._map;l.clamp();for(var f=[],h=0;h<c;h+=3)for(var m=u[h>>>2]>>>24-h%4*8&255,y=u[h+1>>>2]>>>24-(h+1)%4*8&255,v=u[h+2>>>2]>>>24-(h+2)%4*8&255,p=m<<16|y<<8|v,x=0;x<4&&h+x*.75<c;x++)f.push(d.charAt(p>>>6*(3-x)&63));var w=d.charAt(64);if(w)for(;f.length%4;)f.push(w);return f.join("")},parse:function(l){var u=l.length,c=this._map,d=this._reverseMap;if(!d){d=this._reverseMap=[];for(var f=0;f<c.length;f++)d[c.charCodeAt(f)]=f}var h=c.charAt(64);if(h){var m=l.indexOf(h);m!==-1&&(u=m)}return i(l,u,d)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function i(l,u,c){for(var d=[],f=0,h=0;h<u;h++)if(h%4){var m=c[l.charCodeAt(h-1)]<<h%4*2,y=c[l.charCodeAt(h)]>>>6-h%4*2,v=m|y;d[f>>>2]|=v<<24-f%4*8,f++}return o.create(d,f)}}(),r.enc.Base64})}(sa)),sa.exports}var oa={exports:{}},T0;function Kv(){return T0||(T0=1,function(t,e){(function(r,n){t.exports=n(Ce())})(be,function(r){return function(){var n=r,s=n.lib,o=s.WordArray,a=n.enc;a.Base64url={stringify:function(l,u){u===void 0&&(u=!0);var c=l.words,d=l.sigBytes,f=u?this._safe_map:this._map;l.clamp();for(var h=[],m=0;m<d;m+=3)for(var y=c[m>>>2]>>>24-m%4*8&255,v=c[m+1>>>2]>>>24-(m+1)%4*8&255,p=c[m+2>>>2]>>>24-(m+2)%4*8&255,x=y<<16|v<<8|p,w=0;w<4&&m+w*.75<d;w++)h.push(f.charAt(x>>>6*(3-w)&63));var b=f.charAt(64);if(b)for(;h.length%4;)h.push(b);return h.join("")},parse:function(l,u){u===void 0&&(u=!0);var c=l.length,d=u?this._safe_map:this._map,f=this._reverseMap;if(!f){f=this._reverseMap=[];for(var h=0;h<d.length;h++)f[d.charCodeAt(h)]=h}var m=d.charAt(64);if(m){var y=l.indexOf(m);y!==-1&&(c=y)}return i(l,c,f)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function i(l,u,c){for(var d=[],f=0,h=0;h<u;h++)if(h%4){var m=c[l.charCodeAt(h-1)]<<h%4*2,y=c[l.charCodeAt(h)]>>>6-h%4*2,v=m|y;d[f>>>2]|=v<<24-f%4*8,f++}return o.create(d,f)}}(),r.enc.Base64url})}(oa)),oa.exports}var aa={exports:{}},R0;function Zr(){return R0||(R0=1,function(t,e){(function(r,n){t.exports=n(Ce())})(be,function(r){return function(n){var s=r,o=s.lib,a=o.WordArray,i=o.Hasher,l=s.algo,u=[];(function(){for(var y=0;y<64;y++)u[y]=n.abs(n.sin(y+1))*4294967296|0})();var c=l.MD5=i.extend({_doReset:function(){this._hash=new a.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(y,v){for(var p=0;p<16;p++){var x=v+p,w=y[x];y[x]=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360}var b=this._hash.words,E=y[v+0],k=y[v+1],_=y[v+2],C=y[v+3],S=y[v+4],A=y[v+5],F=y[v+6],P=y[v+7],T=y[v+8],I=y[v+9],K=y[v+10],j=y[v+11],Y=y[v+12],te=y[v+13],xe=y[v+14],fe=y[v+15],H=b[0],U=b[1],V=b[2],z=b[3];H=d(H,U,V,z,E,7,u[0]),z=d(z,H,U,V,k,12,u[1]),V=d(V,z,H,U,_,17,u[2]),U=d(U,V,z,H,C,22,u[3]),H=d(H,U,V,z,S,7,u[4]),z=d(z,H,U,V,A,12,u[5]),V=d(V,z,H,U,F,17,u[6]),U=d(U,V,z,H,P,22,u[7]),H=d(H,U,V,z,T,7,u[8]),z=d(z,H,U,V,I,12,u[9]),V=d(V,z,H,U,K,17,u[10]),U=d(U,V,z,H,j,22,u[11]),H=d(H,U,V,z,Y,7,u[12]),z=d(z,H,U,V,te,12,u[13]),V=d(V,z,H,U,xe,17,u[14]),U=d(U,V,z,H,fe,22,u[15]),H=f(H,U,V,z,k,5,u[16]),z=f(z,H,U,V,F,9,u[17]),V=f(V,z,H,U,j,14,u[18]),U=f(U,V,z,H,E,20,u[19]),H=f(H,U,V,z,A,5,u[20]),z=f(z,H,U,V,K,9,u[21]),V=f(V,z,H,U,fe,14,u[22]),U=f(U,V,z,H,S,20,u[23]),H=f(H,U,V,z,I,5,u[24]),z=f(z,H,U,V,xe,9,u[25]),V=f(V,z,H,U,C,14,u[26]),U=f(U,V,z,H,T,20,u[27]),H=f(H,U,V,z,te,5,u[28]),z=f(z,H,U,V,_,9,u[29]),V=f(V,z,H,U,P,14,u[30]),U=f(U,V,z,H,Y,20,u[31]),H=h(H,U,V,z,A,4,u[32]),z=h(z,H,U,V,T,11,u[33]),V=h(V,z,H,U,j,16,u[34]),U=h(U,V,z,H,xe,23,u[35]),H=h(H,U,V,z,k,4,u[36]),z=h(z,H,U,V,S,11,u[37]),V=h(V,z,H,U,P,16,u[38]),U=h(U,V,z,H,K,23,u[39]),H=h(H,U,V,z,te,4,u[40]),z=h(z,H,U,V,E,11,u[41]),V=h(V,z,H,U,C,16,u[42]),U=h(U,V,z,H,F,23,u[43]),H=h(H,U,V,z,I,4,u[44]),z=h(z,H,U,V,Y,11,u[45]),V=h(V,z,H,U,fe,16,u[46]),U=h(U,V,z,H,_,23,u[47]),H=m(H,U,V,z,E,6,u[48]),z=m(z,H,U,V,P,10,u[49]),V=m(V,z,H,U,xe,15,u[50]),U=m(U,V,z,H,A,21,u[51]),H=m(H,U,V,z,Y,6,u[52]),z=m(z,H,U,V,C,10,u[53]),V=m(V,z,H,U,K,15,u[54]),U=m(U,V,z,H,k,21,u[55]),H=m(H,U,V,z,T,6,u[56]),z=m(z,H,U,V,fe,10,u[57]),V=m(V,z,H,U,F,15,u[58]),U=m(U,V,z,H,te,21,u[59]),H=m(H,U,V,z,S,6,u[60]),z=m(z,H,U,V,j,10,u[61]),V=m(V,z,H,U,_,15,u[62]),U=m(U,V,z,H,I,21,u[63]),b[0]=b[0]+H|0,b[1]=b[1]+U|0,b[2]=b[2]+V|0,b[3]=b[3]+z|0},_doFinalize:function(){var y=this._data,v=y.words,p=this._nDataBytes*8,x=y.sigBytes*8;v[x>>>5]|=128<<24-x%32;var w=n.floor(p/4294967296),b=p;v[(x+64>>>9<<4)+15]=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360,v[(x+64>>>9<<4)+14]=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,y.sigBytes=(v.length+1)*4,this._process();for(var E=this._hash,k=E.words,_=0;_<4;_++){var C=k[_];k[_]=(C<<8|C>>>24)&16711935|(C<<24|C>>>8)&4278255360}return E},clone:function(){var y=i.clone.call(this);return y._hash=this._hash.clone(),y}});function d(y,v,p,x,w,b,E){var k=y+(v&p|~v&x)+w+E;return(k<<b|k>>>32-b)+v}function f(y,v,p,x,w,b,E){var k=y+(v&x|p&~x)+w+E;return(k<<b|k>>>32-b)+v}function h(y,v,p,x,w,b,E){var k=y+(v^p^x)+w+E;return(k<<b|k>>>32-b)+v}function m(y,v,p,x,w,b,E){var k=y+(p^(v|~x))+w+E;return(k<<b|k>>>32-b)+v}s.MD5=i._createHelper(c),s.HmacMD5=i._createHmacHelper(c)}(Math),r.MD5})}(aa)),aa.exports}var ia={exports:{}},I0;function Fd(){return I0||(I0=1,function(t,e){(function(r,n){t.exports=n(Ce())})(be,function(r){return function(){var n=r,s=n.lib,o=s.WordArray,a=s.Hasher,i=n.algo,l=[],u=i.SHA1=a.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(c,d){for(var f=this._hash.words,h=f[0],m=f[1],y=f[2],v=f[3],p=f[4],x=0;x<80;x++){if(x<16)l[x]=c[d+x]|0;else{var w=l[x-3]^l[x-8]^l[x-14]^l[x-16];l[x]=w<<1|w>>>31}var b=(h<<5|h>>>27)+p+l[x];x<20?b+=(m&y|~m&v)+1518500249:x<40?b+=(m^y^v)+1859775393:x<60?b+=(m&y|m&v|y&v)-1894007588:b+=(m^y^v)-899497514,p=v,v=y,y=m<<30|m>>>2,m=h,h=b}f[0]=f[0]+h|0,f[1]=f[1]+m|0,f[2]=f[2]+y|0,f[3]=f[3]+v|0,f[4]=f[4]+p|0},_doFinalize:function(){var c=this._data,d=c.words,f=this._nDataBytes*8,h=c.sigBytes*8;return d[h>>>5]|=128<<24-h%32,d[(h+64>>>9<<4)+14]=Math.floor(f/4294967296),d[(h+64>>>9<<4)+15]=f,c.sigBytes=d.length*4,this._process(),this._hash},clone:function(){var c=a.clone.call(this);return c._hash=this._hash.clone(),c}});n.SHA1=a._createHelper(u),n.HmacSHA1=a._createHmacHelper(u)}(),r.SHA1})}(ia)),ia.exports}var la={exports:{}},$0;function il(){return $0||($0=1,function(t,e){(function(r,n){t.exports=n(Ce())})(be,function(r){return function(n){var s=r,o=s.lib,a=o.WordArray,i=o.Hasher,l=s.algo,u=[],c=[];(function(){function h(p){for(var x=n.sqrt(p),w=2;w<=x;w++)if(!(p%w))return!1;return!0}function m(p){return(p-(p|0))*4294967296|0}for(var y=2,v=0;v<64;)h(y)&&(v<8&&(u[v]=m(n.pow(y,1/2))),c[v]=m(n.pow(y,1/3)),v++),y++})();var d=[],f=l.SHA256=i.extend({_doReset:function(){this._hash=new a.init(u.slice(0))},_doProcessBlock:function(h,m){for(var y=this._hash.words,v=y[0],p=y[1],x=y[2],w=y[3],b=y[4],E=y[5],k=y[6],_=y[7],C=0;C<64;C++){if(C<16)d[C]=h[m+C]|0;else{var S=d[C-15],A=(S<<25|S>>>7)^(S<<14|S>>>18)^S>>>3,F=d[C-2],P=(F<<15|F>>>17)^(F<<13|F>>>19)^F>>>10;d[C]=A+d[C-7]+P+d[C-16]}var T=b&E^~b&k,I=v&p^v&x^p&x,K=(v<<30|v>>>2)^(v<<19|v>>>13)^(v<<10|v>>>22),j=(b<<26|b>>>6)^(b<<21|b>>>11)^(b<<7|b>>>25),Y=_+j+T+c[C]+d[C],te=K+I;_=k,k=E,E=b,b=w+Y|0,w=x,x=p,p=v,v=Y+te|0}y[0]=y[0]+v|0,y[1]=y[1]+p|0,y[2]=y[2]+x|0,y[3]=y[3]+w|0,y[4]=y[4]+b|0,y[5]=y[5]+E|0,y[6]=y[6]+k|0,y[7]=y[7]+_|0},_doFinalize:function(){var h=this._data,m=h.words,y=this._nDataBytes*8,v=h.sigBytes*8;return m[v>>>5]|=128<<24-v%32,m[(v+64>>>9<<4)+14]=n.floor(y/4294967296),m[(v+64>>>9<<4)+15]=y,h.sigBytes=m.length*4,this._process(),this._hash},clone:function(){var h=i.clone.call(this);return h._hash=this._hash.clone(),h}});s.SHA256=i._createHelper(f),s.HmacSHA256=i._createHmacHelper(f)}(Math),r.SHA256})}(la)),la.exports}var ca={exports:{}},O0;function Vv(){return O0||(O0=1,function(t,e){(function(r,n,s){t.exports=n(Ce(),il())})(be,function(r){return function(){var n=r,s=n.lib,o=s.WordArray,a=n.algo,i=a.SHA256,l=a.SHA224=i.extend({_doReset:function(){this._hash=new o.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var u=i._doFinalize.call(this);return u.sigBytes-=4,u}});n.SHA224=i._createHelper(l),n.HmacSHA224=i._createHmacHelper(l)}(),r.SHA224})}(ca)),ca.exports}var ua={exports:{}},U0;function Pd(){return U0||(U0=1,function(t,e){(function(r,n,s){t.exports=n(Ce(),Ro())})(be,function(r){return function(){var n=r,s=n.lib,o=s.Hasher,a=n.x64,i=a.Word,l=a.WordArray,u=n.algo;function c(){return i.create.apply(i,arguments)}var d=[c(1116352408,3609767458),c(1899447441,602891725),c(3049323471,3964484399),c(3921009573,2173295548),c(961987163,4081628472),c(1508970993,3053834265),c(2453635748,2937671579),c(2870763221,3664609560),c(3624381080,2734883394),c(310598401,1164996542),c(607225278,1323610764),c(1426881987,3590304994),c(1925078388,4068182383),c(2162078206,991336113),c(2614888103,633803317),c(3248222580,3479774868),c(3835390401,2666613458),c(4022224774,944711139),c(264347078,2341262773),c(604807628,2007800933),c(770255983,1495990901),c(1249150122,1856431235),c(1555081692,3175218132),c(1996064986,2198950837),c(2554220882,3999719339),c(2821834349,766784016),c(2952996808,2566594879),c(3210313671,3203337956),c(3336571891,1034457026),c(3584528711,2466948901),c(113926993,3758326383),c(338241895,168717936),c(666307205,1188179964),c(773529912,1546045734),c(1294757372,1522805485),c(1396182291,2643833823),c(1695183700,2343527390),c(1986661051,1014477480),c(2177026350,1206759142),c(2456956037,344077627),c(2730485921,1290863460),c(2820302411,3158454273),c(3259730800,3505952657),c(3345764771,106217008),c(3516065817,3606008344),c(3600352804,1432725776),c(4094571909,1467031594),c(275423344,851169720),c(430227734,3100823752),c(506948616,1363258195),c(659060556,3750685593),c(883997877,3785050280),c(958139571,3318307427),c(1322822218,3812723403),c(1537002063,2003034995),c(1747873779,3602036899),c(1955562222,1575990012),c(2024104815,1125592928),c(2227730452,2716904306),c(2361852424,442776044),c(2428436474,593698344),c(2756734187,3733110249),c(3204031479,2999351573),c(3329325298,3815920427),c(3391569614,3928383900),c(3515267271,566280711),c(3940187606,3454069534),c(4118630271,4000239992),c(116418474,1914138554),c(174292421,2731055270),c(289380356,3203993006),c(460393269,320620315),c(685471733,587496836),c(852142971,1086792851),c(1017036298,365543100),c(1126000580,2618297676),c(1288033470,3409855158),c(1501505948,4234509866),c(1607167915,987167468),c(1816402316,1246189591)],f=[];(function(){for(var m=0;m<80;m++)f[m]=c()})();var h=u.SHA512=o.extend({_doReset:function(){this._hash=new l.init([new i.init(1779033703,4089235720),new i.init(3144134277,2227873595),new i.init(1013904242,4271175723),new i.init(2773480762,1595750129),new i.init(1359893119,2917565137),new i.init(2600822924,725511199),new i.init(528734635,4215389547),new i.init(1541459225,327033209)])},_doProcessBlock:function(m,y){for(var v=this._hash.words,p=v[0],x=v[1],w=v[2],b=v[3],E=v[4],k=v[5],_=v[6],C=v[7],S=p.high,A=p.low,F=x.high,P=x.low,T=w.high,I=w.low,K=b.high,j=b.low,Y=E.high,te=E.low,xe=k.high,fe=k.low,H=_.high,U=_.low,V=C.high,z=C.low,De=S,me=A,$=F,q=P,ne=T,ie=I,Fe=K,D=j,B=Y,R=te,M=xe,N=fe,G=H,re=U,J=V,X=z,W=0;W<80;W++){var ae,ee,le=f[W];if(W<16)ee=le.high=m[y+W*2]|0,ae=le.low=m[y+W*2+1]|0;else{var pe=f[W-15],we=pe.high,Se=pe.low,Pe=(we>>>1|Se<<31)^(we>>>8|Se<<24)^we>>>7,nt=(Se>>>1|we<<31)^(Se>>>8|we<<24)^(Se>>>7|we<<25),Je=f[W-2],Ze=Je.high,st=Je.low,Pr=(Ze>>>19|st<<13)^(Ze<<3|st>>>29)^Ze>>>6,kn=(st>>>19|Ze<<13)^(st<<3|Ze>>>29)^(st>>>6|Ze<<26),ot=f[W-7],Bt=ot.high,Es=ot.low,ul=f[W-16],Ud=ul.high,dl=ul.low;ae=nt+Es,ee=Pe+Bt+(ae>>>0<nt>>>0?1:0),ae=ae+kn,ee=ee+Pr+(ae>>>0<kn>>>0?1:0),ae=ae+dl,ee=ee+Ud+(ae>>>0<dl>>>0?1:0),le.high=ee,le.low=ae}var Ld=B&M^~B&G,fl=R&N^~R&re,Hd=De&$^De&ne^$&ne,Md=me&q^me&ie^q&ie,Gd=(De>>>28|me<<4)^(De<<30|me>>>2)^(De<<25|me>>>7),hl=(me>>>28|De<<4)^(me<<30|De>>>2)^(me<<25|De>>>7),jd=(B>>>14|R<<18)^(B>>>18|R<<14)^(B<<23|R>>>9),zd=(R>>>14|B<<18)^(R>>>18|B<<14)^(R<<23|B>>>9),xl=d[W],Nd=xl.high,gl=xl.low,mt=X+zd,pr=J+jd+(mt>>>0<X>>>0?1:0),mt=mt+fl,pr=pr+Ld+(mt>>>0<fl>>>0?1:0),mt=mt+gl,pr=pr+Nd+(mt>>>0<gl>>>0?1:0),mt=mt+ae,pr=pr+ee+(mt>>>0<ae>>>0?1:0),pl=hl+Md,Kd=Gd+Hd+(pl>>>0<hl>>>0?1:0);J=G,X=re,G=M,re=N,M=B,N=R,R=D+mt|0,B=Fe+pr+(R>>>0<D>>>0?1:0)|0,Fe=ne,D=ie,ne=$,ie=q,$=De,q=me,me=mt+pl|0,De=pr+Kd+(me>>>0<mt>>>0?1:0)|0}A=p.low=A+me,p.high=S+De+(A>>>0<me>>>0?1:0),P=x.low=P+q,x.high=F+$+(P>>>0<q>>>0?1:0),I=w.low=I+ie,w.high=T+ne+(I>>>0<ie>>>0?1:0),j=b.low=j+D,b.high=K+Fe+(j>>>0<D>>>0?1:0),te=E.low=te+R,E.high=Y+B+(te>>>0<R>>>0?1:0),fe=k.low=fe+N,k.high=xe+M+(fe>>>0<N>>>0?1:0),U=_.low=U+re,_.high=H+G+(U>>>0<re>>>0?1:0),z=C.low=z+X,C.high=V+J+(z>>>0<X>>>0?1:0)},_doFinalize:function(){var m=this._data,y=m.words,v=this._nDataBytes*8,p=m.sigBytes*8;y[p>>>5]|=128<<24-p%32,y[(p+128>>>10<<5)+30]=Math.floor(v/4294967296),y[(p+128>>>10<<5)+31]=v,m.sigBytes=y.length*4,this._process();var x=this._hash.toX32();return x},clone:function(){var m=o.clone.call(this);return m._hash=this._hash.clone(),m},blockSize:1024/32});n.SHA512=o._createHelper(h),n.HmacSHA512=o._createHmacHelper(h)}(),r.SHA512})}(ua)),ua.exports}var da={exports:{}},L0;function qv(){return L0||(L0=1,function(t,e){(function(r,n,s){t.exports=n(Ce(),Ro(),Pd())})(be,function(r){return function(){var n=r,s=n.x64,o=s.Word,a=s.WordArray,i=n.algo,l=i.SHA512,u=i.SHA384=l.extend({_doReset:function(){this._hash=new a.init([new o.init(3418070365,3238371032),new o.init(1654270250,914150663),new o.init(2438529370,812702999),new o.init(355462360,4144912697),new o.init(1731405415,4290775857),new o.init(2394180231,1750603025),new o.init(3675008525,1694076839),new o.init(1203062813,3204075428)])},_doFinalize:function(){var c=l._doFinalize.call(this);return c.sigBytes-=16,c}});n.SHA384=l._createHelper(u),n.HmacSHA384=l._createHmacHelper(u)}(),r.SHA384})}(da)),da.exports}var fa={exports:{}},H0;function Wv(){return H0||(H0=1,function(t,e){(function(r,n,s){t.exports=n(Ce(),Ro())})(be,function(r){return function(n){var s=r,o=s.lib,a=o.WordArray,i=o.Hasher,l=s.x64,u=l.Word,c=s.algo,d=[],f=[],h=[];(function(){for(var v=1,p=0,x=0;x<24;x++){d[v+5*p]=(x+1)*(x+2)/2%64;var w=p%5,b=(2*v+3*p)%5;v=w,p=b}for(var v=0;v<5;v++)for(var p=0;p<5;p++)f[v+5*p]=p+(2*v+3*p)%5*5;for(var E=1,k=0;k<24;k++){for(var _=0,C=0,S=0;S<7;S++){if(E&1){var A=(1<<S)-1;A<32?C^=1<<A:_^=1<<A-32}E&128?E=E<<1^113:E<<=1}h[k]=u.create(_,C)}})();var m=[];(function(){for(var v=0;v<25;v++)m[v]=u.create()})();var y=c.SHA3=i.extend({cfg:i.cfg.extend({outputLength:512}),_doReset:function(){for(var v=this._state=[],p=0;p<25;p++)v[p]=new u.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(v,p){for(var x=this._state,w=this.blockSize/2,b=0;b<w;b++){var E=v[p+2*b],k=v[p+2*b+1];E=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360,k=(k<<8|k>>>24)&16711935|(k<<24|k>>>8)&4278255360;var _=x[b];_.high^=k,_.low^=E}for(var C=0;C<24;C++){for(var S=0;S<5;S++){for(var A=0,F=0,P=0;P<5;P++){var _=x[S+5*P];A^=_.high,F^=_.low}var T=m[S];T.high=A,T.low=F}for(var S=0;S<5;S++)for(var I=m[(S+4)%5],K=m[(S+1)%5],j=K.high,Y=K.low,A=I.high^(j<<1|Y>>>31),F=I.low^(Y<<1|j>>>31),P=0;P<5;P++){var _=x[S+5*P];_.high^=A,_.low^=F}for(var te=1;te<25;te++){var A,F,_=x[te],xe=_.high,fe=_.low,H=d[te];H<32?(A=xe<<H|fe>>>32-H,F=fe<<H|xe>>>32-H):(A=fe<<H-32|xe>>>64-H,F=xe<<H-32|fe>>>64-H);var U=m[f[te]];U.high=A,U.low=F}var V=m[0],z=x[0];V.high=z.high,V.low=z.low;for(var S=0;S<5;S++)for(var P=0;P<5;P++){var te=S+5*P,_=x[te],De=m[te],me=m[(S+1)%5+5*P],$=m[(S+2)%5+5*P];_.high=De.high^~me.high&$.high,_.low=De.low^~me.low&$.low}var _=x[0],q=h[C];_.high^=q.high,_.low^=q.low}},_doFinalize:function(){var v=this._data,p=v.words;this._nDataBytes*8;var x=v.sigBytes*8,w=this.blockSize*32;p[x>>>5]|=1<<24-x%32,p[(n.ceil((x+1)/w)*w>>>5)-1]|=128,v.sigBytes=p.length*4,this._process();for(var b=this._state,E=this.cfg.outputLength/8,k=E/8,_=[],C=0;C<k;C++){var S=b[C],A=S.high,F=S.low;A=(A<<8|A>>>24)&16711935|(A<<24|A>>>8)&4278255360,F=(F<<8|F>>>24)&16711935|(F<<24|F>>>8)&4278255360,_.push(F),_.push(A)}return new a.init(_,E)},clone:function(){for(var v=i.clone.call(this),p=v._state=this._state.slice(0),x=0;x<25;x++)p[x]=p[x].clone();return v}});s.SHA3=i._createHelper(y),s.HmacSHA3=i._createHmacHelper(y)}(Math),r.SHA3})}(fa)),fa.exports}var ha={exports:{}},M0;function Yv(){return M0||(M0=1,function(t,e){(function(r,n){t.exports=n(Ce())})(be,function(r){/** @preserve
			(c) 2012 by Cédric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/return function(n){var s=r,o=s.lib,a=o.WordArray,i=o.Hasher,l=s.algo,u=a.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),c=a.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),d=a.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),f=a.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),h=a.create([0,1518500249,1859775393,2400959708,2840853838]),m=a.create([1352829926,1548603684,1836072691,2053994217,0]),y=l.RIPEMD160=i.extend({_doReset:function(){this._hash=a.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(k,_){for(var C=0;C<16;C++){var S=_+C,A=k[S];k[S]=(A<<8|A>>>24)&16711935|(A<<24|A>>>8)&4278255360}var F=this._hash.words,P=h.words,T=m.words,I=u.words,K=c.words,j=d.words,Y=f.words,te,xe,fe,H,U,V,z,De,me,$;V=te=F[0],z=xe=F[1],De=fe=F[2],me=H=F[3],$=U=F[4];for(var q,C=0;C<80;C+=1)q=te+k[_+I[C]]|0,C<16?q+=v(xe,fe,H)+P[0]:C<32?q+=p(xe,fe,H)+P[1]:C<48?q+=x(xe,fe,H)+P[2]:C<64?q+=w(xe,fe,H)+P[3]:q+=b(xe,fe,H)+P[4],q=q|0,q=E(q,j[C]),q=q+U|0,te=U,U=H,H=E(fe,10),fe=xe,xe=q,q=V+k[_+K[C]]|0,C<16?q+=b(z,De,me)+T[0]:C<32?q+=w(z,De,me)+T[1]:C<48?q+=x(z,De,me)+T[2]:C<64?q+=p(z,De,me)+T[3]:q+=v(z,De,me)+T[4],q=q|0,q=E(q,Y[C]),q=q+$|0,V=$,$=me,me=E(De,10),De=z,z=q;q=F[1]+fe+me|0,F[1]=F[2]+H+$|0,F[2]=F[3]+U+V|0,F[3]=F[4]+te+z|0,F[4]=F[0]+xe+De|0,F[0]=q},_doFinalize:function(){var k=this._data,_=k.words,C=this._nDataBytes*8,S=k.sigBytes*8;_[S>>>5]|=128<<24-S%32,_[(S+64>>>9<<4)+14]=(C<<8|C>>>24)&16711935|(C<<24|C>>>8)&4278255360,k.sigBytes=(_.length+1)*4,this._process();for(var A=this._hash,F=A.words,P=0;P<5;P++){var T=F[P];F[P]=(T<<8|T>>>24)&16711935|(T<<24|T>>>8)&4278255360}return A},clone:function(){var k=i.clone.call(this);return k._hash=this._hash.clone(),k}});function v(k,_,C){return k^_^C}function p(k,_,C){return k&_|~k&C}function x(k,_,C){return(k|~_)^C}function w(k,_,C){return k&C|_&~C}function b(k,_,C){return k^(_|~C)}function E(k,_){return k<<_|k>>>32-_}s.RIPEMD160=i._createHelper(y),s.HmacRIPEMD160=i._createHmacHelper(y)}(),r.RIPEMD160})}(ha)),ha.exports}var xa={exports:{}},G0;function ll(){return G0||(G0=1,function(t,e){(function(r,n){t.exports=n(Ce())})(be,function(r){(function(){var n=r,s=n.lib,o=s.Base,a=n.enc,i=a.Utf8,l=n.algo;l.HMAC=o.extend({init:function(u,c){u=this._hasher=new u.init,typeof c=="string"&&(c=i.parse(c));var d=u.blockSize,f=d*4;c.sigBytes>f&&(c=u.finalize(c)),c.clamp();for(var h=this._oKey=c.clone(),m=this._iKey=c.clone(),y=h.words,v=m.words,p=0;p<d;p++)y[p]^=1549556828,v[p]^=909522486;h.sigBytes=m.sigBytes=f,this.reset()},reset:function(){var u=this._hasher;u.reset(),u.update(this._iKey)},update:function(u){return this._hasher.update(u),this},finalize:function(u){var c=this._hasher,d=c.finalize(u);c.reset();var f=c.finalize(this._oKey.clone().concat(d));return f}})})()})}(xa)),xa.exports}var ga={exports:{}},j0;function Qv(){return j0||(j0=1,function(t,e){(function(r,n,s){t.exports=n(Ce(),il(),ll())})(be,function(r){return function(){var n=r,s=n.lib,o=s.Base,a=s.WordArray,i=n.algo,l=i.SHA256,u=i.HMAC,c=i.PBKDF2=o.extend({cfg:o.extend({keySize:128/32,hasher:l,iterations:25e4}),init:function(d){this.cfg=this.cfg.extend(d)},compute:function(d,f){for(var h=this.cfg,m=u.create(h.hasher,d),y=a.create(),v=a.create([1]),p=y.words,x=v.words,w=h.keySize,b=h.iterations;p.length<w;){var E=m.update(f).finalize(v);m.reset();for(var k=E.words,_=k.length,C=E,S=1;S<b;S++){C=m.finalize(C),m.reset();for(var A=C.words,F=0;F<_;F++)k[F]^=A[F]}y.concat(E),x[0]++}return y.sigBytes=w*4,y}});n.PBKDF2=function(d,f,h){return c.create(h).compute(d,f)}}(),r.PBKDF2})}(ga)),ga.exports}var pa={exports:{}},z0;function Fr(){return z0||(z0=1,function(t,e){(function(r,n,s){t.exports=n(Ce(),Fd(),ll())})(be,function(r){return function(){var n=r,s=n.lib,o=s.Base,a=s.WordArray,i=n.algo,l=i.MD5,u=i.EvpKDF=o.extend({cfg:o.extend({keySize:128/32,hasher:l,iterations:1}),init:function(c){this.cfg=this.cfg.extend(c)},compute:function(c,d){for(var f,h=this.cfg,m=h.hasher.create(),y=a.create(),v=y.words,p=h.keySize,x=h.iterations;v.length<p;){f&&m.update(f),f=m.update(c).finalize(d),m.reset();for(var w=1;w<x;w++)f=m.finalize(f),m.reset();y.concat(f)}return y.sigBytes=p*4,y}});n.EvpKDF=function(c,d,f){return u.create(f).compute(c,d)}}(),r.EvpKDF})}(pa)),pa.exports}var va={exports:{}},N0;function Xe(){return N0||(N0=1,function(t,e){(function(r,n,s){t.exports=n(Ce(),Fr())})(be,function(r){r.lib.Cipher||function(n){var s=r,o=s.lib,a=o.Base,i=o.WordArray,l=o.BufferedBlockAlgorithm,u=s.enc;u.Utf8;var c=u.Base64,d=s.algo,f=d.EvpKDF,h=o.Cipher=l.extend({cfg:a.extend(),createEncryptor:function(A,F){return this.create(this._ENC_XFORM_MODE,A,F)},createDecryptor:function(A,F){return this.create(this._DEC_XFORM_MODE,A,F)},init:function(A,F,P){this.cfg=this.cfg.extend(P),this._xformMode=A,this._key=F,this.reset()},reset:function(){l.reset.call(this),this._doReset()},process:function(A){return this._append(A),this._process()},finalize:function(A){A&&this._append(A);var F=this._doFinalize();return F},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function A(F){return typeof F=="string"?S:k}return function(F){return{encrypt:function(P,T,I){return A(T).encrypt(F,P,T,I)},decrypt:function(P,T,I){return A(T).decrypt(F,P,T,I)}}}}()});o.StreamCipher=h.extend({_doFinalize:function(){var A=this._process(!0);return A},blockSize:1});var m=s.mode={},y=o.BlockCipherMode=a.extend({createEncryptor:function(A,F){return this.Encryptor.create(A,F)},createDecryptor:function(A,F){return this.Decryptor.create(A,F)},init:function(A,F){this._cipher=A,this._iv=F}}),v=m.CBC=function(){var A=y.extend();A.Encryptor=A.extend({processBlock:function(P,T){var I=this._cipher,K=I.blockSize;F.call(this,P,T,K),I.encryptBlock(P,T),this._prevBlock=P.slice(T,T+K)}}),A.Decryptor=A.extend({processBlock:function(P,T){var I=this._cipher,K=I.blockSize,j=P.slice(T,T+K);I.decryptBlock(P,T),F.call(this,P,T,K),this._prevBlock=j}});function F(P,T,I){var K,j=this._iv;j?(K=j,this._iv=n):K=this._prevBlock;for(var Y=0;Y<I;Y++)P[T+Y]^=K[Y]}return A}(),p=s.pad={},x=p.Pkcs7={pad:function(A,F){for(var P=F*4,T=P-A.sigBytes%P,I=T<<24|T<<16|T<<8|T,K=[],j=0;j<T;j+=4)K.push(I);var Y=i.create(K,T);A.concat(Y)},unpad:function(A){var F=A.words[A.sigBytes-1>>>2]&255;A.sigBytes-=F}};o.BlockCipher=h.extend({cfg:h.cfg.extend({mode:v,padding:x}),reset:function(){var A;h.reset.call(this);var F=this.cfg,P=F.iv,T=F.mode;this._xformMode==this._ENC_XFORM_MODE?A=T.createEncryptor:(A=T.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==A?this._mode.init(this,P&&P.words):(this._mode=A.call(T,this,P&&P.words),this._mode.__creator=A)},_doProcessBlock:function(A,F){this._mode.processBlock(A,F)},_doFinalize:function(){var A,F=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(F.pad(this._data,this.blockSize),A=this._process(!0)):(A=this._process(!0),F.unpad(A)),A},blockSize:128/32});var w=o.CipherParams=a.extend({init:function(A){this.mixIn(A)},toString:function(A){return(A||this.formatter).stringify(this)}}),b=s.format={},E=b.OpenSSL={stringify:function(A){var F,P=A.ciphertext,T=A.salt;return T?F=i.create([1398893684,1701076831]).concat(T).concat(P):F=P,F.toString(c)},parse:function(A){var F,P=c.parse(A),T=P.words;return T[0]==1398893684&&T[1]==1701076831&&(F=i.create(T.slice(2,4)),T.splice(0,4),P.sigBytes-=16),w.create({ciphertext:P,salt:F})}},k=o.SerializableCipher=a.extend({cfg:a.extend({format:E}),encrypt:function(A,F,P,T){T=this.cfg.extend(T);var I=A.createEncryptor(P,T),K=I.finalize(F),j=I.cfg;return w.create({ciphertext:K,key:P,iv:j.iv,algorithm:A,mode:j.mode,padding:j.padding,blockSize:A.blockSize,formatter:T.format})},decrypt:function(A,F,P,T){T=this.cfg.extend(T),F=this._parse(F,T.format);var I=A.createDecryptor(P,T).finalize(F.ciphertext);return I},_parse:function(A,F){return typeof A=="string"?F.parse(A,this):A}}),_=s.kdf={},C=_.OpenSSL={execute:function(A,F,P,T,I){if(T||(T=i.random(64/8)),I)var K=f.create({keySize:F+P,hasher:I}).compute(A,T);else var K=f.create({keySize:F+P}).compute(A,T);var j=i.create(K.words.slice(F),P*4);return K.sigBytes=F*4,w.create({key:K,iv:j,salt:T})}},S=o.PasswordBasedCipher=k.extend({cfg:k.cfg.extend({kdf:C}),encrypt:function(A,F,P,T){T=this.cfg.extend(T);var I=T.kdf.execute(P,A.keySize,A.ivSize,T.salt,T.hasher);T.iv=I.iv;var K=k.encrypt.call(this,A,F,I.key,T);return K.mixIn(I),K},decrypt:function(A,F,P,T){T=this.cfg.extend(T),F=this._parse(F,T.format);var I=T.kdf.execute(P,A.keySize,A.ivSize,F.salt,T.hasher);T.iv=I.iv;var K=k.decrypt.call(this,A,F,I.key,T);return K}})}()})}(va)),va.exports}var ya={exports:{}},K0;function Xv(){return K0||(K0=1,function(t,e){(function(r,n,s){t.exports=n(Ce(),Xe())})(be,function(r){return r.mode.CFB=function(){var n=r.lib.BlockCipherMode.extend();n.Encryptor=n.extend({processBlock:function(o,a){var i=this._cipher,l=i.blockSize;s.call(this,o,a,l,i),this._prevBlock=o.slice(a,a+l)}}),n.Decryptor=n.extend({processBlock:function(o,a){var i=this._cipher,l=i.blockSize,u=o.slice(a,a+l);s.call(this,o,a,l,i),this._prevBlock=u}});function s(o,a,i,l){var u,c=this._iv;c?(u=c.slice(0),this._iv=void 0):u=this._prevBlock,l.encryptBlock(u,0);for(var d=0;d<i;d++)o[a+d]^=u[d]}return n}(),r.mode.CFB})}(ya)),ya.exports}var ma={exports:{}},V0;function Jv(){return V0||(V0=1,function(t,e){(function(r,n,s){t.exports=n(Ce(),Xe())})(be,function(r){return r.mode.CTR=function(){var n=r.lib.BlockCipherMode.extend(),s=n.Encryptor=n.extend({processBlock:function(o,a){var i=this._cipher,l=i.blockSize,u=this._iv,c=this._counter;u&&(c=this._counter=u.slice(0),this._iv=void 0);var d=c.slice(0);i.encryptBlock(d,0),c[l-1]=c[l-1]+1|0;for(var f=0;f<l;f++)o[a+f]^=d[f]}});return n.Decryptor=s,n}(),r.mode.CTR})}(ma)),ma.exports}var wa={exports:{}},q0;function Zv(){return q0||(q0=1,function(t,e){(function(r,n,s){t.exports=n(Ce(),Xe())})(be,function(r){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return r.mode.CTRGladman=function(){var n=r.lib.BlockCipherMode.extend();function s(i){if((i>>24&255)===255){var l=i>>16&255,u=i>>8&255,c=i&255;l===255?(l=0,u===255?(u=0,c===255?c=0:++c):++u):++l,i=0,i+=l<<16,i+=u<<8,i+=c}else i+=1<<24;return i}function o(i){return(i[0]=s(i[0]))===0&&(i[1]=s(i[1])),i}var a=n.Encryptor=n.extend({processBlock:function(i,l){var u=this._cipher,c=u.blockSize,d=this._iv,f=this._counter;d&&(f=this._counter=d.slice(0),this._iv=void 0),o(f);var h=f.slice(0);u.encryptBlock(h,0);for(var m=0;m<c;m++)i[l+m]^=h[m]}});return n.Decryptor=a,n}(),r.mode.CTRGladman})}(wa)),wa.exports}var ba={exports:{}},W0;function ey(){return W0||(W0=1,function(t,e){(function(r,n,s){t.exports=n(Ce(),Xe())})(be,function(r){return r.mode.OFB=function(){var n=r.lib.BlockCipherMode.extend(),s=n.Encryptor=n.extend({processBlock:function(o,a){var i=this._cipher,l=i.blockSize,u=this._iv,c=this._keystream;u&&(c=this._keystream=u.slice(0),this._iv=void 0),i.encryptBlock(c,0);for(var d=0;d<l;d++)o[a+d]^=c[d]}});return n.Decryptor=s,n}(),r.mode.OFB})}(ba)),ba.exports}var _a={exports:{}},Y0;function ty(){return Y0||(Y0=1,function(t,e){(function(r,n,s){t.exports=n(Ce(),Xe())})(be,function(r){return r.mode.ECB=function(){var n=r.lib.BlockCipherMode.extend();return n.Encryptor=n.extend({processBlock:function(s,o){this._cipher.encryptBlock(s,o)}}),n.Decryptor=n.extend({processBlock:function(s,o){this._cipher.decryptBlock(s,o)}}),n}(),r.mode.ECB})}(_a)),_a.exports}var Ea={exports:{}},Q0;function ry(){return Q0||(Q0=1,function(t,e){(function(r,n,s){t.exports=n(Ce(),Xe())})(be,function(r){return r.pad.AnsiX923={pad:function(n,s){var o=n.sigBytes,a=s*4,i=a-o%a,l=o+i-1;n.clamp(),n.words[l>>>2]|=i<<24-l%4*8,n.sigBytes+=i},unpad:function(n){var s=n.words[n.sigBytes-1>>>2]&255;n.sigBytes-=s}},r.pad.Ansix923})}(Ea)),Ea.exports}var ka={exports:{}},X0;function ny(){return X0||(X0=1,function(t,e){(function(r,n,s){t.exports=n(Ce(),Xe())})(be,function(r){return r.pad.Iso10126={pad:function(n,s){var o=s*4,a=o-n.sigBytes%o;n.concat(r.lib.WordArray.random(a-1)).concat(r.lib.WordArray.create([a<<24],1))},unpad:function(n){var s=n.words[n.sigBytes-1>>>2]&255;n.sigBytes-=s}},r.pad.Iso10126})}(ka)),ka.exports}var Ca={exports:{}},J0;function sy(){return J0||(J0=1,function(t,e){(function(r,n,s){t.exports=n(Ce(),Xe())})(be,function(r){return r.pad.Iso97971={pad:function(n,s){n.concat(r.lib.WordArray.create([2147483648],1)),r.pad.ZeroPadding.pad(n,s)},unpad:function(n){r.pad.ZeroPadding.unpad(n),n.sigBytes--}},r.pad.Iso97971})}(Ca)),Ca.exports}var Da={exports:{}},Z0;function oy(){return Z0||(Z0=1,function(t,e){(function(r,n,s){t.exports=n(Ce(),Xe())})(be,function(r){return r.pad.ZeroPadding={pad:function(n,s){var o=s*4;n.clamp(),n.sigBytes+=o-(n.sigBytes%o||o)},unpad:function(n){for(var s=n.words,o=n.sigBytes-1,o=n.sigBytes-1;o>=0;o--)if(s[o>>>2]>>>24-o%4*8&255){n.sigBytes=o+1;break}}},r.pad.ZeroPadding})}(Da)),Da.exports}var Aa={exports:{}},ec;function ay(){return ec||(ec=1,function(t,e){(function(r,n,s){t.exports=n(Ce(),Xe())})(be,function(r){return r.pad.NoPadding={pad:function(){},unpad:function(){}},r.pad.NoPadding})}(Aa)),Aa.exports}var Ba={exports:{}},tc;function iy(){return tc||(tc=1,function(t,e){(function(r,n,s){t.exports=n(Ce(),Xe())})(be,function(r){return function(n){var s=r,o=s.lib,a=o.CipherParams,i=s.enc,l=i.Hex,u=s.format;u.Hex={stringify:function(c){return c.ciphertext.toString(l)},parse:function(c){var d=l.parse(c);return a.create({ciphertext:d})}}}(),r.format.Hex})}(Ba)),Ba.exports}var Sa={exports:{}},rc;function ly(){return rc||(rc=1,function(t,e){(function(r,n,s){t.exports=n(Ce(),Jr(),Zr(),Fr(),Xe())})(be,function(r){return function(){var n=r,s=n.lib,o=s.BlockCipher,a=n.algo,i=[],l=[],u=[],c=[],d=[],f=[],h=[],m=[],y=[],v=[];(function(){for(var w=[],b=0;b<256;b++)b<128?w[b]=b<<1:w[b]=b<<1^283;for(var E=0,k=0,b=0;b<256;b++){var _=k^k<<1^k<<2^k<<3^k<<4;_=_>>>8^_&255^99,i[E]=_,l[_]=E;var C=w[E],S=w[C],A=w[S],F=w[_]*257^_*16843008;u[E]=F<<24|F>>>8,c[E]=F<<16|F>>>16,d[E]=F<<8|F>>>24,f[E]=F;var F=A*16843009^S*65537^C*257^E*16843008;h[_]=F<<24|F>>>8,m[_]=F<<16|F>>>16,y[_]=F<<8|F>>>24,v[_]=F,E?(E=C^w[w[w[A^C]]],k^=w[w[k]]):E=k=1}})();var p=[0,1,2,4,8,16,32,64,128,27,54],x=a.AES=o.extend({_doReset:function(){var w;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var b=this._keyPriorReset=this._key,E=b.words,k=b.sigBytes/4,_=this._nRounds=k+6,C=(_+1)*4,S=this._keySchedule=[],A=0;A<C;A++)A<k?S[A]=E[A]:(w=S[A-1],A%k?k>6&&A%k==4&&(w=i[w>>>24]<<24|i[w>>>16&255]<<16|i[w>>>8&255]<<8|i[w&255]):(w=w<<8|w>>>24,w=i[w>>>24]<<24|i[w>>>16&255]<<16|i[w>>>8&255]<<8|i[w&255],w^=p[A/k|0]<<24),S[A]=S[A-k]^w);for(var F=this._invKeySchedule=[],P=0;P<C;P++){var A=C-P;if(P%4)var w=S[A];else var w=S[A-4];P<4||A<=4?F[P]=w:F[P]=h[i[w>>>24]]^m[i[w>>>16&255]]^y[i[w>>>8&255]]^v[i[w&255]]}}},encryptBlock:function(w,b){this._doCryptBlock(w,b,this._keySchedule,u,c,d,f,i)},decryptBlock:function(w,b){var E=w[b+1];w[b+1]=w[b+3],w[b+3]=E,this._doCryptBlock(w,b,this._invKeySchedule,h,m,y,v,l);var E=w[b+1];w[b+1]=w[b+3],w[b+3]=E},_doCryptBlock:function(w,b,E,k,_,C,S,A){for(var F=this._nRounds,P=w[b]^E[0],T=w[b+1]^E[1],I=w[b+2]^E[2],K=w[b+3]^E[3],j=4,Y=1;Y<F;Y++){var te=k[P>>>24]^_[T>>>16&255]^C[I>>>8&255]^S[K&255]^E[j++],xe=k[T>>>24]^_[I>>>16&255]^C[K>>>8&255]^S[P&255]^E[j++],fe=k[I>>>24]^_[K>>>16&255]^C[P>>>8&255]^S[T&255]^E[j++],H=k[K>>>24]^_[P>>>16&255]^C[T>>>8&255]^S[I&255]^E[j++];P=te,T=xe,I=fe,K=H}var te=(A[P>>>24]<<24|A[T>>>16&255]<<16|A[I>>>8&255]<<8|A[K&255])^E[j++],xe=(A[T>>>24]<<24|A[I>>>16&255]<<16|A[K>>>8&255]<<8|A[P&255])^E[j++],fe=(A[I>>>24]<<24|A[K>>>16&255]<<16|A[P>>>8&255]<<8|A[T&255])^E[j++],H=(A[K>>>24]<<24|A[P>>>16&255]<<16|A[T>>>8&255]<<8|A[I&255])^E[j++];w[b]=te,w[b+1]=xe,w[b+2]=fe,w[b+3]=H},keySize:256/32});n.AES=o._createHelper(x)}(),r.AES})}(Sa)),Sa.exports}var Fa={exports:{}},nc;function cy(){return nc||(nc=1,function(t,e){(function(r,n,s){t.exports=n(Ce(),Jr(),Zr(),Fr(),Xe())})(be,function(r){return function(){var n=r,s=n.lib,o=s.WordArray,a=s.BlockCipher,i=n.algo,l=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],u=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],c=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],d=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],f=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],h=i.DES=a.extend({_doReset:function(){for(var p=this._key,x=p.words,w=[],b=0;b<56;b++){var E=l[b]-1;w[b]=x[E>>>5]>>>31-E%32&1}for(var k=this._subKeys=[],_=0;_<16;_++){for(var C=k[_]=[],S=c[_],b=0;b<24;b++)C[b/6|0]|=w[(u[b]-1+S)%28]<<31-b%6,C[4+(b/6|0)]|=w[28+(u[b+24]-1+S)%28]<<31-b%6;C[0]=C[0]<<1|C[0]>>>31;for(var b=1;b<7;b++)C[b]=C[b]>>>(b-1)*4+3;C[7]=C[7]<<5|C[7]>>>27}for(var A=this._invSubKeys=[],b=0;b<16;b++)A[b]=k[15-b]},encryptBlock:function(p,x){this._doCryptBlock(p,x,this._subKeys)},decryptBlock:function(p,x){this._doCryptBlock(p,x,this._invSubKeys)},_doCryptBlock:function(p,x,w){this._lBlock=p[x],this._rBlock=p[x+1],m.call(this,4,252645135),m.call(this,16,65535),y.call(this,2,858993459),y.call(this,8,16711935),m.call(this,1,1431655765);for(var b=0;b<16;b++){for(var E=w[b],k=this._lBlock,_=this._rBlock,C=0,S=0;S<8;S++)C|=d[S][((_^E[S])&f[S])>>>0];this._lBlock=_,this._rBlock=k^C}var A=this._lBlock;this._lBlock=this._rBlock,this._rBlock=A,m.call(this,1,1431655765),y.call(this,8,16711935),y.call(this,2,858993459),m.call(this,16,65535),m.call(this,4,252645135),p[x]=this._lBlock,p[x+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function m(p,x){var w=(this._lBlock>>>p^this._rBlock)&x;this._rBlock^=w,this._lBlock^=w<<p}function y(p,x){var w=(this._rBlock>>>p^this._lBlock)&x;this._lBlock^=w,this._rBlock^=w<<p}n.DES=a._createHelper(h);var v=i.TripleDES=a.extend({_doReset:function(){var p=this._key,x=p.words;if(x.length!==2&&x.length!==4&&x.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var w=x.slice(0,2),b=x.length<4?x.slice(0,2):x.slice(2,4),E=x.length<6?x.slice(0,2):x.slice(4,6);this._des1=h.createEncryptor(o.create(w)),this._des2=h.createEncryptor(o.create(b)),this._des3=h.createEncryptor(o.create(E))},encryptBlock:function(p,x){this._des1.encryptBlock(p,x),this._des2.decryptBlock(p,x),this._des3.encryptBlock(p,x)},decryptBlock:function(p,x){this._des3.decryptBlock(p,x),this._des2.encryptBlock(p,x),this._des1.decryptBlock(p,x)},keySize:192/32,ivSize:64/32,blockSize:64/32});n.TripleDES=a._createHelper(v)}(),r.TripleDES})}(Fa)),Fa.exports}var Pa={exports:{}},sc;function uy(){return sc||(sc=1,function(t,e){(function(r,n,s){t.exports=n(Ce(),Jr(),Zr(),Fr(),Xe())})(be,function(r){return function(){var n=r,s=n.lib,o=s.StreamCipher,a=n.algo,i=a.RC4=o.extend({_doReset:function(){for(var c=this._key,d=c.words,f=c.sigBytes,h=this._S=[],m=0;m<256;m++)h[m]=m;for(var m=0,y=0;m<256;m++){var v=m%f,p=d[v>>>2]>>>24-v%4*8&255;y=(y+h[m]+p)%256;var x=h[m];h[m]=h[y],h[y]=x}this._i=this._j=0},_doProcessBlock:function(c,d){c[d]^=l.call(this)},keySize:256/32,ivSize:0});function l(){for(var c=this._S,d=this._i,f=this._j,h=0,m=0;m<4;m++){d=(d+1)%256,f=(f+c[d])%256;var y=c[d];c[d]=c[f],c[f]=y,h|=c[(c[d]+c[f])%256]<<24-m*8}return this._i=d,this._j=f,h}n.RC4=o._createHelper(i);var u=a.RC4Drop=i.extend({cfg:i.cfg.extend({drop:192}),_doReset:function(){i._doReset.call(this);for(var c=this.cfg.drop;c>0;c--)l.call(this)}});n.RC4Drop=o._createHelper(u)}(),r.RC4})}(Pa)),Pa.exports}var Ta={exports:{}},oc;function dy(){return oc||(oc=1,function(t,e){(function(r,n,s){t.exports=n(Ce(),Jr(),Zr(),Fr(),Xe())})(be,function(r){return function(){var n=r,s=n.lib,o=s.StreamCipher,a=n.algo,i=[],l=[],u=[],c=a.Rabbit=o.extend({_doReset:function(){for(var f=this._key.words,h=this.cfg.iv,m=0;m<4;m++)f[m]=(f[m]<<8|f[m]>>>24)&16711935|(f[m]<<24|f[m]>>>8)&4278255360;var y=this._X=[f[0],f[3]<<16|f[2]>>>16,f[1],f[0]<<16|f[3]>>>16,f[2],f[1]<<16|f[0]>>>16,f[3],f[2]<<16|f[1]>>>16],v=this._C=[f[2]<<16|f[2]>>>16,f[0]&4294901760|f[1]&65535,f[3]<<16|f[3]>>>16,f[1]&4294901760|f[2]&65535,f[0]<<16|f[0]>>>16,f[2]&4294901760|f[3]&65535,f[1]<<16|f[1]>>>16,f[3]&4294901760|f[0]&65535];this._b=0;for(var m=0;m<4;m++)d.call(this);for(var m=0;m<8;m++)v[m]^=y[m+4&7];if(h){var p=h.words,x=p[0],w=p[1],b=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360,E=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360,k=b>>>16|E&4294901760,_=E<<16|b&65535;v[0]^=b,v[1]^=k,v[2]^=E,v[3]^=_,v[4]^=b,v[5]^=k,v[6]^=E,v[7]^=_;for(var m=0;m<4;m++)d.call(this)}},_doProcessBlock:function(f,h){var m=this._X;d.call(this),i[0]=m[0]^m[5]>>>16^m[3]<<16,i[1]=m[2]^m[7]>>>16^m[5]<<16,i[2]=m[4]^m[1]>>>16^m[7]<<16,i[3]=m[6]^m[3]>>>16^m[1]<<16;for(var y=0;y<4;y++)i[y]=(i[y]<<8|i[y]>>>24)&16711935|(i[y]<<24|i[y]>>>8)&4278255360,f[h+y]^=i[y]},blockSize:128/32,ivSize:64/32});function d(){for(var f=this._X,h=this._C,m=0;m<8;m++)l[m]=h[m];h[0]=h[0]+1295307597+this._b|0,h[1]=h[1]+3545052371+(h[0]>>>0<l[0]>>>0?1:0)|0,h[2]=h[2]+886263092+(h[1]>>>0<l[1]>>>0?1:0)|0,h[3]=h[3]+1295307597+(h[2]>>>0<l[2]>>>0?1:0)|0,h[4]=h[4]+3545052371+(h[3]>>>0<l[3]>>>0?1:0)|0,h[5]=h[5]+886263092+(h[4]>>>0<l[4]>>>0?1:0)|0,h[6]=h[6]+1295307597+(h[5]>>>0<l[5]>>>0?1:0)|0,h[7]=h[7]+3545052371+(h[6]>>>0<l[6]>>>0?1:0)|0,this._b=h[7]>>>0<l[7]>>>0?1:0;for(var m=0;m<8;m++){var y=f[m]+h[m],v=y&65535,p=y>>>16,x=((v*v>>>17)+v*p>>>15)+p*p,w=((y&4294901760)*y|0)+((y&65535)*y|0);u[m]=x^w}f[0]=u[0]+(u[7]<<16|u[7]>>>16)+(u[6]<<16|u[6]>>>16)|0,f[1]=u[1]+(u[0]<<8|u[0]>>>24)+u[7]|0,f[2]=u[2]+(u[1]<<16|u[1]>>>16)+(u[0]<<16|u[0]>>>16)|0,f[3]=u[3]+(u[2]<<8|u[2]>>>24)+u[1]|0,f[4]=u[4]+(u[3]<<16|u[3]>>>16)+(u[2]<<16|u[2]>>>16)|0,f[5]=u[5]+(u[4]<<8|u[4]>>>24)+u[3]|0,f[6]=u[6]+(u[5]<<16|u[5]>>>16)+(u[4]<<16|u[4]>>>16)|0,f[7]=u[7]+(u[6]<<8|u[6]>>>24)+u[5]|0}n.Rabbit=o._createHelper(c)}(),r.Rabbit})}(Ta)),Ta.exports}var Ra={exports:{}},ac;function fy(){return ac||(ac=1,function(t,e){(function(r,n,s){t.exports=n(Ce(),Jr(),Zr(),Fr(),Xe())})(be,function(r){return function(){var n=r,s=n.lib,o=s.StreamCipher,a=n.algo,i=[],l=[],u=[],c=a.RabbitLegacy=o.extend({_doReset:function(){var f=this._key.words,h=this.cfg.iv,m=this._X=[f[0],f[3]<<16|f[2]>>>16,f[1],f[0]<<16|f[3]>>>16,f[2],f[1]<<16|f[0]>>>16,f[3],f[2]<<16|f[1]>>>16],y=this._C=[f[2]<<16|f[2]>>>16,f[0]&4294901760|f[1]&65535,f[3]<<16|f[3]>>>16,f[1]&4294901760|f[2]&65535,f[0]<<16|f[0]>>>16,f[2]&4294901760|f[3]&65535,f[1]<<16|f[1]>>>16,f[3]&4294901760|f[0]&65535];this._b=0;for(var v=0;v<4;v++)d.call(this);for(var v=0;v<8;v++)y[v]^=m[v+4&7];if(h){var p=h.words,x=p[0],w=p[1],b=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360,E=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360,k=b>>>16|E&4294901760,_=E<<16|b&65535;y[0]^=b,y[1]^=k,y[2]^=E,y[3]^=_,y[4]^=b,y[5]^=k,y[6]^=E,y[7]^=_;for(var v=0;v<4;v++)d.call(this)}},_doProcessBlock:function(f,h){var m=this._X;d.call(this),i[0]=m[0]^m[5]>>>16^m[3]<<16,i[1]=m[2]^m[7]>>>16^m[5]<<16,i[2]=m[4]^m[1]>>>16^m[7]<<16,i[3]=m[6]^m[3]>>>16^m[1]<<16;for(var y=0;y<4;y++)i[y]=(i[y]<<8|i[y]>>>24)&16711935|(i[y]<<24|i[y]>>>8)&4278255360,f[h+y]^=i[y]},blockSize:128/32,ivSize:64/32});function d(){for(var f=this._X,h=this._C,m=0;m<8;m++)l[m]=h[m];h[0]=h[0]+1295307597+this._b|0,h[1]=h[1]+3545052371+(h[0]>>>0<l[0]>>>0?1:0)|0,h[2]=h[2]+886263092+(h[1]>>>0<l[1]>>>0?1:0)|0,h[3]=h[3]+1295307597+(h[2]>>>0<l[2]>>>0?1:0)|0,h[4]=h[4]+3545052371+(h[3]>>>0<l[3]>>>0?1:0)|0,h[5]=h[5]+886263092+(h[4]>>>0<l[4]>>>0?1:0)|0,h[6]=h[6]+1295307597+(h[5]>>>0<l[5]>>>0?1:0)|0,h[7]=h[7]+3545052371+(h[6]>>>0<l[6]>>>0?1:0)|0,this._b=h[7]>>>0<l[7]>>>0?1:0;for(var m=0;m<8;m++){var y=f[m]+h[m],v=y&65535,p=y>>>16,x=((v*v>>>17)+v*p>>>15)+p*p,w=((y&4294901760)*y|0)+((y&65535)*y|0);u[m]=x^w}f[0]=u[0]+(u[7]<<16|u[7]>>>16)+(u[6]<<16|u[6]>>>16)|0,f[1]=u[1]+(u[0]<<8|u[0]>>>24)+u[7]|0,f[2]=u[2]+(u[1]<<16|u[1]>>>16)+(u[0]<<16|u[0]>>>16)|0,f[3]=u[3]+(u[2]<<8|u[2]>>>24)+u[1]|0,f[4]=u[4]+(u[3]<<16|u[3]>>>16)+(u[2]<<16|u[2]>>>16)|0,f[5]=u[5]+(u[4]<<8|u[4]>>>24)+u[3]|0,f[6]=u[6]+(u[5]<<16|u[5]>>>16)+(u[4]<<16|u[4]>>>16)|0,f[7]=u[7]+(u[6]<<8|u[6]>>>24)+u[5]|0}n.RabbitLegacy=o._createHelper(c)}(),r.RabbitLegacy})}(Ra)),Ra.exports}var Ia={exports:{}},ic;function hy(){return ic||(ic=1,function(t,e){(function(r,n,s){t.exports=n(Ce(),Jr(),Zr(),Fr(),Xe())})(be,function(r){return function(){var n=r,s=n.lib,o=s.BlockCipher,a=n.algo;const i=16,l=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],u=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var c={pbox:[],sbox:[]};function d(v,p){let x=p>>24&255,w=p>>16&255,b=p>>8&255,E=p&255,k=v.sbox[0][x]+v.sbox[1][w];return k=k^v.sbox[2][b],k=k+v.sbox[3][E],k}function f(v,p,x){let w=p,b=x,E;for(let k=0;k<i;++k)w=w^v.pbox[k],b=d(v,w)^b,E=w,w=b,b=E;return E=w,w=b,b=E,b=b^v.pbox[i],w=w^v.pbox[i+1],{left:w,right:b}}function h(v,p,x){let w=p,b=x,E;for(let k=i+1;k>1;--k)w=w^v.pbox[k],b=d(v,w)^b,E=w,w=b,b=E;return E=w,w=b,b=E,b=b^v.pbox[1],w=w^v.pbox[0],{left:w,right:b}}function m(v,p,x){for(let _=0;_<4;_++){v.sbox[_]=[];for(let C=0;C<256;C++)v.sbox[_][C]=u[_][C]}let w=0;for(let _=0;_<i+2;_++)v.pbox[_]=l[_]^p[w],w++,w>=x&&(w=0);let b=0,E=0,k=0;for(let _=0;_<i+2;_+=2)k=f(v,b,E),b=k.left,E=k.right,v.pbox[_]=b,v.pbox[_+1]=E;for(let _=0;_<4;_++)for(let C=0;C<256;C+=2)k=f(v,b,E),b=k.left,E=k.right,v.sbox[_][C]=b,v.sbox[_][C+1]=E;return!0}var y=a.Blowfish=o.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var v=this._keyPriorReset=this._key,p=v.words,x=v.sigBytes/4;m(c,p,x)}},encryptBlock:function(v,p){var x=f(c,v[p],v[p+1]);v[p]=x.left,v[p+1]=x.right},decryptBlock:function(v,p){var x=h(c,v[p],v[p+1]);v[p]=x.left,v[p+1]=x.right},blockSize:64/32,keySize:128/32,ivSize:64/32});n.Blowfish=o._createHelper(y)}(),r.Blowfish})}(Ia)),Ia.exports}(function(t,e){(function(r,n,s){t.exports=n(Ce(),Ro(),zv(),Nv(),Jr(),Kv(),Zr(),Fd(),il(),Vv(),Pd(),qv(),Wv(),Yv(),ll(),Qv(),Fr(),Xe(),Xv(),Jv(),Zv(),ey(),ty(),ry(),ny(),sy(),oy(),ay(),iy(),ly(),cy(),uy(),dy(),fy(),hy())})(be,function(r){return r})})(Sd);var xy=Sd.exports;const et=Uv(xy);class gy{constructor(){_e(this,"ENCRYPTION_VERSION","1.0");_e(this,"PBKDF2_ITERATIONS",1e4);_e(this,"KEY_SIZE",256/32)}deriveKey(e,r){return et.PBKDF2(e,r,{keySize:this.KEY_SIZE,iterations:this.PBKDF2_ITERATIONS,hasher:et.algo.SHA256})}generateSalt(){return et.lib.WordArray.random(128/8)}generateIV(){return et.lib.WordArray.random(128/8)}calculateChecksum(e){return et.SHA256(e).toString(et.enc.Hex)}async encryptPortfolioData(e,r){try{const n={portfolioData:e,timestamp:Date.now(),version:this.ENCRYPTION_VERSION,checksum:this.calculateChecksum(JSON.stringify(e))},s=JSON.stringify(n),o=this.generateSalt(),a=this.generateIV(),i=this.deriveKey(r,o);return{data:et.AES.encrypt(s,i,{iv:a,mode:et.mode.CBC,padding:et.pad.Pkcs7}).toString(),iv:a.toString(et.enc.Base64),salt:o.toString(et.enc.Base64),tag:"",version:this.ENCRYPTION_VERSION}}catch(n){throw console.error("Encryption failed:",n),new Error(Ft.ENCRYPTION_FAILED)}}async decryptPortfolioData(e,r){try{const n=et.enc.Base64.parse(e.iv),s=et.enc.Base64.parse(e.salt),o=this.deriveKey(r,s),i=et.AES.decrypt(e.data,o,{iv:n,mode:et.mode.CBC,padding:et.pad.Pkcs7}).toString(et.enc.Utf8);if(!i)throw new Error("Invalid password or corrupted data");const l=JSON.parse(i);if(this.calculateChecksum(JSON.stringify(l.portfolioData))!==l.checksum)throw new Error("Data integrity check failed");return l}catch(n){throw console.error("Decryption failed:",n),n.message.includes("Invalid password")||n.message.includes("Malformed UTF-8")?new Error(Ft.INVALID_PASSWORD):new Error(Ft.DECRYPTION_FAILED)}}validatePassword(e){const r=[];return e.length<8&&r.push("パスワードは8文字以上である必要があります"),/[a-z]/.test(e)||r.push("小文字を含む必要があります"),/[A-Z]/.test(e)||r.push("大文字を含む必要があります"),/[0-9]/.test(e)||r.push("数字を含む必要があります"),/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(e)||r.push("特殊文字を含む必要があります"),{isValid:r.length===0,errors:r}}generateSecurePassword(e=16){const r="abcdefghijklmnopqrstuvwxyz",n="ABCDEFGHIJKLMNOPQRSTUVWXYZ",s="0123456789",o="!@#$%^&*()_+-=[]{}|;:,.<>?",a=r+n+s+o;let i="";i+=r[Math.floor(Math.random()*r.length)],i+=n[Math.floor(Math.random()*n.length)],i+=s[Math.floor(Math.random()*s.length)],i+=o[Math.floor(Math.random()*o.length)];for(let l=4;l<e;l++)i+=a[Math.floor(Math.random()*a.length)];return i.split("").sort(()=>Math.random()-.5).join("")}async testEncryption(e){try{const r={holdings:[{token:"BTC",amount:1.5,location:"Wallet"}],timestamp:Date.now()},n=await this.encryptPortfolioData(r,e),s=await this.decryptPortfolioData(n,e);return JSON.stringify(r)===JSON.stringify(s.portfolioData)}catch(r){return console.error("Encryption test failed:",r),!1}}async verifyPassword(e){try{const{googleDriveApiService:r}=await ce(async()=>{const{googleDriveApiService:a}=await Promise.resolve().then(()=>xo);return{googleDriveApiService:a}},void 0),n=await r.findBackupFile();if(!n)return!0;const s=await r.downloadFile(n.id),o=JSON.parse(s);return await this.decryptPortfolioData(o,e),!0}catch(r){return console.error("Password verification failed:",r),!1}}}const St=new gy,py={class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"},vy={class:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto"},yy={class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},my={class:"flex items-center justify-between"},wy={class:"px-6 py-4"},by={class:"relative"},_y=["type"],Ey={key:0,class:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ky={key:1,class:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Cy={class:"mt-2"},Dy={class:"flex space-x-1"},Ay={class:"text-xs text-gray-600 dark:text-gray-400 mt-1"},By={key:0,class:"mt-2"},Sy={class:"text-sm text-red-600 dark:text-red-400 space-y-1"},Fy={class:"relative"},Py=["type"],Ty={key:0,class:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Ry={key:1,class:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Iy={key:0,class:"mt-2"},$y={class:"flex items-center justify-between"},Oy={key:0,class:"text-sm text-green-600 dark:text-green-400"},Uy={class:"flex space-x-3 pt-4"},Ly=["disabled"],Td=Qe({__name:"CloudPasswordSetup",emits:["close","setupComplete"],setup(t,{emit:e}){const r=e,n=Q(""),s=Q(""),o=Q(!1),a=Q(!1),i=Q(!1),l=Q(!1),u=ue(()=>St.validatePassword(n.value)),c=ue(()=>n.value?u.value.errors:[]),d=ue(()=>{if(!n.value)return 0;let v=0;return n.value.length>=8&&v++,/[a-z]/.test(n.value)&&v++,/[A-Z]/.test(n.value)&&v++,/[0-9]/.test(n.value)&&v++,/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(n.value)&&v++,Math.min(v,4)}),f=ue(()=>{switch(d.value){case 0:case 1:return"弱い";case 2:return"普通";case 3:return"強い";case 4:return"とても強い";default:return"不明"}}),h=ue(()=>u.value.isValid&&n.value===s.value&&n.value.length>0);function m(){const v=St.generateSecurePassword(16);n.value=v,s.value=v,l.value=!0,setTimeout(()=>{l.value=!1},3e3)}async function y(){if(h.value)try{if(i.value=!0,!await St.testEncryption(n.value))throw new Error("パスワードの検証に失敗しました");r("setupComplete",n.value)}catch(v){console.error("Password setup failed:",v)}finally{i.value=!1}}return ar(n,()=>{l.value&&(l.value=!1)}),(v,p)=>(O(),L("div",py,[g("div",vy,[g("div",yy,[g("div",my,[p[7]||(p[7]=g("h3",{class:"text-lg font-medium text-gray-900 dark:text-white"}," クラウドパスワード設定 ",-1)),g("button",{onClick:p[0]||(p[0]=x=>v.$emit("close")),class:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300"},p[6]||(p[6]=[g("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[g("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))])]),g("div",wy,[p[17]||(p[17]=Tt('<div class="mb-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg"><div class="flex items-start space-x-3"><svg class="w-6 h-6 text-blue-500 mt-0.5" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path></svg><div><h4 class="text-sm font-medium text-blue-800 dark:text-blue-400 mb-2"> クラウドパスワードについて </h4><p class="text-sm text-blue-700 dark:text-blue-300"> このパスワードはGoogle Driveに保存されるデータの暗号化に使用されます。 セキュリティのため、このパスワードは当アプリケーションでは保存されません。 </p></div></div></div>',1)),g("form",{onSubmit:ps(y,["prevent"]),class:"space-y-4"},[g("div",null,[p[11]||(p[11]=g("label",{for:"password",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," クラウドパスワード ",-1)),g("div",by,[ct(g("input",{id:"password","onUpdate:modelValue":p[1]||(p[1]=x=>n.value=x),type:o.value?"text":"password",class:He(["w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:text-white",{"border-red-500":c.value.length>0}]),placeholder:"安全なパスワードを入力"},null,10,_y),[[no,n.value]]),g("button",{type:"button",onClick:p[2]||(p[2]=x=>o.value=!o.value),class:"absolute inset-y-0 right-0 pr-3 flex items-center"},[o.value?(O(),L("svg",Ey,p[8]||(p[8]=[g("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"},null,-1)]))):(O(),L("svg",ky,p[9]||(p[9]=[g("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),g("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)])))])]),g("div",Cy,[g("div",Dy,[(O(),L(Oe,null,_t(4,x=>g("div",{key:x,class:He(["h-1 flex-1 rounded-full",[x<=d.value?d.value<=1?"bg-red-500":d.value<=2?"bg-yellow-500":d.value<=3?"bg-blue-500":"bg-green-500":"bg-gray-200 dark:bg-gray-600"]])},null,2)),64))]),g("p",Ay," パスワード強度: "+Z(f.value),1)]),c.value.length>0?(O(),L("div",By,[g("ul",Sy,[(O(!0),L(Oe,null,_t(c.value,x=>(O(),L("li",{key:x,class:"flex items-center space-x-1"},[p[10]||(p[10]=g("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[g("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})],-1)),g("span",null,Z(x),1)]))),128))])])):oe("",!0)]),g("div",null,[p[15]||(p[15]=g("label",{for:"confirmPassword",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," パスワード確認 ",-1)),g("div",Fy,[ct(g("input",{id:"confirmPassword","onUpdate:modelValue":p[3]||(p[3]=x=>s.value=x),type:a.value?"text":"password",class:He(["w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:text-white",{"border-red-500":s.value&&n.value!==s.value}]),placeholder:"パスワードを再入力"},null,10,Py),[[no,s.value]]),g("button",{type:"button",onClick:p[4]||(p[4]=x=>a.value=!a.value),class:"absolute inset-y-0 right-0 pr-3 flex items-center"},[a.value?(O(),L("svg",Ty,p[12]||(p[12]=[g("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"},null,-1)]))):(O(),L("svg",Ry,p[13]||(p[13]=[g("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),g("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)])))])]),s.value&&n.value!==s.value?(O(),L("div",Iy,p[14]||(p[14]=[g("p",{class:"text-sm text-red-600 dark:text-red-400 flex items-center space-x-1"},[g("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[g("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})]),g("span",null,"パスワードが一致しません")],-1)]))):oe("",!0)]),g("div",$y,[g("button",{type:"button",onClick:m,class:"text-sm text-indigo-600 dark:text-indigo-400 hover:text-indigo-500 dark:hover:text-indigo-300"}," 安全なパスワードを生成 "),l.value?(O(),L("span",Oy," パスワードが生成されました ")):oe("",!0)]),p[16]||(p[16]=Tt('<div class="p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg"><div class="flex items-start space-x-2"><svg class="w-5 h-5 text-yellow-500 mt-0.5" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg><div><p class="text-sm font-medium text-yellow-800 dark:text-yellow-400"> 重要な注意事項 </p><p class="text-sm text-yellow-700 dark:text-yellow-300"> このパスワードを忘れると、クラウドに保存されたデータを復元できなくなります。 安全な場所に保管してください。 </p></div></div></div>',1)),g("div",Uy,[g("button",{type:"button",onClick:p[5]||(p[5]=x=>v.$emit("close")),class:"flex-1 bg-gray-300 dark:bg-gray-600 hover:bg-gray-400 dark:hover:bg-gray-500 text-gray-700 dark:text-gray-200 font-medium py-2 px-4 rounded-lg transition-colors"}," キャンセル "),g("button",{type:"submit",disabled:!h.value||i.value,class:"flex-1 bg-indigo-600 hover:bg-indigo-700 disabled:bg-indigo-400 text-white font-medium py-2 px-4 rounded-lg transition-colors disabled:cursor-not-allowed"},Z(i.value?"設定中...":"設定完了"),9,Ly)])],32)])])]))}});class Hy{constructor(){_e(this,"appFolderId",null)}async ensureAuthenticated(){if(!qe.isAuthenticated.value)throw new Error("Not authenticated with Google")}async makeApiRequest(e,r,n={}){await this.ensureAuthenticated();const s=qe.getAccessToken();if(!s)throw new Error("No access token available");const o={Authorization:`Bearer ${s}`,"Content-Type":"application/json",...n.headers},a=await fetch(r,{method:e,headers:o,body:n.body});if(!a.ok){if(a.status===401){const i=await qe.refreshToken();if(i){o.Authorization=`Bearer ${i}`;const l=await fetch(r,{method:e,headers:o,body:n.body});if(!l.ok)throw new Error(`API request failed: ${l.status}`);return l.json()}}throw new Error(`API request failed: ${a.status}`)}return a.json()}async getOrCreateAppFolder(){if(this.appFolderId)return this.appFolderId;try{const e=await this.makeApiRequest("GET",`https://www.googleapis.com/drive/v3/files?q=name='${$t.appFolder}' and mimeType='application/vnd.google-apps.folder' and trashed=false`);if(e.files&&e.files.length>0)return this.appFolderId=e.files[0].id,this.appFolderId;const r=await this.makeApiRequest("POST","https://www.googleapis.com/drive/v3/files",{body:JSON.stringify({name:$t.appFolder,mimeType:"application/vnd.google-apps.folder"})});return this.appFolderId=r.id,this.appFolderId}catch(e){throw console.error("Failed to get or create app folder:",e),new Error(Ft.UPLOAD_FAILED)}}async listFiles(e){try{const r=e||await this.getOrCreateAppFolder();return(await this.makeApiRequest("GET",`https://www.googleapis.com/drive/v3/files?q='${r}' in parents and trashed=false&fields=files(id,name,mimeType,modifiedTime,size,parents)`)).files||[]}catch(r){throw console.error("Failed to list files:",r),new Error(Ft.DOWNLOAD_FAILED)}}async getFile(e){try{return await this.makeApiRequest("GET",`https://www.googleapis.com/drive/v3/files/${e}?fields=id,name,mimeType,modifiedTime,size,parents`)}catch(r){throw console.error("Failed to get file metadata:",r),new Error(Ft.DOWNLOAD_FAILED)}}async downloadFile(e){try{await this.ensureAuthenticated();const r=qe.getAccessToken();if(!r)throw new Error("No access token available");const n=await fetch(`https://www.googleapis.com/drive/v3/files/${e}?alt=media`,{headers:{Authorization:`Bearer ${r}`}});if(!n.ok)throw new Error(`Download failed: ${n.status}`);return await n.text()}catch(r){throw console.error("Failed to download file:",r),new Error(Ft.DOWNLOAD_FAILED)}}async uploadFile(e){var r;try{const n=await this.getOrCreateAppFolder();e.metadata.parents||(e.metadata.parents=[n]);const s="-------314159265358979323846",o=`\r
--${s}\r
`,a=`\r
--${s}--`;let i=o;return i+=`Content-Type: application/json\r
\r
`,i+=JSON.stringify(e.metadata)+o,i+=`Content-Type: ${((r=e.media)==null?void 0:r.mimeType)||"application/json"}\r
\r
`,i+=e.data,i+=a,await this.makeApiRequest("POST","https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart&fields=id,name,mimeType,modifiedTime,size,parents",{headers:{"Content-Type":`multipart/related; boundary="${s}"`},body:i})}catch(n){throw console.error("Failed to upload file:",n),new Error(Ft.UPLOAD_FAILED)}}async updateFile(e,r,n){try{return await this.makeApiRequest("PATCH",`https://www.googleapis.com/upload/drive/v3/files/${e}?uploadType=media&fields=id,name,mimeType,modifiedTime,size,parents`,{headers:{"Content-Type":"application/json"},body:r})}catch(s){throw console.error("Failed to update file:",s),new Error(Ft.UPLOAD_FAILED)}}async deleteFile(e){try{await this.makeApiRequest("DELETE",`https://www.googleapis.com/drive/v3/files/${e}`)}catch(r){throw console.error("Failed to delete file:",r),new Error("ファイルの削除に失敗しました")}}async findBackupFile(){try{const e=await this.getOrCreateAppFolder(),r=await this.makeApiRequest("GET",`https://www.googleapis.com/drive/v3/files?q=name='${$t.backupFileName}' and '${e}' in parents and trashed=false&fields=files(id,name,mimeType,modifiedTime,size,parents)&orderBy=modifiedTime desc`);return r.files&&r.files.length>0?r.files[0]:null}catch(e){return console.error("Failed to find backup file:",e),null}}async getQuotaInfo(){try{const r=(await this.makeApiRequest("GET","https://www.googleapis.com/drive/v3/about?fields=storageQuota")).storageQuota;return{used:parseInt(r.usage||"0"),limit:parseInt(r.limit||"0")}}catch(e){return console.error("Failed to get quota info:",e),{used:0,limit:0}}}async getUserInfo(){try{const r=(await this.makeApiRequest("GET","https://www.googleapis.com/drive/v3/about?fields=user")).user;return{name:(r==null?void 0:r.displayName)||(r==null?void 0:r.emailAddress)||"Unknown User",email:(r==null?void 0:r.emailAddress)||"unknown@example.com",picture:(r==null?void 0:r.photoLink)||void 0}}catch(e){return console.error("Failed to get user info:",e),{name:"Unknown User",email:"unknown@example.com"}}}}const It=new Hy,xo=Object.freeze(Object.defineProperty({__proto__:null,googleDriveApiService:It},Symbol.toStringTag,{value:"Module"}));class My{constructor(){_e(this,"_status",Q({isEnabled:!1,isSyncing:!1,lastSyncTime:null,lastSyncError:null,cloudFileExists:!1,localDataExists:!1,conflictDetected:!1}));_e(this,"_cloudPassword",Q(null));_e(this,"_conflictData",Q(null));_e(this,"syncTimer",null);_e(this,"conflictCheckTimer",null);this.loadSyncStatus(),this.performInitialCleanup()}get status(){return ue(()=>this._status.value)}get isEnabled(){return ue(()=>this._status.value.isEnabled)}get isSyncing(){return ue(()=>this._status.value.isSyncing)}get hasCloudPassword(){return ue(()=>this._cloudPassword.value!==null)}get conflictData(){return ue(()=>this._conflictData.value)}clearConflictState(){console.log("[DEBUG] SyncService.clearConflictState() called"),this._status.value.conflictDetected=!1,this._conflictData.value=null,this._status.value.lastSyncError=null,this.saveSyncStatus()}async getUnsyncedDataCount(){try{const{metadataService:e}=await ce(async()=>{const{metadataService:n}=await import("./metadata.service-8MYvfiJN.js");return{metadataService:n}},[]);return(await e.getUnsyncedDataCount()).total}catch(e){return console.error("Failed to get unsynced data count:",e),0}}setCloudPassword(e){this._cloudPassword.value=e}async loadSyncStatus(){try{const e=localStorage.getItem("syncStatus");if(e){const n=JSON.parse(e);this._status.value={...this._status.value,...n}}if(this._status.value.isEnabled){const n=localStorage.getItem("cloudPassword");n?this._cloudPassword.value=n:this._status.value.isEnabled=!1}const r=await ge.holdings.toArray();this._status.value.localDataExists=r.length>0,qe.isAuthenticated.value&&await this.checkCloudFileExists();try{const{metadataService:n}=await ce(async()=>{const{metadataService:s}=await import("./metadata.service-8MYvfiJN.js");return{metadataService:s}},[]);this._status.value.lastSyncTime&&n.setGlobalSyncTime(new Date(this._status.value.lastSyncTime))}catch(n){console.warn("Failed to initialize metadata service:",n)}}catch(e){console.error("Failed to load sync status:",e)}}saveSyncStatus(){const e={isEnabled:this._status.value.isEnabled,lastSyncTime:this._status.value.lastSyncTime,lastSyncError:this._status.value.lastSyncError};localStorage.setItem("syncStatus",JSON.stringify(e)),this._status.value.isEnabled&&this._cloudPassword.value?localStorage.setItem("cloudPassword",this._cloudPassword.value):this._status.value.isEnabled||localStorage.removeItem("cloudPassword")}async checkCloudFileExists(){try{console.log("Checking for cloud backup file...");const e=await It.findBackupFile();this._status.value.cloudFileExists=e!==null,console.log("Cloud file check result:",e!==null),console.log("Backup file:",e)}catch(e){console.error("Failed to check cloud file existence:",e),this._status.value.cloudFileExists=!1}}async enableSync(e){try{if(!qe.isAuthenticated.value)throw new Error("Google認証が必要です");const r=St.validatePassword(e);if(!r.isValid)throw new Error(`パスワードが要件を満たしていません: ${r.errors.join(", ")}`);if(!await St.testEncryption(e))throw new Error("暗号化テストに失敗しました");this._cloudPassword.value=e;const{authService:s}=await ce(async()=>{const{authService:l}=await Promise.resolve().then(()=>xn);return{authService:l}},void 0),{secureStorage:o}=await ce(async()=>{const{secureStorage:l}=await Promise.resolve().then(()=>Kt);return{secureStorage:l}},void 0),a=await o.getAuthState();if(console.log("[DEBUG] enableSync - existing authState:",a),a.passwordHash&&a.salt)if((await s.unlockWithPassword(e)).success)console.log("[DEBUG] enableSync - existing user unlocked successfully");else{if(console.log("[DEBUG] enableSync - password mismatch, clearing incompatible data"),await o.clearIncompatibleEncryptedData(),!(await s.setupPassword(e)).success)throw new Error("ローカル暗号化キーの再設定に失敗しました");console.log("[DEBUG] enableSync - password reset and new key setup completed")}else{if(!(await s.setupPassword(e)).success)throw new Error("ローカル暗号化キーの設定に失敗しました");console.log("[DEBUG] enableSync - new user password setup completed")}this._status.value.isEnabled=!0,this._status.value.lastSyncError=null;const i=await this.performSync();return i.success&&this.startAutoSync(),this.saveSyncStatus(),i}catch(r){return console.error("Failed to enable sync:",r),{success:!1,message:(r==null?void 0:r.message)||"クラウド同期の有効化に失敗しました"}}}async enableSyncForNewUser(e){try{if(!qe.isAuthenticated.value)throw new Error("Google認証が必要です");const r=St.validatePassword(e);if(!r.isValid)throw new Error(`パスワードが要件を満たしていません: ${r.errors.join(", ")}`);if(!await St.testEncryption(e))throw new Error("暗号化テストに失敗しました");this._cloudPassword.value=e;const{authService:s}=await ce(async()=>{const{authService:l}=await Promise.resolve().then(()=>xn);return{authService:l}},void 0),{secureStorage:o}=await ce(async()=>{const{secureStorage:l}=await Promise.resolve().then(()=>Kt);return{secureStorage:l}},void 0);if(!(await s.setupPassword(e)).success)throw new Error("ローカル暗号化キーの設定に失敗しました");console.log("[DEBUG] enableSyncForNewUser - password setup completed"),this._status.value.isEnabled=!0,this._status.value.lastSyncError=null,console.log("Creating initial empty data file for new user...");const i={holdings:[],locations:[],tokens:[]};return await this.uploadToCloud(i),console.log("Initial data file created successfully"),this._status.value.cloudFileExists=!0,this._status.value.lastSyncTime=Date.now(),this.startAutoSync(),this.saveSyncStatus(),{success:!0,message:"クラウド同期が有効になりました"}}catch(r){return console.error("Failed to enable sync for new user:",r),{success:!1,message:(r==null?void 0:r.message)||"クラウド同期の有効化に失敗しました"}}}async disableSync(){this._status.value.isEnabled=!1,this._cloudPassword.value=null,this.stopAutoSync();try{const{secureStorage:e}=await ce(async()=>{const{secureStorage:r}=await Promise.resolve().then(()=>Kt);return{secureStorage:r}},void 0);e.clearEncryptionKey()}catch(e){console.warn("Failed to clear local encryption key:",e)}this.saveSyncStatus()}async performSync(){var e,r,n,s,o,a;if(!this._status.value.isEnabled||!qe.isAuthenticated.value)return{success:!1,message:"同期が無効または認証されていません"};if(this._status.value.isSyncing)return{success:!1,message:"同期中です"};try{this._status.value.isSyncing=!0,this._status.value.lastSyncError=null,console.log("[DEBUG] performSync - starting sync process");const i=await this.getLocalData(),l=await this.getLocalTimestamp();console.log("[DEBUG] performSync - local data retrieved:",{holdingsCount:((e=i.holdings)==null?void 0:e.length)||0,tokensCount:((r=i.tokens)==null?void 0:r.length)||0,locationsCount:((n=i.locations)==null?void 0:n.length)||0,localTimestamp:new Date(l).toISOString()});const u=await It.findBackupFile();if(console.log("[DEBUG] performSync - backup file check:",u?"exists":"not found"),!u){console.log("[DEBUG] performSync - uploading initial backup"),await this.uploadToCloud(i),this._status.value.lastSyncTime=Date.now(),this._status.value.cloudFileExists=!0,this.saveSyncStatus();const{metadataService:p}=await ce(async()=>{const{metadataService:x}=await import("./metadata.service-8MYvfiJN.js");return{metadataService:x}},[]);return await p.markAllAsSynced(),console.log("[DEBUG] performSync - initial upload completed, all data marked as synced"),{success:!0,message:"初回同期が完了しました"}}console.log("[DEBUG] performSync - downloading cloud data");const c=await this.downloadFromCloud(u.id);console.log("[DEBUG] performSync - cloud data retrieved:",{holdingsCount:((s=c.portfolioData.holdings)==null?void 0:s.length)||0,tokensCount:((o=c.portfolioData.tokens)==null?void 0:o.length)||0,locationsCount:((a=c.portfolioData.locations)==null?void 0:a.length)||0,cloudTimestamp:new Date(c.timestamp).toISOString()});const d=this.createDataHash(i),f=this.createDataHash(c.portfolioData);if(console.log("[DEBUG] performSync - hash comparison:",{localHash:d.substring(0,50)+"...",cloudHash:f.substring(0,50)+"...",hashesMatch:d===f}),d===f){console.log("[DEBUG] performSync - data identical, updating timestamps only"),this._status.value.lastSyncTime=Date.now(),this.saveSyncStatus();const{metadataService:p}=await ce(async()=>{const{metadataService:x}=await import("./metadata.service-8MYvfiJN.js");return{metadataService:x}},[]);return await p.markAllAsSynced(),console.log("[DEBUG] performSync - sync completed successfully (no changes needed)"),{success:!0,message:"同期が完了しました（変更なし）"}}const h=await this.hasNewLocalData();if(console.log("[DEBUG] performSync - has new local data:",h),h&&!this.hasConflictingModifications(i,c.portfolioData)){console.log("[DEBUG] performSync - new data only, uploading to cloud"),await this.uploadToCloud(i),this._status.value.lastSyncTime=Date.now(),this._status.value.cloudFileExists=!0,this.saveSyncStatus();const{metadataService:p}=await ce(async()=>{const{metadataService:x}=await import("./metadata.service-8MYvfiJN.js");return{metadataService:x}},[]);return await p.markAllAsSynced(),console.log("[DEBUG] performSync - new data uploaded successfully"),{success:!0,message:"新しいデータが同期されました"}}const m=await this.detectConflict(i,c,l);if(console.log("[DEBUG] performSync - conflict detection result:",m),m)return this._conflictData.value={localData:i,cloudData:c.portfolioData,localTimestamp:l,cloudTimestamp:c.timestamp},this._status.value.conflictDetected=!0,this.saveSyncStatus(),console.log("[DEBUG] performSync - conflict detected, stored for resolution"),{success:!1,message:"データに競合が検出されました。競合を解決してください。",conflictData:this._conflictData.value};console.log("[DEBUG] performSync - no conflict, merging data");const y=await this.mergeData(i,c,l);await this.updateLocalData(y),await this.uploadToCloud(y),this._status.value.lastSyncTime=Date.now(),this._status.value.cloudFileExists=!0,this.saveSyncStatus();const{metadataService:v}=await ce(async()=>{const{metadataService:p}=await import("./metadata.service-8MYvfiJN.js");return{metadataService:p}},[]);return await v.markAllAsSynced(),console.log("[DEBUG] performSync - merge completed, all data marked as synced"),{success:!0,message:"同期が完了しました"}}catch(i){console.error("[DEBUG] performSync - error occurred:",i);const l=(i==null?void 0:i.message)||"同期中にエラーが発生しました";return this._status.value.lastSyncError=l,this.saveSyncStatus(),{success:!1,message:l}}finally{this._status.value.isSyncing=!1}}async updateLocalTimestamps(e){this._status.value.lastSyncTime=e,localStorage.setItem("lastDataModified",e.toString()),this.saveSyncStatus();const{metadataService:r}=await ce(async()=>{const{metadataService:n}=await import("./metadata.service-8MYvfiJN.js");return{metadataService:n}},[]);await r.markAllAsSynced()}async getLocalData(){const{secureStorage:e}=await ce(async()=>{const{secureStorage:o}=await Promise.resolve().then(()=>Kt);return{secureStorage:o}},void 0);let r=[];try{r=await e.getHoldings()}catch(o){if(console.error("[DEBUG] getLocalData - failed to get holdings:",o),o.message==="ENCRYPTION_KEY_MISMATCH")console.log("[DEBUG] getLocalData - clearing incompatible encrypted data"),await e.clearIncompatibleEncryptedData(),r=[];else throw o}const n=await ge.locations.toArray(),s=await ge.tokens.toArray();return{holdings:r,locations:n,tokens:s}}async getLocalTimestamp(){const e=localStorage.getItem("lastDataModified");return e?parseInt(e):0}async uploadToCloud(e){if(!this._cloudPassword.value)throw new Error("クラウドパスワードが設定されていません");const r=await St.encryptPortfolioData(e,this._cloudPassword.value),n=JSON.stringify(r);if(n.length>D0.maxBackupSize)throw new Error("バックアップファイルのサイズが上限を超えています");const s=await It.findBackupFile();s?await It.updateFile(s.id,n):await It.uploadFile({data:n,metadata:{name:$t.backupFileName,mimeType:"application/json"}})}async downloadFromCloud(e){if(!this._cloudPassword.value)throw new Error("クラウドパスワードが設定されていません");const r=await It.downloadFile(e),n=JSON.parse(r);return await St.decryptPortfolioData(n,this._cloudPassword.value)}async detectConflict(e,r,n){const s=Math.abs(n-r.timestamp);console.log("[DEBUG] Conflict detection:"),console.log("  Local timestamp:",new Date(n).toISOString()),console.log("  Cloud timestamp:",new Date(r.timestamp).toISOString()),console.log("  Time difference (ms):",s);const o=this.createDataHash(e),a=this.createDataHash(r.portfolioData);console.log("  Local data hash:",o),console.log("  Cloud data hash:",a);const i=o!==a;return console.log("  Conflict detected:",i),i}createDataHash(e){const r={holdings:(e.holdings||[]).filter(a=>a&&a.symbol&&a.quantity!=null).map(a=>{var i,l;return{symbol:((l=(i=a.symbol)==null?void 0:i.toUpperCase())==null?void 0:l.trim())||"",quantity:Math.round(parseFloat((a.quantity||0).toString())*1e8)/1e8,locationId:(a.locationId||"").toString().trim(),note:(a.note||"").trim()}}).filter(a=>a.symbol&&a.quantity>0).sort((a,i)=>{const l=a.symbol.localeCompare(i.symbol);if(l!==0)return l;const u=a.locationId.localeCompare(i.locationId);return u!==0?u:a.quantity-i.quantity}),locations:(e.locations||[]).filter(a=>a&&a.id&&a.name&&a.isCustom).map(a=>({id:a.id.toString().trim(),name:a.name.trim(),type:a.type||"custom",isCustom:!0})).sort((a,i)=>a.id.localeCompare(i.id)),tokens:(e.tokens||[]).filter(a=>a&&a.symbol&&a.name).map(a=>{var i,l;return{symbol:((l=(i=a.symbol)==null?void 0:i.toUpperCase())==null?void 0:l.trim())||"",name:a.name.trim(),id:(a.id||"").toString().trim()}}).filter(a=>!["BTC","ETH","BNB","ADA","SOL","XRP","DOT","DOGE","AVAX","SHIB","MATIC","LTC","ATOM","LINK","UNI"].includes(a.symbol)).sort((a,i)=>a.symbol.localeCompare(i.symbol))},n=JSON.stringify(r,null,0);console.log("[DEBUG] createDataHash - normalized data:",{holdingsCount:r.holdings.length,customLocationsCount:r.locations.length,customTokensCount:r.tokens.length,dataString:n.substring(0,200)+"..."});let s=0;for(let a=0;a<n.length;a++){const i=n.charCodeAt(a);s=(s<<5)-s+i,s=s&s}const o=s.toString(16);return console.log("[DEBUG] createDataHash - result:",o),o}async mergeData(e,r,n){return r.timestamp>n?r.portfolioData:e}async updateLocalData(e){var n,s,o;const{secureStorage:r}=await ce(async()=>{const{secureStorage:a}=await Promise.resolve().then(()=>Kt);return{secureStorage:a}},void 0);if(console.log("updateLocalData called with:",e),console.log("[DEBUG] Detailed sync data contents:"),console.log("  Holdings count:",((n=e.holdings)==null?void 0:n.length)||0),console.log("  Holdings data:",e.holdings),console.log("  Tokens count:",((s=e.tokens)==null?void 0:s.length)||0),console.log("  Locations count:",((o=e.locations)==null?void 0:o.length)||0),console.log("secureStorage isUnlocked:",r.isUnlocked()),await ge.holdings.clear(),e.holdings&&Array.isArray(e.holdings)){console.log("Adding holdings:",e.holdings.length);for(const a of e.holdings){console.log("Adding holding:",a);try{await r.addHolding({symbol:a.symbol,quantity:a.quantity,locationId:a.locationId,note:a.note||""}),console.log("Successfully added holding:",a.symbol)}catch(i){throw console.error("Failed to add holding:",a,i),i}}}if(e.locations&&Array.isArray(e.locations)){await ge.locations.clear();const a=e.locations.map(i=>this.cleanObjectForDB(i));await ge.locations.bulkAdd(a)}if(e.tokens&&Array.isArray(e.tokens)){await ge.tokens.clear();const a=e.tokens.map(i=>this.cleanObjectForDB(i));await ge.tokens.bulkAdd(a),console.log("Added tokens:",e.tokens.length)}localStorage.setItem("lastDataModified",Date.now().toString()),console.log("updateLocalData completed successfully")}cleanObjectForDB(e){if(e==null||typeof e!="object")return e;const r={};for(const[n,s]of Object.entries(e))if(s!=null)if(typeof s=="object")Array.isArray(s)?r[n]=s.map(o=>this.cleanObjectForDB(o)):s instanceof Date?r[n]=s:r[n]=this.cleanObjectForDB(s);else{if(typeof s=="function")continue;r[n]=s}return r}async resolveConflict(e,r){try{this._status.value.isSyncing=!0,console.log("[DEBUG] resolveConflict - starting with resolution:",e);let n;switch(e){case"local":n=r.localData;break;case"cloud":n=r.cloudData;break}await this.updateLocalData(n),await this.uploadToCloud(n),this._status.value.conflictDetected=!1,this._conflictData.value=null,this._status.value.lastSyncTime=Date.now(),this._status.value.lastSyncError=null,this.saveSyncStatus();try{const{metadataService:s}=await ce(async()=>{const{metadataService:o}=await import("./metadata.service-8MYvfiJN.js");return{metadataService:o}},[]);await s.markAllAsSynced(),console.log("[DEBUG] resolveConflict - metadata marked as synced")}catch(s){console.warn("[DEBUG] resolveConflict - metadata sync failed:",s)}return console.log("[DEBUG] resolveConflict - completed successfully"),{success:!0,message:"競合が解決されました"}}catch(n){return console.error("Failed to resolve conflict:",n),{success:!1,message:"競合の解決に失敗しました"}}finally{this._status.value.isSyncing=!1}}startAutoSync(){this.syncTimer&&clearInterval(this.syncTimer),this.syncTimer=window.setInterval(async()=>{if(this._status.value.isEnabled&&qe.isAuthenticated.value)try{const e=await this.performSync();e.success?console.log("[DEBUG] Auto sync completed successfully"):(console.warn("[DEBUG] Auto sync failed:",e.message),window.showToast&&window.showToast.warning("定期同期エラー",`定期同期に失敗しました: ${e.message}`))}catch(e){console.error("[DEBUG] Auto sync error:",e),window.showToast&&window.showToast.error("定期同期エラー","定期同期中にエラーが発生しました")}},D0.autoSyncInterval)}stopAutoSync(){this.syncTimer&&(clearInterval(this.syncTimer),this.syncTimer=null)}async resetAutoSyncTimer(){console.log("Resetting auto-sync timer..."),this._status.value.isEnabled&&(this.stopAutoSync(),this.startAutoSync(),console.log("Auto-sync timer reset and restarted"))}async testCloudPassword(e){try{const r=await It.findBackupFile();if(!r)return!0;const n=await It.downloadFile(r.id),s=JSON.parse(n);return await St.decryptPortfolioData(s,e),!0}catch(r){return console.error("Cloud password test failed:",r),!1}}async changeCloudPassword(e,r){try{if(console.log("Starting cloud password change process..."),!qe.isAuthenticated.value)return{success:!1,message:"Google認証が必要です"};if(!await this.testCloudPassword(e))return{success:!1,message:"現在のパスワードが正しくありません"};console.log("Current password verified");const s=await It.findBackupFile();if(!s)return{success:!1,message:"クラウドバックアップファイルが見つかりません"};const o=await It.downloadFile(s.id),a=JSON.parse(o),i=await St.decryptPortfolioData(a,e);console.log("Successfully decrypted cloud data with current password");const{authService:l}=await ce(async()=>{const{authService:d}=await Promise.resolve().then(()=>xn);return{authService:d}},void 0),{secureStorage:u}=await ce(async()=>{const{secureStorage:d}=await Promise.resolve().then(()=>Kt);return{secureStorage:d}},void 0);return(await l.setupPassword(r)).success?(console.log("Local password updated successfully"),this._cloudPassword.value=r,await this.uploadToCloud(i.portfolioData),console.log("Successfully re-encrypted and uploaded data with new password"),this.saveSyncStatus(),console.log("Cloud password change completed successfully"),{success:!0,message:"パスワードが正常に変更されました"}):{success:!1,message:"ローカルパスワードの更新に失敗しました"}}catch(n){return console.error("Cloud password change failed:",n),{success:!1,message:n.message||"パスワード変更中にエラーが発生しました"}}}async performInitialCleanup(){try{console.log("[DEBUG] SyncService - performing initial cleanup"),this._status.value.conflictDetected=!1,this._conflictData.value=null;const e=localStorage.getItem("lastDataModified");if(e){const r=parseInt(e),n=Date.now();(r<9466848e5||r>n+864e5)&&(console.log("[DEBUG] SyncService - clearing invalid lastDataModified:",r),localStorage.removeItem("lastDataModified"))}this.saveSyncStatus(),console.log("[DEBUG] SyncService - initial cleanup completed")}catch(e){console.warn("[DEBUG] SyncService - initial cleanup failed:",e)}}async hasNewLocalData(){try{const{metadataService:e}=await ce(async()=>{const{metadataService:n}=await import("./metadata.service-8MYvfiJN.js");return{metadataService:n}},[]);return(await e.getUnsyncedDataCount()).total>0}catch(e){return console.warn("[DEBUG] hasNewLocalData - error:",e),!1}}hasConflictingModifications(e,r){const n=(e.holdings||[]).length,s=(r.holdings||[]).length;return n<s?(console.log("[DEBUG] hasConflictingModifications - holdings count decreased, potential deletion"),!0):!1}destroy(){this.stopAutoSync(),this.conflictCheckTimer&&clearInterval(this.conflictCheckTimer)}}const Be=new My,zr=Object.freeze(Object.defineProperty({__proto__:null,syncService:Be},Symbol.toStringTag,{value:"Module"})),Gy={class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"},jy={class:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full"},zy={class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},Ny={class:"flex items-center justify-between"},Ky={class:"px-6 py-4"},Vy={class:"mb-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg"},qy={class:"flex items-start space-x-3"},Wy={class:"text-sm font-medium text-blue-800 dark:text-blue-400 mb-2"},Yy={class:"text-sm text-blue-700 dark:text-blue-300"},Qy={key:0,class:"mb-4 p-3 bg-red-50 dark:bg-red-900/20 rounded-md"},Xy={class:"flex items-start space-x-2"},Jy={class:"text-sm text-red-700 dark:text-red-300"},Zy={class:"relative"},em=["type"],tm={key:0,class:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},rm={key:1,class:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},nm={key:0,class:"flex items-center"},sm={class:"flex space-x-3 pt-4"},om=["disabled"],am={key:1,class:"mt-4 text-center"},im={class:"text-sm text-gray-600 dark:text-gray-400"},lm={key:0,class:"text-sm text-red-600 dark:text-red-400 mt-1"},cm={class:"mt-6 text-center"},um={key:2,class:"mt-4 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg"},Rd=Qe({__name:"CloudPasswordPrompt",props:{promptType:{default:"sync"},showRememberOption:{type:Boolean,default:!0},maxRetries:{default:5}},emits:["close","passwordProvided","forgotPassword"],setup(t,{emit:e}){const r=t,n=e,s=Q(""),o=Q(!1),a=Q(!1),i=Q(!1),l=Q(""),u=Q(0),c=Q(!1),d=Q();async function f(){if(s.value.trim())try{if(i.value=!0,l.value="",r.promptType==="sync"&&!await Be.testCloudPassword(s.value))throw new Error("パスワードが正しくありません");n("passwordProvided",s.value,a.value)}catch(m){u.value++,l.value=m instanceof Error?m.message:"パスワードの認証に失敗しました",s.value="",Kr(()=>{var y;(y=d.value)==null||y.focus()}),u.value>=r.maxRetries&&(l.value="試行回数が上限に達しました。しばらく待ってから再試行してください。",setTimeout(()=>{u.value=0,l.value=""},6e4)),i.value=!1}}function h(){n("forgotPassword")}return gr(()=>{Kr(()=>{var m;(m=d.value)==null||m.focus()})}),(m,y)=>(O(),L("div",Gy,[g("div",jy,[g("div",zy,[g("div",Ny,[y[7]||(y[7]=g("h3",{class:"text-lg font-medium text-gray-900 dark:text-white"}," クラウドパスワード入力 ",-1)),g("button",{onClick:y[0]||(y[0]=v=>m.$emit("close")),class:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300"},y[6]||(y[6]=[g("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[g("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))])]),g("div",Ky,[g("div",Vy,[g("div",qy,[y[8]||(y[8]=g("svg",{class:"w-6 h-6 text-blue-500 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20"},[g("path",{"fill-rule":"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z","clip-rule":"evenodd"})],-1)),g("div",null,[g("h4",Wy,Z(m.promptType==="sync"?"データ同期のため":"データ復元のため"),1),g("p",Yy,Z(m.promptType==="sync"?"クラウドデータにアクセスするためにパスワードを入力してください。":"クラウドに保存されたデータを復号化するためにパスワードを入力してください。"),1)])])]),l.value?(O(),L("div",Qy,[g("div",Xy,[y[10]||(y[10]=g("svg",{class:"w-5 h-5 text-red-500 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20"},[g("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})],-1)),g("div",null,[y[9]||(y[9]=g("p",{class:"text-sm font-medium text-red-800 dark:text-red-400"}," 認証エラー ",-1)),g("p",Jy,Z(l.value),1)])])])):oe("",!0),g("form",{onSubmit:ps(f,["prevent"]),class:"space-y-4"},[g("div",null,[y[13]||(y[13]=g("label",{for:"cloudPassword",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," クラウドパスワード ",-1)),g("div",Zy,[ct(g("input",{id:"cloudPassword","onUpdate:modelValue":y[1]||(y[1]=v=>s.value=v),type:o.value?"text":"password",class:He(["w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:text-white",{"border-red-500":l.value}]),placeholder:"クラウドパスワードを入力",ref_key:"passwordInput",ref:d},null,10,em),[[no,s.value]]),g("button",{type:"button",onClick:y[2]||(y[2]=v=>o.value=!o.value),class:"absolute inset-y-0 right-0 pr-3 flex items-center"},[o.value?(O(),L("svg",tm,y[11]||(y[11]=[g("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"},null,-1)]))):(O(),L("svg",rm,y[12]||(y[12]=[g("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),g("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)])))])])]),m.showRememberOption?(O(),L("div",nm,[ct(g("input",{id:"rememberPassword","onUpdate:modelValue":y[3]||(y[3]=v=>a.value=v),type:"checkbox",class:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"},null,512),[[Vi,a.value]]),y[14]||(y[14]=g("label",{for:"rememberPassword",class:"ml-2 block text-sm text-gray-700 dark:text-gray-300"}," セッション中はパスワードを記憶する ",-1))])):oe("",!0),y[15]||(y[15]=g("div",{class:"text-sm text-gray-600 dark:text-gray-400"},[g("p",null," このパスワードは設定時に使用したクラウドパスワードです。 アプリケーションパスワードとは異なります。 ")],-1)),g("div",sm,[g("button",{type:"button",onClick:y[4]||(y[4]=v=>m.$emit("close")),class:"flex-1 bg-gray-300 dark:bg-gray-600 hover:bg-gray-400 dark:hover:bg-gray-500 text-gray-700 dark:text-gray-200 font-medium py-2 px-4 rounded-lg transition-colors"}," キャンセル "),g("button",{type:"submit",disabled:!s.value.trim()||i.value,class:"flex-1 bg-indigo-600 hover:bg-indigo-700 disabled:bg-indigo-400 text-white font-medium py-2 px-4 rounded-lg transition-colors disabled:cursor-not-allowed"},Z(i.value?"認証中...":"認証"),9,om)])],32),u.value>0?(O(),L("div",am,[g("p",im," 認証失敗回数: "+Z(u.value)+"/"+Z(m.maxRetries),1),u.value>=m.maxRetries-1?(O(),L("p",lm," 次回の失敗でしばらくの間試行がブロックされます ")):oe("",!0)])):oe("",!0),g("div",cm,[g("button",{onClick:y[5]||(y[5]=v=>c.value=!c.value),class:"text-sm text-indigo-600 dark:text-indigo-400 hover:text-indigo-500 dark:hover:text-indigo-300"}," パスワードを忘れた場合は？ ")]),c.value?(O(),L("div",um,[y[16]||(y[16]=g("h5",{class:"text-sm font-medium text-gray-900 dark:text-white mb-2"}," パスワードを忘れた場合 ",-1)),y[17]||(y[17]=g("ul",{class:"text-sm text-gray-700 dark:text-gray-300 space-y-1"},[g("li",null,"• クラウドパスワードは復旧できません"),g("li",null,"• Google Driveの既存バックアップは使用できなくなります"),g("li",null,"• 新しいパスワードでクラウド同期を再設定する必要があります"),g("li",null,"• ローカルデータは影響を受けません")],-1)),g("div",{class:"mt-3"},[g("button",{onClick:h,class:"text-sm bg-yellow-600 hover:bg-yellow-700 text-white px-3 py-1 rounded transition-colors"}," 新しいパスワードで再設定 ")])])):oe("",!0)])])]))}}),dm={class:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 py-12 px-4 sm:px-6 lg:px-8"},fm={class:"max-w-md w-full space-y-8"},hm={class:"mt-8 space-y-6"},xm=["disabled"],gm={key:0,class:"absolute left-0 inset-y-0 flex items-center pl-3"},pm={key:1,class:"w-5 h-5 mr-3",viewBox:"0 0 24 24"},vm={key:0,class:"text-sm text-red-600 dark:text-red-400 text-center whitespace-pre-line"},ym={class:"text-center"},mm={key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full flex items-center justify-center p-4 z-50"},wm={class:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full p-6"},bm={class:"flex space-x-3"},_m=Qe({__name:"LoginForm",emits:["loginSuccess"],setup(t,{emit:e}){const r=e,n=Q(!1),s=Q(""),o=Q(!1),a=Q(!1),i=Q(!1);async function l(){if(!n.value){s.value="",n.value=!0;try{await qe.authenticateAndInitialize()==="existing_user"?i.value=!0:a.value=!0}catch(p){console.error("Google authentication failed:",p),s.value=qe.error.value||"認証に失敗しました"}finally{n.value=!1}}}async function u(p){try{n.value=!0,s.value="";const x=await Be.enableSyncForNewUser(p);if(!x.success)throw new Error(x.message);await d(p,!0),a.value=!1,console.log("[DEBUG] Emitting loginSuccess from handlePasswordSetup"),r("loginSuccess")}catch(x){console.error("Password setup failed:",x),s.value=x instanceof Error?x.message:"パスワードの設定に失敗しました"}finally{n.value=!1}}async function c(p){try{if(n.value=!0,s.value="",!await Be.testCloudPassword(p))throw new Error("パスワードが正しくありません");await d(p,!1);const w=await Be.enableSync(p);if(!w.success)if(w.message==="同期競合が検出されました"&&w.conflictData)i.value=!1,console.log("[DEBUG] Sync conflict detected, conflict data:",w.conflictData);else throw new Error(w.message);i.value=!1,console.log("[DEBUG] Emitting loginSuccess from handlePasswordAuth"),r("loginSuccess")}catch(x){console.error("Password authentication failed:",x),s.value=x instanceof Error?x.message:"パスワードの認証に失敗しました"}finally{n.value=!1}}async function d(p,x=!1){try{const{useSessionStore:w}=await ce(async()=>{const{useSessionStore:C}=await Promise.resolve().then(()=>Id);return{useSessionStore:C}},void 0),{secureStorage:b}=await ce(async()=>{const{secureStorage:C}=await Promise.resolve().then(()=>Kt);return{secureStorage:C}},void 0),{authService:E}=await ce(async()=>{const{authService:C}=await Promise.resolve().then(()=>xn);return{authService:C}},void 0),{nextTick:k}=await ce(async()=>{const{nextTick:C}=await Promise.resolve().then(()=>Xh);return{nextTick:C}},void 0),_=w();if(p&&!b.isUnlocked())if(x){console.log("Setting up encryption key for new user");const C=await E.setupPassword(p);if(!C.success)throw new Error(C.error||"パスワード設定に失敗しました");console.log("[DEBUG] New user password setup completed, storage unlocked:",b.isUnlocked())}else{console.log("Unlocking storage for existing user");const C=await E.unlockWithPassword(p);if(!C.success)throw new Error(C.error||"パスワードでのロック解除に失敗しました");console.log("[DEBUG] Existing user unlock completed, storage unlocked:",b.isUnlocked())}else b.isUnlocked()?console.log("[DEBUG] Storage is already unlocked"):console.log("[DEBUG] No password provided or other condition not met");if(await _.login("google-drive"),!b.isUnlocked())throw new Error("セキュアストレージのロックが解除されていません");if(x){console.log("Initializing database for new user..."),console.log("[DEBUG] Storage unlocked status before DB test:",b.isUnlocked());try{console.log("[DEBUG] Clearing existing encrypted data for new user..."),await b.clearAllDataForNewUser(),console.log("[DEBUG] Existing data cleared successfully"),console.log("[DEBUG] Testing basic database connectivity..."),console.log("[DEBUG] Database opened successfully");const C=await ge.locations.count(),S=await ge.holdings.count();console.log("[DEBUG] Database table counts - locations:",C,"holdings:",S);const A=await b.getHoldings();console.log("[DEBUG] Successfully accessed holdings with new key, count:",A.length)}catch(C){console.log("Database initialization failed:",C),console.log("Error name:",C.name),console.log("Error message:",C.message),console.log("Error stack:",C.stack);try{console.log("[DEBUG] Attempting to close and reopen database..."),await ge.close(),await ge.open(),console.log("[DEBUG] Database reopened successfully"),await b.clearAllDataForNewUser();const S=await b.getHoldings();console.log("[DEBUG] Data cleared and tested successfully")}catch(S){console.log("Database reopen failed:",S);try{await b.clearAllDataForNewUser(),console.log("Database clear completed");const A=await b.getHoldings();console.log("[DEBUG] Clear completed successfully")}catch(A){console.log("Database clear failed:",A)}}}}console.log("App session initialized successfully"),console.log("[DEBUG] sessionStore.isAuthenticated after login:",_.isAuthenticated),console.log("[DEBUG] About to emit loginSuccess"),await k()}catch(w){throw console.error("Failed to initialize app session:",w),new Error("アプリセッションの初期化に失敗しました")}}function f(){a.value=!1,s.value=""}function h(){i.value=!1,s.value=""}function m(){i.value=!1,a.value=!0}async function y(){try{try{if(qe.isAuthenticated.value){const{googleDriveApiService:p}=await ce(async()=>{const{googleDriveApiService:b}=await Promise.resolve().then(()=>xo);return{googleDriveApiService:b}},void 0);let x=0;const w=3;for(;x<w;)try{const b=await p.findBackupFile();if(b){console.log("Deleting Google Drive backup file:",b.name,"ID:",b.id),await p.deleteFile(b.id),console.log("Google Drive backup file deleted successfully");break}else{console.log(`No Google Drive backup file found (attempt ${x+1}/${w})`);const E=await p.listFiles();console.log("All files in app folder:",E.map(_=>({name:_.name,id:_.id})));const k=E.filter(_=>_.name.endsWith(".json"));if(k.length>0){for(const _ of k)console.log("Deleting JSON file:",_.name,"ID:",_.id),await p.deleteFile(_.id),console.log("JSON file deleted successfully");break}else{console.log("No JSON files found in app folder");break}}}catch(b){if(console.warn(`Google Drive file deletion attempt ${x+1} failed:`,b),x++,x>=w)throw b;await new Promise(E=>setTimeout(E,1e3))}}}catch(p){console.warn("Google Drive file deletion failed:",p)}try{await qe.signOut()}catch(p){console.warn("Google sign out failed:",p)}localStorage.clear(),sessionStorage.clear();try{await v("CryptoPortfolioDB"),await v("CryptoPortfolioDBV2")}catch(p){console.warn("IndexedDB deletion failed:",p)}o.value=!1,s.value="",console.log("Reset completed successfully"),window.location.reload()}catch(p){console.error("Reset failed:",p),p.value="リセットに失敗しました"}}function v(p){return new Promise((x,w)=>{const b=indexedDB.deleteDatabase(p);b.onsuccess=()=>x(),b.onerror=()=>w(b.error),b.onblocked=()=>{console.warn(`IndexedDB ${p} deletion blocked`),x()}})}return(p,x)=>(O(),L("div",dm,[g("div",fm,[x[4]||(x[4]=Tt('<div><div class="mx-auto h-12 w-12 flex items-center justify-center rounded-full bg-indigo-100 dark:bg-indigo-900"><svg class="h-6 w-6 text-indigo-600 dark:text-indigo-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path></svg></div><h2 class="mt-6 text-center text-3xl font-extrabold text-gray-900 dark:text-white"> 暗号資産ポートフォリオ </h2><p class="mt-2 text-center text-sm text-gray-600 dark:text-gray-400"> Google アカウントでログインしてください </p></div>',1)),g("div",hm,[g("div",null,[g("button",{onClick:l,disabled:n.value,class:"group relative w-full flex justify-center items-center py-3 px-4 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-lg text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[n.value?(O(),L("span",gm,x[2]||(x[2]=[g("div",{class:"animate-spin rounded-full h-5 w-5 border-b-2 border-gray-400"},null,-1)]))):oe("",!0),n.value?oe("",!0):(O(),L("svg",pm,x[3]||(x[3]=[g("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"},null,-1),g("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"},null,-1),g("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"},null,-1),g("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"},null,-1)]))),We(" "+Z(n.value?"認証中...":"Google Drive と連携"),1)],8,xm)]),s.value?(O(),L("div",vm,Z(s.value),1)):oe("",!0),g("div",ym,[g("button",{type:"button",onClick:x[0]||(x[0]=w=>o.value=!0),class:"text-sm text-indigo-600 dark:text-indigo-400 hover:text-indigo-500 dark:hover:text-indigo-300"}," すべてのデータをリセット ")])])]),o.value?(O(),L("div",mm,[g("div",wm,[x[5]||(x[5]=Tt('<div class="flex items-center justify-center w-12 h-12 mx-auto mb-4 bg-red-100 dark:bg-red-900 rounded-full"><svg class="w-6 h-6 text-red-600 dark:text-red-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"></path></svg></div><h3 class="text-lg font-medium text-gray-900 dark:text-white text-center mb-2"> データリセットの確認 </h3><p class="text-sm text-gray-600 dark:text-gray-400 text-center mb-6"> すべてのポートフォリオデータと設定が削除されます。Google Driveのバックアップファイルも削除されます。この操作は取り消せません。 </p>',3)),g("div",bm,[g("button",{onClick:x[1]||(x[1]=w=>o.value=!1),class:"flex-1 px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-indigo-500"}," キャンセル "),g("button",{onClick:y,class:"flex-1 px-4 py-2 text-sm font-medium text-white bg-red-600 border border-transparent rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500"}," 削除する ")])])])):oe("",!0),a.value?(O(),Ct(Td,{key:1,onSetupComplete:u,onClose:f})):oe("",!0),i.value?(O(),Ct(Rd,{key:2,onPasswordProvided:c,onClose:h,onForgotPassword:m})):oe("",!0)]))}}),$a="session_start_time",_s=Bo("session",()=>{const t=Q(!1),e=Q(!1),r=Q(!1),n=Q(!1),s=Q(0),o=Q(null),a=Q(0),i=ue(()=>!t.value),l=ue(()=>Math.ceil(s.value/6e4)),u=ue(()=>Math.ceil(s.value/1e3)),c=ue(()=>{const I=Math.ceil(s.value/1e3),K=Math.floor(I/60),j=I%60;return`${K}:${j.toString().padStart(2,"0")}`});function d(I){try{localStorage.setItem($a,I.toString())}catch(K){console.error("Failed to save session start time:",K)}}function f(){try{const I=localStorage.getItem($a);return I?parseInt(I,10):0}catch(I){return console.error("Failed to load session start time:",I),0}}function h(){try{localStorage.removeItem($a)}catch(I){console.error("Failed to clear session start time:",I)}}async function m(){e.value=!0;try{if(t.value?console.log("[DEBUG] Session initialize - already authenticated, skipping authService check"):(t.value=await Ur.isAuthenticated(),console.log("[DEBUG] Session initialize - isAuthenticated:",t.value)),t.value){const I=f();if(I>0){a.value=I,console.log("[DEBUG] Restored session start time:",new Date(I));const j=30*60*1e3,Y=Date.now()-I,te=Math.max(0,j-Y);if(s.value=te,console.log("[DEBUG] Calculated remaining time on restore:",te/1e3,"seconds"),te<=0){console.log("[DEBUG] Session expired during restore, logging out"),await v();return}}const{secureStorage:K}=await ce(async()=>{const{secureStorage:j}=await Promise.resolve().then(()=>Kt);return{secureStorage:j}},void 0);K.isUnlocked()?console.log("[DEBUG] Storage is already unlocked"):(console.log("[DEBUG] Authentication exists but storage is locked - showing unlock prompt"),n.value=!0),a.value===0&&(a.value=Date.now(),d(a.value),console.log("[DEBUG] Set new session start time for authenticated user:",new Date(a.value))),E(),C(),console.log("[DEBUG] Session initialized successfully")}}finally{e.value=!1}}async function y(I="password"){console.log("[DEBUG] sessionStore.login() called - before setting isAuthenticated:",t.value),t.value=!0,console.log("[DEBUG] sessionStore.login() called - after setting isAuthenticated:",t.value),a.value=Date.now(),d(a.value),console.log("[DEBUG] login - new session start time:",new Date(a.value),"auth type:",I),C(),E()}async function v(){console.log("[DEBUG] sessionStore.logout() called - Stack trace:"),console.trace(),k(),S(),document.removeEventListener("visibilitychange",A),r.value=!1,t.value=!1,a.value=0,h(),await Ur.logout()}async function p(){console.log("[DEBUG] sessionStore.logoutAndDiscardChanges() called");try{const{syncService:I}=await ce(async()=>{const{syncService:K}=await Promise.resolve().then(()=>zr);return{syncService:K}},void 0);I.clearConflictState(),console.log("[DEBUG] logoutAndDiscardChanges - cleared conflict state"),await w(),await x(),console.log("[DEBUG] logoutAndDiscardChanges - all cleanup completed")}catch(I){console.warn("[DEBUG] logoutAndDiscardChanges - failed to clear sync state:",I)}await v()}async function x(){console.log("[DEBUG] performAdditionalCleanup - starting");try{const I=["lastDataModified","syncStatus","globalSyncTime","cloudPassword"];for(const j of I)localStorage.removeItem(j),console.log("[DEBUG] performAdditionalCleanup - removed localStorage key:",j);const{metadataService:K}=await ce(async()=>{const{metadataService:j}=await import("./metadata.service-8MYvfiJN.js");return{metadataService:j}},[]);K.clearMetadataCache(),console.log("[DEBUG] performAdditionalCleanup - completed")}catch(I){console.error("[DEBUG] performAdditionalCleanup - error:",I)}}async function w(){console.log("[DEBUG] discardUnsyncedData - starting complete cleanup");try{const{metadataService:I}=await ce(async()=>{const{metadataService:$}=await import("./metadata.service-8MYvfiJN.js");return{metadataService:$}},[]),{syncService:K}=await ce(async()=>{const{syncService:$}=await Promise.resolve().then(()=>zr);return{syncService:$}},void 0),{dbV2:j}=await ce(async()=>{const{dbV2:$}=await Promise.resolve().then(()=>ho);return{dbV2:$}},void 0);console.log("[DEBUG] discardUnsyncedData - clearing all user data");const Y=await j.holdings.toArray();console.log("[DEBUG] discardUnsyncedData - found holdings to delete:",Y.length),await j.holdings.clear();const xe=(await j.locations.toArray()).filter($=>$.isCustom);console.log("[DEBUG] discardUnsyncedData - found custom locations to delete:",xe.length);for(const $ of xe)await j.locations.delete($.id);const fe=["BTC","ETH","BNB","ADA","SOL","XRP","DOT","DOGE","AVAX","SHIB","MATIC","LTC","ATOM","LINK","UNI"],U=(await j.tokens.toArray()).filter($=>!fe.includes($.symbol));console.log("[DEBUG] discardUnsyncedData - found custom tokens to delete:",U.length);for(const $ of U)await j.tokens.delete($.symbol);const V=new Date,z={isNew:!1,isModified:!1,isDeleted:!1,isSynced:!0,lastModified:V,lastSyncTime:V,version:1},De=await j.locations.toArray();for(const $ of De)await j.locations.update($.id,{metadata:z});const me=await j.tokens.toArray();for(const $ of me)await j.tokens.update($.symbol,{metadata:z});I.clearMetadataCache(),I.setGlobalSyncTime(V),console.log("[DEBUG] discardUnsyncedData - complete cleanup finished")}catch(I){console.error("[DEBUG] discardUnsyncedData - error during cleanup:",I)}}function b(){console.log("[DEBUG] extendSession called - resetting session timer"),Ur.extendSession(),r.value=!1,a.value=Date.now(),d(a.value),console.log("[DEBUG] extendSession - new session start time:",new Date(a.value)),E()}function E(){k();const I=30*60*1e3;a.value===0?(a.value=Date.now(),d(a.value),console.log("[DEBUG] Set new session start time:",new Date(a.value))):console.log("[DEBUG] Using existing session start time:",new Date(a.value)),s.value=Math.max(0,I-(Date.now()-a.value)),console.log("[DEBUG] startWarningCountdown - initial remainingTime:",s.value/1e3,"seconds");const K=()=>{const j=Date.now()-a.value,Y=Math.max(0,I-j);s.value=Y,console.log("[DEBUG] updateCountdown - remainingTime:",s.value/1e3,"seconds"),s.value<=5*60*1e3&&!r.value&&(r.value=!0),s.value>0?o.value=window.setTimeout(K,1e3):v()};o.value=window.setTimeout(K,1e3)}function k(){o.value&&(clearTimeout(o.value),o.value=null)}function _(){t.value&&!r.value&&Ur.resetIdleTimer()}function C(){["mousedown","keypress","scroll","touchstart","click"].forEach(K=>{document.addEventListener(K,_,{passive:!0})})}function S(){["mousedown","keypress","scroll","touchstart","click"].forEach(K=>{document.removeEventListener(K,_)})}function A(){if(document.visibilityState==="visible"&&t.value&&a.value>0){const K=Date.now()-a.value,j=Math.max(0,18e5-K);s.value=j,s.value<=5*60*1e3&&!r.value&&(r.value=!0),s.value<=0&&v()}}document.addEventListener("visibilitychange",A);async function F(){return new Promise(I=>{n.value=!0;const K=()=>{n.value=!1,I(!0)},j=()=>{n.value=!1,I(!1)};window._unlockHandlers={handleUnlock:K,handleCancel:j}})}async function P(){var I;console.log("[DEBUG] handleUnlockSuccess - refreshing stores");try{const{secureStorage:K}=await ce(async()=>{const{secureStorage:U}=await Promise.resolve().then(()=>Kt);return{secureStorage:U}},void 0);console.log("[DEBUG] Before store refresh - storage unlocked:",K.isUnlocked());try{console.log("[DEBUG] Testing database access...");const U=await K.getHoldings();console.log("[DEBUG] Direct getHoldings test successful, count:",U.length)}catch(U){console.error("[DEBUG] Direct getHoldings test failed:",U),console.error("[DEBUG] Error name:",U.name),console.error("[DEBUG] Error message:",U.message),console.error("[DEBUG] Error stack:",U.stack);try{const{dbV2:V}=await ce(async()=>{const{dbV2:De}=await Promise.resolve().then(()=>ho);return{dbV2:De}},void 0),z=await V.holdings.toArray();console.log("[DEBUG] Raw database access successful, count:",z.length)}catch(V){console.error("[DEBUG] Raw database access also failed:",V)}}const{useTokensStore:j}=await ce(async()=>{const{useTokensStore:U}=await Promise.resolve().then(()=>np);return{useTokensStore:U}},void 0),{useHoldingsStoreV2:Y}=await ce(async()=>{const{useHoldingsStoreV2:U}=await Promise.resolve().then(()=>sp);return{useHoldingsStoreV2:U}},void 0),{useLocationsStore:te}=await ce(async()=>{const{useLocationsStore:U}=await Promise.resolve().then(()=>op);return{useLocationsStore:U}},void 0),xe=j(),fe=Y(),H=te();console.log("[DEBUG] Starting store refresh...");try{await xe.loadTokens(),console.log("[DEBUG] Tokens loaded successfully")}catch(U){console.error("[DEBUG] Failed to load tokens:",U)}try{await fe.loadHoldings(),console.log("[DEBUG] Holdings loaded successfully")}catch(U){console.error("[DEBUG] Failed to load holdings:",U)}try{await fe.loadAggregatedHoldings(),console.log("[DEBUG] Aggregated holdings loaded successfully")}catch(U){console.error("[DEBUG] Failed to load aggregated holdings:",U)}try{await H.loadLocations(),console.log("[DEBUG] Locations loaded successfully")}catch(U){console.error("[DEBUG] Failed to load locations:",U)}console.log("[DEBUG] All stores refresh completed")}catch(K){console.error("[DEBUG] Error refreshing stores after unlock:",K)}await new Promise(K=>setTimeout(K,100)),n.value=!1,await new Promise(K=>setTimeout(K,50)),a.value>0&&(console.log("[DEBUG] Restarting session timer after unlock"),E()),(I=window._unlockHandlers)==null||I.handleUnlock()}function T(){var I;n.value=!1,(I=window._unlockHandlers)==null||I.handleCancel()}return{isAuthenticated:t,isLoading:e,isLocked:i,showWarning:r,showUnlockPrompt:n,remainingTime:s,remainingMinutes:l,remainingSeconds:u,remainingDisplay:c,initialize:m,login:y,logout:v,logoutAndDiscardChanges:p,extendSession:b,requestUnlock:F,handleUnlockSuccess:P,handleUnlockCancel:T}}),Id=Object.freeze(Object.defineProperty({__proto__:null,useSessionStore:_s},Symbol.toStringTag,{value:"Module"})),Em={class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"},km={class:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full"},Cm={class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},Dm={class:"flex items-center justify-between"},Am={class:"px-6 py-4"},Bm={key:0,class:"mb-4 p-4 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg"},Sm={class:"flex items-start space-x-3"},Fm={class:"text-sm text-yellow-700 dark:text-yellow-300"},Pm={class:"text-gray-700 dark:text-gray-300 mb-6"},Tm={key:1,class:"flex flex-col space-y-3"},Rm=["disabled"],Im={class:"flex space-x-3"},$m={key:2,class:"flex space-x-3"},$d=Qe({__name:"LogoutConfirmModal",props:{unsyncedCount:{},isSyncing:{type:Boolean}},emits:["close","confirm","manualSync","confirmDiscard"],setup(t){return(e,r)=>(O(),L("div",Em,[g("div",km,[g("div",Cm,[g("div",Dm,[r[7]||(r[7]=g("h3",{class:"text-lg font-medium text-gray-900 dark:text-white"}," ログアウトの確認 ",-1)),g("button",{onClick:r[0]||(r[0]=n=>e.$emit("close")),class:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300"},r[6]||(r[6]=[g("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[g("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))])]),g("div",Am,[e.unsyncedCount>0?(O(),L("div",Bm,[g("div",Sm,[r[11]||(r[11]=g("svg",{class:"w-6 h-6 text-yellow-500 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20"},[g("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1)),g("div",null,[r[10]||(r[10]=g("h4",{class:"text-sm font-medium text-yellow-800 dark:text-yellow-400 mb-1"}," 未同期のデータがあります ",-1)),g("p",Fm,[r[8]||(r[8]=We(" 未同期のデータが")),g("strong",null,Z(e.unsyncedCount)+"件",1),r[9]||(r[9]=We("あります。 ログアウトすると、これらのデータは失われる可能性があります。 "))])])])])):oe("",!0),g("p",Pm,Z(e.unsyncedCount>0?"このままログアウトしますか？":"ログアウトしますか？"),1),e.unsyncedCount>0?(O(),L("div",Tm,[g("button",{onClick:r[1]||(r[1]=n=>e.$emit("manualSync")),disabled:e.isSyncing,class:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-4 rounded-lg transition-colors"},Z(e.isSyncing?"同期中...":"今すぐ同期"),9,Rm),g("div",Im,[g("button",{onClick:r[2]||(r[2]=n=>e.$emit("close")),class:"flex-1 bg-gray-300 dark:bg-gray-600 hover:bg-gray-400 dark:hover:bg-gray-500 text-gray-700 dark:text-gray-200 font-medium py-2 px-4 rounded-lg transition-colors"}," キャンセル "),g("button",{onClick:r[3]||(r[3]=n=>e.$emit("confirmDiscard")),class:"flex-1 bg-red-600 hover:bg-red-700 text-white font-medium py-2 px-4 rounded-lg transition-colors"}," そのままログアウト ")])])):(O(),L("div",$m,[g("button",{onClick:r[4]||(r[4]=n=>e.$emit("close")),class:"flex-1 bg-gray-300 dark:bg-gray-600 hover:bg-gray-400 dark:hover:bg-gray-500 text-gray-700 dark:text-gray-200 font-medium py-2 px-4 rounded-lg transition-colors"}," キャンセル "),g("button",{onClick:r[5]||(r[5]=n=>e.$emit("confirm")),class:"flex-1 bg-indigo-600 hover:bg-indigo-700 text-white font-medium py-2 px-4 rounded-lg transition-colors"}," ログアウト ")]))])])]))}}),Om={class:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700"},Um={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Lm={class:"flex items-center justify-between h-12"},Hm={class:"flex items-center space-x-4"},Mm={class:"flex items-center space-x-2"},Gm={class:"text-sm text-gray-600 dark:text-gray-400"},jm={key:0,class:"ml-1"},zm={key:0,class:"ml-1"},Nm={class:"text-sm text-gray-600 dark:text-gray-400"},Km={key:0,class:"absolute right-0 mt-1 w-48 bg-white dark:bg-gray-800 rounded-md shadow-lg border border-gray-200 dark:border-gray-700 z-10"},Vm=Qe({__name:"SessionBanner",emits:["open-sync-settings","open-password-change","logout-discard"],setup(t,{emit:e}){const r=e,n=_s(),s=ue(()=>Be.status.value),o=ue(()=>n.remainingDisplay),a=Q(!1),i=Q(!1),l=Q(),u=Q(0);function c(w){const b=new Date(w),k=new Date().getTime()-b.getTime(),_=Math.floor(k/(1e3*60));if(_<1)return"たった今";if(_<60)return`${_}分前`;const C=Math.floor(_/60);return C<24?`${C}時間前`:`${Math.floor(C/24)}日前`}async function d(){try{u.value=await Be.getUnsyncedDataCount()}catch(w){console.error("Failed to check unsynced data:",w),u.value=0}}function f(){a.value=!1,r("open-sync-settings")}function h(){a.value=!1,r("open-password-change")}function m(){a.value=!1,d().then(()=>{i.value=!0})}function y(){n.logout(),i.value=!1}function v(){n.logoutAndDiscardChanges(),i.value=!1}async function p(){try{const w=await Be.performSync();w.success?(await d(),u.value===0&&(n.logout(),i.value=!1)):(console.error("Sync failed before logout:",w.message),n.logout(),i.value=!1)}catch(w){console.error("Sync failed before logout:",w),n.logout(),i.value=!1}}function x(w){l.value&&!l.value.contains(w.target)&&(a.value=!1)}return gr(()=>{document.addEventListener("click",x),d()}),hs(()=>{document.removeEventListener("click",x)}),(w,b)=>(O(),L("div",Om,[g("div",Um,[g("div",Lm,[b[4]||(b[4]=Tt('<div class="flex items-center"><div class="flex items-center space-x-2"><svg class="h-4 w-4 text-green-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z" clip-rule="evenodd"></path></svg><span class="text-sm text-gray-600 dark:text-gray-400"> 認証済み </span></div></div>',1)),g("div",Hm,[g("div",Mm,[g("div",{class:He(["w-2 h-2 rounded-full",s.value.isEnabled?s.value.isSyncing?"bg-yellow-500 animate-pulse":s.value.lastSyncError?"bg-red-500":"bg-green-500":"bg-red-500"])},null,2),g("span",Gm,[s.value.isEnabled?s.value.isSyncing?(O(),L(Oe,{key:1},[We(" 同期中 ")],64)):s.value.lastSyncError?(O(),L(Oe,{key:2},[We(" 同期エラー: "+Z(s.value.lastSyncError)+" ",1),s.value.lastSyncTime?(O(),L("span",zm," (最終同期: "+Z(c(s.value.lastSyncTime))+") ",1)):oe("",!0)],64)):s.value.lastSyncTime?(O(),L(Oe,{key:3},[We(" 同期済み ("+Z(c(s.value.lastSyncTime))+") ",1)],64)):(O(),L(Oe,{key:4},[We(" 同期準備完了 ")],64)):(O(),L(Oe,{key:0},[b[2]||(b[2]=We(" 自動同期が無効です ")),s.value.lastSyncTime?(O(),L("span",jm," (最終同期: "+Z(c(s.value.lastSyncTime))+") ",1)):oe("",!0)],64))])]),g("div",Nm," 残り時間: "+Z(o.value),1),g("div",{class:"relative",ref_key:"dropdownRef",ref:l},[g("button",{onClick:b[0]||(b[0]=E=>a.value=!a.value),class:"text-sm text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 transition-colors flex items-center space-x-1"},b[3]||(b[3]=[g("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[g("path",{"fill-rule":"evenodd",d:"M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z","clip-rule":"evenodd"})],-1),g("span",null,"設定",-1)])),a.value?(O(),L("div",Km,[g("div",{class:"py-1"},[g("button",{onClick:f,class:"block w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}," 同期設定 "),g("button",{onClick:h,class:"block w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}," パスワード変更 "),g("button",{onClick:m,class:"block w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}," ログアウト ")])])):oe("",!0)],512)])])]),i.value?(O(),Ct($d,{key:0,"unsynced-count":u.value,"is-syncing":s.value.isSyncing,onClose:b[1]||(b[1]=E=>i.value=!1),onConfirm:y,onConfirmDiscard:v,onManualSync:p},null,8,["unsynced-count","is-syncing"])):oe("",!0)]))}}),qm={key:0,class:"fixed top-0 left-0 right-0 bg-amber-500 text-white z-50"},Wm={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Ym={class:"flex items-center justify-between py-3"},Qm={class:"flex items-center space-x-3"},Xm={class:"font-medium"},Jm=Qe({__name:"TimeoutWarning",setup(t){const e=_s(),r=Q(!1),n=Q(0),s=ue(()=>e.showWarning);ue(()=>Math.max(1,e.remainingMinutes));function o(){e.extendSession()}async function a(){var d,f,h;try{if(n.value=await Be.getUnsyncedDataCount(),Be.status.value.conflictDetected){const m=await Be.getLocalData(),y=(((d=m.holdings)==null?void 0:d.length)||0)+(((f=m.locations)==null?void 0:f.length)||0)+(((h=m.tokens)==null?void 0:h.length)||0);n.value=Math.max(n.value,y)}r.value=!0}catch{n.value=0,r.value=!0}}function i(){r.value=!1,e.logout()}function l(){r.value=!1,e.logoutAndDiscardChanges()}async function u(){try{if(!Be.hasCloudPassword.value){window.showToast&&window.showToast.error("同期エラー","クラウドパスワードが設定されていません。先に同期設定から自動同期を有効にしてください。");return}const d=await Be.performSync();d.success?(n.value=0,r.value=!1,window.showToast&&window.showToast.success("同期完了","同期が正常に完了しました")):window.showToast&&window.showToast.error("同期エラー",d.message||"同期に失敗しました")}catch(d){console.error("Manual sync failed:",d),window.showToast&&window.showToast.error("同期エラー","同期中にエラーが発生しました")}}function c(){e.showWarning=!1}return(d,f)=>s.value?(O(),L("div",qm,[g("div",Wm,[g("div",Ym,[g("div",Qm,[f[2]||(f[2]=g("svg",{class:"h-5 w-5 text-amber-100",fill:"currentColor",viewBox:"0 0 20 20"},[g("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1)),g("div",null,[g("div",Xm,"セッション期限切れまで "+Z(ke(e).remainingDisplay),1),f[1]||(f[1]=g("div",{class:"text-sm text-amber-100"}," 操作がない場合、自動的にログアウトされます ",-1))])]),g("div",{class:"flex items-center space-x-3"},[g("button",{onClick:o,class:"bg-white text-amber-600 px-4 py-2 rounded-md text-sm font-medium hover:bg-amber-50 transition-colors"}," セッション延長 "),g("button",{onClick:a,class:"bg-amber-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-amber-700 transition-colors border border-amber-400"}," 今すぐログアウト "),g("button",{onClick:c,class:"text-amber-100 hover:text-white p-1"},f[3]||(f[3]=[g("svg",{class:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20"},[g("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)]))])])]),r.value?(O(),Ct($d,{key:0,"unsynced-count":n.value,"is-syncing":ke(Be).status.value.isSyncing,onClose:f[0]||(f[0]=h=>r.value=!1),onConfirm:i,onConfirmDiscard:l,onManualSync:u},null,8,["unsynced-count","is-syncing"])):oe("",!0)])):oe("",!0)}}),Zm={class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},e2={class:"bg-white dark:bg-gray-800 rounded-lg w-full max-w-md mx-4 p-6"},t2={class:"mb-4"},r2={key:0,class:"mt-1 text-sm text-red-600"},n2={class:"flex justify-end space-x-3"},s2=["disabled"],o2={key:0},a2={key:1},i2=Qe({__name:"UnlockPrompt",emits:["unlock","cancel"],setup(t,{emit:e}){const r=e,n=Q(""),s=Q(""),o=Q(!1);function a(){s.value=""}async function i(){if(!n.value.trim()){s.value="パスワードを入力してください";return}o.value=!0,s.value="";try{console.log("[DEBUG] UnlockPrompt - attempting unlock with password");const l=await Ur.unlockWithPassword(n.value);console.log("[DEBUG] UnlockPrompt - unlock result:",l),l.success?(console.log("[DEBUG] UnlockPrompt - unlock successful, emitting unlock event"),n.value="",r("unlock")):(console.log("[DEBUG] UnlockPrompt - unlock failed:",l.error),s.value=l.error||"パスワードが正しくありません")}catch(l){s.value="ロック解除に失敗しました",console.error("Unlock error:",l)}finally{o.value=!1}}return(l,u)=>(O(),L("div",Zm,[g("div",e2,[u[3]||(u[3]=g("div",{class:"mb-6"},[g("h3",{class:"text-lg font-medium text-gray-900 dark:text-white mb-2"}," データアクセスのロック解除 "),g("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," 暗号化されたデータにアクセスするため、パスワードを再入力してください ")],-1)),g("form",{onSubmit:ps(i,["prevent"])},[g("div",t2,[u[2]||(u[2]=g("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," パスワード ",-1)),ct(g("input",{"onUpdate:modelValue":u[0]||(u[0]=c=>n.value=c),type:"password",required:"",autocomplete:"current-password",class:He(["w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:text-white",s.value?"border-red-500":""]),onInput:a},null,34),[[Ot,n.value]]),s.value?(O(),L("div",r2,Z(s.value),1)):oe("",!0)]),g("div",n2,[g("button",{type:"button",onClick:u[1]||(u[1]=c=>l.$emit("cancel")),class:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-600 hover:bg-gray-200 dark:hover:bg-gray-500 rounded-md"}," キャンセル "),g("button",{type:"submit",disabled:o.value,class:"px-4 py-2 text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed rounded-md"},[o.value?(O(),L("span",o2,"確認中...")):(O(),L("span",a2,"ロック解除"))],8,s2)])],32)])]))}});class l2{constructor(){_e(this,"_errors",Q([]));_e(this,"_stats",Q({totalErrors:0,authErrors:0,networkErrors:0,syncErrors:0,encryptionErrors:0}));_e(this,"errorIdCounter",0);_e(this,"maxErrors",50);this.setupGlobalErrorHandlers()}get errors(){return this._errors}get stats(){return this._stats}setupGlobalErrorHandlers(){window.addEventListener("unhandledrejection",e=>{this.handleError(e.reason,"Promise Rejection","error")}),window.addEventListener("error",e=>{this.handleError(new Error(e.message),`${e.filename}:${e.lineno}:${e.colno}`,"error")})}handleError(e,r,n="error",s){const o=`error_${++this.errorIdCounter}_${Date.now()}`;let a=this.extractErrorMessage(e),i=!1;switch(this.categorizeError(e,a)){case"auth":this._stats.value.authErrors++,i=!0;break;case"network":this._stats.value.networkErrors++,a=this.enhanceNetworkError(e,a),i=!0;break;case"sync":this._stats.value.syncErrors++,i=!0;break;case"encryption":this._stats.value.encryptionErrors++,i=!1;break}const u={id:o,message:a,type:n,timestamp:Date.now(),context:r,recoverable:i,retryAction:s};return this._errors.value.unshift(u),this._stats.value.totalErrors++,this._errors.value.length>this.maxErrors&&(this._errors.value=this._errors.value.slice(0,this.maxErrors)),n==="error"&&this.isCriticalError(e,a)&&this.showErrorToast(a),o}extractErrorMessage(e){return typeof e=="string"?e:e instanceof Error||e!=null&&e.message?e.message:e!=null&&e.error?this.extractErrorMessage(e.error):"不明なエラーが発生しました"}categorizeError(e,r){const n=r.toLowerCase();return n.includes("auth")||n.includes("unauthorized")||n.includes("forbidden")||n.includes("認証")||(e==null?void 0:e.status)===401||(e==null?void 0:e.status)===403?"auth":n.includes("network")||n.includes("fetch")||n.includes("connection")||n.includes("timeout")||n.includes("ネットワーク")||(e==null?void 0:e.status)>=500||(e==null?void 0:e.code)==="NETWORK_ERROR"?"network":n.includes("sync")||n.includes("conflict")||n.includes("upload")||n.includes("download")||n.includes("同期")||n.includes("競合")?"sync":n.includes("encrypt")||n.includes("decrypt")||n.includes("password")||n.includes("暗号")||n.includes("復号")||n.includes("パスワード")?"encryption":"unknown"}enhanceNetworkError(e,r){var n;return(e==null?void 0:e.status)===403&&((n=e==null?void 0:e.message)!=null&&n.includes("quota"))?Ft.QUOTA_EXCEEDED:(e==null?void 0:e.status)===429?"API利用制限に達しました。しばらく待ってから再試行してください":(e==null?void 0:e.status)>=500?"サーバーエラーが発生しました。しばらく待ってから再試行してください":navigator.onLine?r:"インターネット接続を確認してください"}isCriticalError(e,r){const n=["auth","unauthorized","forbidden","quota","encrypt","decrypt","認証","暗号","復号"],s=r.toLowerCase();return n.some(o=>s.includes(o))}showErrorToast(e){const r=new CustomEvent("show-toast",{detail:{type:"error",message:e}});window.dispatchEvent(r)}async retryWithExponentialBackoff(e,r=3,n=1e3,s){let o;for(let a=0;a<=r;a++)try{return await e()}catch(i){if(o=i,a===r)throw this.handleError(i,s,"error"),i;const l=n*Math.pow(2,a);this.handleError(new Error(`Retry attempt ${a+1}/${r+1} failed, retrying in ${l}ms`),s,"warning"),await new Promise(u=>setTimeout(u,l))}throw o}clearError(e){const r=this._errors.value.findIndex(n=>n.id===e);r!==-1&&this._errors.value.splice(r,1)}clearAllErrors(){this._errors.value=[]}clearErrorsByType(e){this._errors.value=this._errors.value.filter(r=>r.type!==e)}getErrorsByContext(e){return this._errors.value.filter(r=>r.context===e)}getRecoverableErrors(){return this._errors.value.filter(e=>e.recoverable&&e.retryAction)}async retryError(e){const r=this._errors.value.find(n=>n.id===e);if(!r||!r.retryAction)return!1;try{return await r.retryAction(),this.clearError(e),!0}catch(n){return this.handleError(n,`Retry failed for ${e}`,"error"),!1}}exportErrorLog(){const e={timestamp:new Date().toISOString(),stats:this._stats.value,errors:this._errors.value.map(r=>({...r,retryAction:r.retryAction?"[Function]":null}))};return JSON.stringify(e,null,2)}reset(){this._errors.value=[],this._stats.value={totalErrors:0,authErrors:0,networkErrors:0,syncErrors:0,encryptionErrors:0},this.errorIdCounter=0}}const at=new l2,c2={class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-[9999]"},u2={class:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto"},d2={class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},f2={class:"flex items-center justify-between"},h2={class:"px-6 py-4"},x2={class:"mb-6 grid grid-cols-1 md:grid-cols-2 gap-4"},g2={class:"p-4 border border-gray-200 dark:border-gray-600 rounded-lg"},p2={class:"text-sm text-gray-600 dark:text-gray-400 mb-2"},v2={class:"text-sm"},y2={class:"text-gray-700 dark:text-gray-300"},m2={class:"text-gray-700 dark:text-gray-300"},w2={class:"text-gray-700 dark:text-gray-300"},b2={class:"p-4 border border-gray-200 dark:border-gray-600 rounded-lg"},_2={class:"text-sm text-gray-600 dark:text-gray-400 mb-2"},E2={class:"text-sm"},k2={class:"text-gray-700 dark:text-gray-300"},C2={class:"text-gray-700 dark:text-gray-300"},D2={class:"text-gray-700 dark:text-gray-300"},A2={class:"mb-6"},B2={class:"space-y-3"},S2={class:"flex items-start space-x-3 p-4 border border-gray-200 dark:border-gray-600 rounded-lg cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors"},F2={class:"flex items-start space-x-3 p-4 border border-gray-200 dark:border-gray-600 rounded-lg cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors"},P2={key:0,class:"mb-6"},T2={class:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg"},R2={class:"text-sm space-y-2"},I2={key:0},$2={key:1},O2={class:"flex space-x-3"},U2=["disabled"],Od=Qe({__name:"ConflictResolver",props:{conflictData:{}},emits:["close","resolved"],setup(t,{emit:e}){const r=t,n=e,s=_s(),o=Q(null),a=Q(!1);function i(c){const d=new Date(c),h=new Date().getTime()-d.getTime(),m=Math.floor(h/(1e3*60*60));return m<1?`${Math.floor(h/6e4)}分前`:m<24?`${m}時間前`:d.toLocaleString("ja-JP")}async function l(){if(o.value)try{a.value=!0;const c=await Be.resolveConflict(o.value,r.conflictData);c.success?(n("resolved"),n("close")):at.handleError(new Error(c.message),"Conflict Resolution","error")}catch(c){at.handleError(c,"Conflict Resolution","error")}finally{a.value=!1}}async function u(){try{console.log("[DEBUG] ConflictResolver.handleLogout() called"),await Be.clearConflictState(),await s.logoutAndDiscardChanges(),n("close")}catch(c){console.error("Failed to logout from conflict resolver:",c),at.handleError(c,"Logout","error")}}return(c,d)=>{var f,h,m,y,v,p;return O(),L("div",c2,[g("div",u2,[g("div",d2,[g("div",f2,[d[5]||(d[5]=g("h3",{class:"text-lg font-medium text-gray-900 dark:text-white"}," 同期競合の解決 ",-1)),g("button",{onClick:d[0]||(d[0]=x=>c.$emit("close")),class:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300"},d[4]||(d[4]=[g("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[g("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))])]),g("div",h2,[d[14]||(d[14]=Tt('<div class="mb-6 p-4 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg"><div class="flex items-start space-x-3"><svg class="w-6 h-6 text-yellow-500 mt-0.5" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg><div><h4 class="text-sm font-medium text-yellow-800 dark:text-yellow-400 mb-2"> データの競合が検出されました </h4><p class="text-sm text-yellow-700 dark:text-yellow-300"> ローカルデータとクラウドデータの間に違いがあります。 どちらのデータを使用するか、または両方を統合するかを選択してください。 </p></div></div></div>',1)),g("div",x2,[g("div",g2,[d[6]||(d[6]=g("h4",{class:"flex items-center text-sm font-medium text-gray-900 dark:text-white mb-2"},[g("svg",{class:"w-4 h-4 mr-2 text-blue-500",fill:"currentColor",viewBox:"0 0 20 20"},[g("path",{"fill-rule":"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zm0 4a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1V8zm8 0a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1h-6a1 1 0 01-1-1V8z","clip-rule":"evenodd"})]),We(" ローカルデータ ")],-1)),g("p",p2," 最終更新: "+Z(i(c.conflictData.localTimestamp)),1),g("div",v2,[g("p",y2," 保有データ数: "+Z(((f=c.conflictData.localData.holdings)==null?void 0:f.length)||0),1),g("p",m2," 保管場所数: "+Z(((h=c.conflictData.localData.locations)==null?void 0:h.length)||0),1),g("p",w2," トークン数: "+Z(((m=c.conflictData.localData.tokens)==null?void 0:m.length)||0),1)])]),g("div",b2,[d[7]||(d[7]=g("h4",{class:"flex items-center text-sm font-medium text-gray-900 dark:text-white mb-2"},[g("svg",{class:"w-4 h-4 mr-2 text-green-500",fill:"currentColor",viewBox:"0 0 20 20"},[g("path",{"fill-rule":"evenodd",d:"M2 5a2 2 0 012-2h8a2 2 0 012 2v10a2 2 0 002 2H4a2 2 0 01-2-2V5zm3 1h6v4H5V6zm6 6H5v2h6v-2z","clip-rule":"evenodd"}),g("path",{d:"M15 7h1a2 2 0 012 2v5.5a1.5 1.5 0 01-3 0V9a1 1 0 00-1-1h-1v4.5a1.5 1.5 0 01-3 0V8a1 1 0 011-1z"})]),We(" クラウドデータ ")],-1)),g("p",_2," 最終更新: "+Z(i(c.conflictData.cloudTimestamp)),1),g("div",E2,[g("p",k2," 保有データ数: "+Z(((y=c.conflictData.cloudData.holdings)==null?void 0:y.length)||0),1),g("p",C2," 保管場所数: "+Z(((v=c.conflictData.cloudData.locations)==null?void 0:v.length)||0),1),g("p",D2," トークン数: "+Z(((p=c.conflictData.cloudData.tokens)==null?void 0:p.length)||0),1)])])]),g("div",A2,[d[10]||(d[10]=g("h4",{class:"text-md font-medium text-gray-900 dark:text-white mb-4"}," 解決方法を選択してください ",-1)),g("div",B2,[g("label",S2,[ct(g("input",{"onUpdate:modelValue":d[1]||(d[1]=x=>o.value=x),type:"radio",value:"local",class:"mt-1 text-indigo-600 focus:ring-indigo-500 border-gray-300"},null,512),[[ro,o.value]]),d[8]||(d[8]=g("div",{class:"flex-1"},[g("div",{class:"font-medium text-gray-900 dark:text-white"}," ローカルデータを使用 "),g("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," このデバイスのデータを優先し、クラウドデータを上書きします。 "),g("div",{class:"mt-2 text-xs text-gray-500 dark:text-gray-400"}," 推奨: このデバイスで最近変更を行った場合 ")],-1))]),g("label",F2,[ct(g("input",{"onUpdate:modelValue":d[2]||(d[2]=x=>o.value=x),type:"radio",value:"cloud",class:"mt-1 text-indigo-600 focus:ring-indigo-500 border-gray-300"},null,512),[[ro,o.value]]),d[9]||(d[9]=g("div",{class:"flex-1"},[g("div",{class:"font-medium text-gray-900 dark:text-white"}," クラウドデータを使用 "),g("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," クラウドのデータを優先し、ローカルデータを置き換えます。 "),g("div",{class:"mt-2 text-xs text-gray-500 dark:text-gray-400"}," 推奨: 他のデバイスで最近変更を行った場合 ")],-1))])])]),o.value?(O(),L("div",P2,[d[13]||(d[13]=g("h4",{class:"text-md font-medium text-gray-900 dark:text-white mb-4"}," 変更プレビュー ",-1)),g("div",T2,[g("div",R2,[o.value==="local"?(O(),L("div",I2,d[11]||(d[11]=[g("p",{class:"text-green-700 dark:text-green-400"},"✓ ローカルデータがクラウドに保存されます",-1),g("p",{class:"text-red-700 dark:text-red-400"},"✗ クラウドの既存データは削除されます",-1)]))):o.value==="cloud"?(O(),L("div",$2,d[12]||(d[12]=[g("p",{class:"text-green-700 dark:text-green-400"},"✓ クラウドデータがローカルに保存されます",-1),g("p",{class:"text-red-700 dark:text-red-400"},"✗ ローカルの既存データは削除されます",-1)]))):oe("",!0)])])])):oe("",!0),d[15]||(d[15]=Tt('<div class="mb-6 p-4 bg-orange-50 dark:bg-orange-900/20 rounded-lg"><div class="flex items-start space-x-3"><svg class="w-5 h-5 text-orange-500 mt-0.5" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg><div><h5 class="text-sm font-medium text-orange-800 dark:text-orange-400"> 重要な注意事項 </h5><p class="text-sm text-orange-700 dark:text-orange-300"> この操作は元に戻すことができません。データが失われる可能性があります。 重要なデータは事前にエクスポートしてバックアップを取ることをお勧めします。 </p></div></div></div>',1)),g("div",O2,[g("button",{onClick:d[3]||(d[3]=x=>c.$emit("close")),class:"flex-1 bg-gray-300 dark:bg-gray-600 hover:bg-gray-400 dark:hover:bg-gray-500 text-gray-700 dark:text-gray-200 font-medium py-2 px-4 rounded-lg transition-colors"}," キャンセル "),g("button",{onClick:u,class:"bg-red-600 hover:bg-red-700 text-white font-medium py-2 px-4 rounded-lg transition-colors"}," ログアウト "),g("button",{onClick:l,disabled:!o.value||a.value,class:"flex-1 bg-indigo-600 hover:bg-indigo-700 disabled:bg-indigo-400 text-white font-medium py-2 px-4 rounded-lg transition-colors disabled:cursor-not-allowed"},Z(a.value?"解決中...":"競合を解決"),9,U2)])])])])}}}),L2={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6 space-y-6"},H2={class:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4"},M2={class:"flex items-center justify-between mb-4"},G2={class:"flex items-center space-x-2"},j2={key:0,class:"bg-white dark:bg-gray-600 rounded-md p-3 mb-4"},z2={class:"flex items-center space-x-3"},N2=["src","alt"],K2={class:"flex-1"},V2={class:"text-sm font-semibold text-gray-900 dark:text-white"},q2={class:"text-xs text-gray-600 dark:text-gray-400"},W2=["disabled"],Y2={key:0,class:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4"},Q2={class:"bg-white dark:bg-gray-600 rounded-md p-3 mb-4"},X2={class:"flex items-center justify-between"},J2={class:"flex items-center space-x-3"},Z2={class:"relative inline-flex items-center cursor-pointer"},ew=["checked"],tw={key:0,class:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-700 rounded-md p-3 mb-4"},rw={key:1,class:"mb-4 p-3 bg-gray-50 dark:bg-gray-700 rounded-md"},nw={class:"flex items-center justify-between"},sw={class:"text-sm font-medium text-gray-900 dark:text-white"},ow={key:2,class:"mb-4 p-3 bg-red-50 dark:bg-red-900/20 rounded-md"},aw={class:"flex items-start space-x-2"},iw={class:"text-sm text-red-700 dark:text-red-300"},lw={key:1,class:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4"},cw=["disabled"],uw={key:0,class:"mt-2 text-xs text-gray-600 dark:text-gray-400 text-center"},dw={key:0},fw={key:1},hw={key:2},xw={key:3},gw={key:4},pw={key:1,class:"text-xs text-gray-500 dark:text-gray-400 mt-2 text-center"},vw={key:2,class:"text-xs text-gray-500 dark:text-gray-400 mt-2 text-center"},yw={key:2,class:"mb-4 p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded-md"},mw={class:"flex items-start space-x-2"},ww=Qe({__name:"SyncSettings",setup(t){const e=Q(!1),r=Q(!1),n=Q(!1),s=Q(null),o=Q("enable_sync"),a=Q({holdings:0,locations:0,tokens:0,total:0}),i=En(),l=ws(),u=bs(),c=ue(()=>({isAuthenticated:qe.isAuthenticated.value,isLoading:qe.isLoading.value,user:qe.user.value,error:qe.error.value})),d=ue(()=>Be.status.value);async function f(){try{await qe.signIn()}catch(k){at.handleError(k,"Google Sign In","error")}}async function h(){if(d.value.isEnabled)try{await Be.disableSync()}catch(k){at.handleError(k,"Disable Sync","error")}else await m()}async function m(){try{console.log("enableAutoSync called"),console.log("Current cloudFileExists:",d.value.cloudFileExists),await Be.checkCloudFileExists();const k=d.value.cloudFileExists;console.log("After force check, cloudFileExists:",k),k?(console.log("Cloud file exists - showing password prompt for sync enable"),o.value="enable_sync",r.value=!0):(console.log("No cloud file - showing password setup"),e.value=!0)}catch(k){console.error("Enable sync check error:",k),at.handleError(k,"Enable Sync Check","error")}}async function y(k){e.value=!1;try{console.log("Enabling sync with password...");const _=await Be.enableSync(k);console.log("Enable sync result:",_),_.success?(console.log("Sync enabled successfully"),await w(),console.log("Enable sync completed and stores refreshed")):(console.error("Enable sync failed:",_.message),_.conflictData?(s.value=_.conflictData,n.value=!0):at.handleError(new Error(_.message),"Enable Sync","error"))}catch(_){console.error("Enable sync error:",_),at.handleError(_,"Enable Sync","error")}}async function v(k){r.value=!1;try{if(console.log("Testing cloud password for existing data...","Purpose:",o.value),o.value==="enable_sync"){const _=await Be.enableSync(k);console.log("Enable sync result:",_),_.success?(console.log("Sync enabled successfully from existing cloud data"),await w(),console.log("Enable sync completed and stores refreshed")):(console.error("Enable sync failed:",_.message),_.conflictData?(s.value=_.conflictData,n.value=!0):at.handleError(new Error(_.message),"Enable Sync","error"))}else{Be.setCloudPassword(k);const{authService:_}=await ce(async()=>{const{authService:A}=await Promise.resolve().then(()=>xn);return{authService:A}},void 0),{secureStorage:C}=await ce(async()=>{const{secureStorage:A}=await Promise.resolve().then(()=>Kt);return{secureStorage:A}},void 0);if(!C.isUnlocked()&&!(await _.unlockWithPassword(k)).success&&(await C.clearIncompatibleEncryptedData(),!(await _.setupPassword(k)).success)){at.handleError(new Error("暗号化キーの設定に失敗しました"),"Manual Sync Setup","error");return}const S=await Be.performSync();S.success?(await w(),console.log("Manual sync completed and stores refreshed"),d.value.isEnabled&&(console.log("Resetting auto-sync timer after manual sync"),await Be.resetAutoSyncTimer())):S.conflictData?(s.value=S.conflictData,n.value=!0):at.handleError(new Error(S.message),"Manual Sync","error")}}catch(_){console.error("Password provided error:",_),at.handleError(_,"Sync Operation","error")}}async function p(){try{if(!c.value.isAuthenticated){at.handleError(new Error("Google認証が必要です"),"Manual Sync","error");return}if(!Be.hasCloudPassword.value)if(await Be.checkCloudFileExists(),d.value.cloudFileExists){o.value="manual_sync",r.value=!0;return}else{e.value=!0;return}const k=await Be.performSync();k.success?(await w(),console.log("Manual sync completed and stores refreshed"),d.value.isEnabled&&(console.log("Resetting auto-sync timer after manual sync"),await Be.resetAutoSyncTimer())):k.conflictData?(s.value=k.conflictData,n.value=!0):at.handleError(new Error(k.message),"Manual Sync","error")}catch(k){at.handleError(k,"Manual Sync","error")}}async function x(){n.value=!1,s.value=null,await w()}async function w(){await Promise.all([i.loadTokens(),l.loadHoldings(),l.loadAggregatedHoldings(),u.loadLocations()]),await E()}function b(k){const _=new Date(k),S=new Date().getTime()-_.getTime(),A=Math.floor(S/6e4);return A<1?"たった今":A<60?`${A}分前`:A<1440?`${Math.floor(A/60)}時間前`:_.toLocaleString("ja-JP")}async function E(){try{const{metadataService:k}=await ce(async()=>{const{metadataService:_}=await import("./metadata.service-8MYvfiJN.js");return{metadataService:_}},[]);a.value=await k.getUnsyncedDataCount()}catch(k){console.warn("Failed to update unsynced data count:",k)}}return gr(async()=>{await E();const k=setInterval(E,5e3);hs(()=>{clearInterval(k)})}),(k,_)=>(O(),L("div",L2,[_[20]||(_[20]=g("div",{class:"text-center"},[g("h3",{class:"text-xl font-semibold text-gray-900 dark:text-white mb-2"}," 同期設定 "),g("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," Google Driveとの同期設定を管理します ")],-1)),g("div",H2,[_[7]||(_[7]=Tt('<h4 class="text-lg font-medium text-gray-900 dark:text-white mb-3 flex items-center"><svg class="w-5 h-5 mr-2 text-blue-500" fill="currentColor" viewBox="0 0 24 24"><path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"></path><path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"></path><path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"></path><path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"></path></svg> Google Drive連携 </h4>',1)),g("div",M2,[g("div",G2,[g("div",{class:He(["w-3 h-3 rounded-full",c.value.isAuthenticated?"bg-green-500":"bg-gray-400"])},null,2),_[4]||(_[4]=g("span",{class:"text-sm font-medium text-gray-900 dark:text-white"}," 接続状況 ",-1))]),g("span",{class:He(["text-sm font-semibold px-2 py-1 rounded-full",c.value.isAuthenticated?"text-green-700 bg-green-100 dark:text-green-400 dark:bg-green-900/30":"text-gray-600 bg-gray-100 dark:text-gray-400 dark:bg-gray-600/30"])},Z(c.value.isAuthenticated?"接続済み":"未接続"),3)]),c.value.isAuthenticated&&c.value.user?(O(),L("div",j2,[g("div",z2,[c.value.user.picture?(O(),L("img",{key:0,src:c.value.user.picture,alt:c.value.user.name,class:"w-10 h-10 rounded-full border-2 border-gray-200 dark:border-gray-500"},null,8,N2)):oe("",!0),g("div",K2,[g("p",V2,Z(c.value.user.name),1),g("p",q2,Z(c.value.user.email),1)]),_[5]||(_[5]=g("svg",{class:"w-5 h-5 text-green-500",fill:"currentColor",viewBox:"0 0 20 20"},[g("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})],-1))])])):oe("",!0),c.value.isAuthenticated?oe("",!0):(O(),L("button",{key:1,onClick:f,disabled:c.value.isLoading,class:"w-full flex items-center justify-center space-x-3 bg-white border border-gray-300 rounded-lg px-4 py-3 text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-sm hover:shadow-md"},[_[6]||(_[6]=Tt('<svg class="w-5 h-5" viewBox="0 0 24 24"><path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"></path><path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"></path><path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"></path><path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"></path></svg>',1)),g("span",null,Z(c.value.isLoading?"接続中...":"Googleでサインイン"),1)],8,W2))]),c.value.isAuthenticated?(O(),L("div",Y2,[_[14]||(_[14]=g("h4",{class:"text-lg font-medium text-gray-900 dark:text-white mb-3 flex items-center"},[g("svg",{class:"w-5 h-5 mr-2 text-indigo-500",fill:"currentColor",viewBox:"0 0 20 20"},[g("path",{"fill-rule":"evenodd",d:"M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z","clip-rule":"evenodd"})]),We(" 自動同期設定 ")],-1)),g("div",Q2,[g("div",X2,[g("div",J2,[g("div",{class:He(["w-4 h-4 rounded-full",d.value.isEnabled?"bg-green-500":"bg-red-500"])},null,2),_[8]||(_[8]=g("span",{class:"text-sm font-medium text-gray-900 dark:text-white"}," 自動同期 ",-1))]),g("label",Z2,[g("input",{type:"checkbox",checked:d.value.isEnabled,onChange:h,class:"sr-only peer"},null,40,ew),_[9]||(_[9]=g("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-indigo-300 dark:peer-focus:ring-indigo-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-indigo-600"},null,-1))])])]),d.value.isEnabled?oe("",!0):(O(),L("div",tw,_[10]||(_[10]=[Tt('<div class="flex items-start space-x-2"><svg class="w-5 h-5 text-red-500 mt-0.5" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg><div><p class="text-sm font-medium text-red-800 dark:text-red-400"> 自動同期が無効です </p><p class="text-xs text-red-700 dark:text-red-300"> データの自動バックアップと同期が行われません </p></div></div>',1)]))),d.value.lastSyncTime?(O(),L("div",rw,[g("div",nw,[_[11]||(_[11]=g("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"最終同期:",-1)),g("span",sw,Z(b(d.value.lastSyncTime)),1)])])):oe("",!0),d.value.lastSyncError?(O(),L("div",ow,[g("div",aw,[_[13]||(_[13]=g("svg",{class:"w-5 h-5 text-red-500 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20"},[g("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})],-1)),g("div",null,[_[12]||(_[12]=g("p",{class:"text-sm font-medium text-red-800 dark:text-red-400"}," 同期エラー ",-1)),g("p",iw,Z(d.value.lastSyncError),1)])])])):oe("",!0)])):oe("",!0),c.value.isAuthenticated?(O(),L("div",lw,[_[16]||(_[16]=g("h4",{class:"text-lg font-medium text-gray-900 dark:text-white mb-3 flex items-center"},[g("svg",{class:"w-5 h-5 mr-2 text-green-500",fill:"currentColor",viewBox:"0 0 20 20"},[g("path",{"fill-rule":"evenodd",d:"M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z","clip-rule":"evenodd"})]),We(" 手動同期 ")],-1)),g("button",{onClick:p,disabled:d.value.isSyncing||!c.value.isAuthenticated,class:He(["w-full font-medium py-3 px-4 rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2",c.value.isAuthenticated&&!d.value.isSyncing?"bg-indigo-600 hover:bg-indigo-700 text-white focus:ring-indigo-500 disabled:bg-indigo-400":"bg-gray-300 text-gray-500 cursor-not-allowed"])},Z(d.value.isSyncing?"同期中...":`今すぐ同期${a.value.total>0?` (${a.value.total})`:""}`),11,cw),a.value.total>0?(O(),L("div",uw,[_[15]||(_[15]=We(" 未同期: ")),a.value.holdings>0?(O(),L("span",dw,"保有数量 "+Z(a.value.holdings)+"件",1)):oe("",!0),a.value.holdings>0&&(a.value.locations>0||a.value.tokens>0)?(O(),L("span",fw,", ")):oe("",!0),a.value.locations>0?(O(),L("span",hw,"場所 "+Z(a.value.locations)+"件",1)):oe("",!0),a.value.locations>0&&a.value.tokens>0?(O(),L("span",xw,", ")):oe("",!0),a.value.tokens>0?(O(),L("span",gw,"銘柄 "+Z(a.value.tokens)+"件",1)):oe("",!0)])):oe("",!0),c.value.isAuthenticated?d.value.isEnabled?oe("",!0):(O(),L("p",vw," 自動同期は無効ですが、手動同期は利用可能です ")):(O(),L("p",pw," 手動同期にはGoogle認証が必要です "))])):oe("",!0),d.value.conflictDetected?(O(),L("div",yw,[g("div",mw,[_[19]||(_[19]=g("svg",{class:"w-5 h-5 text-yellow-500 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20"},[g("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1)),g("div",null,[_[17]||(_[17]=g("p",{class:"text-sm font-medium text-yellow-800 dark:text-yellow-400"}," 同期競合が検出されました ",-1)),_[18]||(_[18]=g("p",{class:"text-sm text-yellow-700 dark:text-yellow-300 mb-2"}," ローカルデータとクラウドデータに違いがあります ",-1)),g("button",{onClick:_[0]||(_[0]=C=>n.value=!0),class:"text-sm bg-yellow-500 hover:bg-yellow-600 text-white px-3 py-1 rounded transition-colors"}," 競合を解決 ")])])])):oe("",!0),e.value?(O(),Ct(Td,{key:3,onClose:_[1]||(_[1]=C=>e.value=!1),onPasswordSet:y})):oe("",!0),r.value?(O(),Ct(Rd,{key:4,onClose:_[2]||(_[2]=C=>r.value=!1),onPasswordProvided:v})):oe("",!0),n.value?(O(),Ct(Od,{key:5,"conflict-data":s.value,onClose:_[3]||(_[3]=C=>n.value=!1),onResolved:x},null,8,["conflict-data"])):oe("",!0)]))}}),bw={class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"},_w={class:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full"},Ew={class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},kw={class:"flex items-center justify-between"},Cw={class:"p-6"},Dw={class:"space-y-4"},Aw={key:0,class:"text-sm space-y-1"},Bw={key:1,class:"text-sm text-red-600 dark:text-red-400"},Sw={class:"flex space-x-3 mt-6"},Fw=["disabled"],Pw=Qe({__name:"CloudPasswordChange",emits:["close","success"],setup(t,{emit:e}){const r=e,n=Q(""),s=Q(""),o=Q(""),a=Q(""),i=Q(!1),l=ue(()=>/[A-Z]/.test(s.value)),u=ue(()=>/[a-z]/.test(s.value)),c=ue(()=>/[0-9]/.test(s.value)),d=ue(()=>/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(s.value)),f=ue(()=>n.value.length>0&&s.value.length>=8&&l.value&&u.value&&c.value&&d.value&&o.value.length>=8&&s.value===o.value);async function h(){if(f.value){a.value="",i.value=!0;try{if(console.log("Starting password change process..."),n.value===s.value){a.value="新しいパスワードは現在のパスワードと異なる必要があります";return}if(!await St.verifyPassword(n.value)){a.value="現在のパスワードが正しくありません";return}console.log("Current password verified successfully");const y=await Be.changeCloudPassword(n.value,s.value);if(!y.success){a.value=y.message||"パスワード変更に失敗しました";return}console.log("Password change completed successfully"),window.showToast&&window.showToast.success("パスワード変更完了","クラウドパスワードが正常に変更されました"),r("success")}catch(m){console.error("Password change error:",m),at.handleError(m,"Password Change","error"),m.value=m.message||"パスワード変更中にエラーが発生しました"}finally{i.value=!1}}}return(m,y)=>(O(),L("div",bw,[g("div",_w,[g("div",Ew,[g("div",kw,[y[6]||(y[6]=g("h3",{class:"text-lg font-medium text-gray-900 dark:text-white"}," パスワード変更 ",-1)),g("button",{onClick:y[0]||(y[0]=v=>m.$emit("close")),class:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300"},y[5]||(y[5]=[g("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[g("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))])]),g("div",Cw,[g("form",{onSubmit:ps(h,["prevent"])},[g("div",Dw,[g("div",null,[y[7]||(y[7]=g("label",{for:"currentPassword",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," 現在のパスワード ",-1)),ct(g("input",{id:"currentPassword","onUpdate:modelValue":y[1]||(y[1]=v=>n.value=v),type:"password",required:"",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:text-white",placeholder:"現在のパスワードを入力"},null,512),[[Ot,n.value]])]),g("div",null,[y[8]||(y[8]=g("label",{for:"newPassword",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," 新しいパスワード ",-1)),ct(g("input",{id:"newPassword","onUpdate:modelValue":y[2]||(y[2]=v=>s.value=v),type:"password",required:"",minlength:"8",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:text-white",placeholder:"新しいパスワードを入力（8文字以上）"},null,512),[[Ot,s.value]])]),g("div",null,[y[9]||(y[9]=g("label",{for:"confirmPassword",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," 新しいパスワード（確認） ",-1)),ct(g("input",{id:"confirmPassword","onUpdate:modelValue":y[3]||(y[3]=v=>o.value=v),type:"password",required:"",minlength:"8",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:text-white",placeholder:"新しいパスワードを再入力"},null,512),[[Ot,o.value]])]),s.value?(O(),L("div",Aw,[g("div",{class:He(s.value.length>=8?"text-green-600":"text-red-600")}," ✓ 8文字以上 ",2),g("div",{class:He(l.value?"text-green-600":"text-red-600")}," ✓ 大文字を含む ",2),g("div",{class:He(u.value?"text-green-600":"text-red-600")}," ✓ 小文字を含む ",2),g("div",{class:He(c.value?"text-green-600":"text-red-600")}," ✓ 数字を含む ",2),g("div",{class:He(d.value?"text-green-600":"text-red-600")}," ✓ 記号を含む ",2),o.value?(O(),L("div",{key:0,class:He(s.value===o.value?"text-green-600":"text-red-600")}," ✓ パスワードが一致 ",2)):oe("",!0)])):oe("",!0),a.value?(O(),L("div",Bw,Z(a.value),1)):oe("",!0),y[10]||(y[10]=Tt('<div class="bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-700 rounded-md p-3"><div class="flex"><svg class="w-5 h-5 text-yellow-400 mr-2 mt-0.5" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg><div class="text-sm text-yellow-800 dark:text-yellow-200"><p class="font-medium">重要な注意事項</p><p>パスワードを変更すると、Google Driveの既存データが新しいパスワードで再暗号化されます。この処理には時間がかかる場合があります。</p></div></div></div>',1))]),g("div",Sw,[g("button",{type:"button",onClick:y[4]||(y[4]=v=>m.$emit("close")),class:"flex-1 bg-gray-300 hover:bg-gray-400 text-gray-700 font-medium py-2 px-4 rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2"}," キャンセル "),g("button",{type:"submit",disabled:!f.value||i.value,class:"flex-1 bg-indigo-600 hover:bg-indigo-700 disabled:bg-indigo-400 text-white font-medium py-2 px-4 rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:cursor-not-allowed"},Z(i.value?"変更中...":"パスワード変更"),9,Fw)])],32)])])]))}}),Tw={class:"min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors"},Rw={key:2},Iw={class:"bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700"},$w={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Ow={class:"flex justify-between items-center h-16"},Uw={class:"flex items-center space-x-4"},Lw={key:0,class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},Hw={key:1,class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},Mw={class:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700"},Gw={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},jw={class:"flex space-x-8"},zw={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},Nw={key:3,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"},Kw={class:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto"},Vw={class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},qw={class:"flex items-center justify-between"},Ww={class:"p-6"},Yw={key:4,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"},Qw={class:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full"},Xw={class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},Jw={class:"flex items-center justify-between"},Zw={class:"p-6"},eb=Qe({__name:"App",setup(t){const e=cg(),r=_s(),n=Q(document.documentElement.classList.contains("dark")),s=Q(!1),o=Q(!1);ar(()=>r.isAuthenticated,(f,h)=>{console.log("[DEBUG] sessionStore.isAuthenticated changed:",h,"->",f),h===!1&&f===!0&&(console.log("[DEBUG] Authentication state changed to true, navigating to /summary"),e.push("/summary"))});function a(){n.value=!n.value,n.value?(document.documentElement.classList.add("dark"),localStorage.setItem("darkMode","true")):(document.documentElement.classList.remove("dark"),localStorage.setItem("darkMode","false"))}function i(){console.log("[DEBUG] handleLoginSuccess called - sessionStore.isAuthenticated:",r.isAuthenticated),console.log("[DEBUG] About to navigate to /summary"),e.push("/summary"),console.log("[DEBUG] Navigation to /summary completed")}function l(){if(!Be.status.value.isEnabled){alert("パスワード変更には先に自動同期を有効にする必要があります。同期設定から自動同期を有効にしてください。");return}o.value=!0}function u(){o.value=!1}function c(){}function d(){console.log("[DEBUG] Conflict resolved successfully")}return gr(async()=>{const f=localStorage.getItem("darkMode");f==="true"?(n.value=!0,document.documentElement.classList.add("dark")):f==="false"?(n.value=!1,document.documentElement.classList.remove("dark")):(n.value=window.matchMedia("(prefers-color-scheme: dark)").matches,n.value&&document.documentElement.classList.add("dark")),r.initialize().then(()=>{console.log("[DEBUG] App.vue sessionStore.initialize completed - sessionStore.isAuthenticated:",r.isAuthenticated)});try{ce(async()=>{const{metadataService:h}=await import("./metadata.service-8MYvfiJN.js");return{metadataService:h}},[]).then(({metadataService:h})=>{console.log("[DEBUG] App.vue - forcing metadata reset on startup"),h.forceResetAllMetadata().then(()=>{console.log("[DEBUG] App.vue - legacy unsynced data reset completed");const m=[],y=[];for(let v=0;v<localStorage.length;v++){const p=localStorage.key(v);p&&y.push(p)}for(const v of y)v&&(v.includes("unsynced")||v.includes("metadata")||v.includes("syncData")||v.includes("conflictData")||v.includes("unsyncedCount")||v.startsWith("holding_")||v.startsWith("location_")||v.startsWith("token_"))&&m.push(v);m.forEach(v=>{localStorage.removeItem(v),console.log("[DEBUG] App.vue - removed legacy key:",v)}),m.length>0&&console.log("[DEBUG] App.vue - additional cleanup removed",m.length,"legacy keys"),setTimeout(()=>{console.log("[DEBUG] App.vue - forcing unsynced data count refresh")},1e3)}).catch(m=>{console.warn("[DEBUG] App.vue - failed to reset legacy unsynced data:",m)})})}catch(h){console.warn("[DEBUG] App.vue - failed to import metadata service:",h)}}),(f,h)=>{const m=Ha("router-link"),y=Ha("router-view");return O(),L("div",Tw,[je(Jm),ke(r).showUnlockPrompt?(O(),Ct(i2,{key:0,onUnlock:ke(r).handleUnlockSuccess,onCancel:ke(r).handleUnlockCancel},null,8,["onUnlock","onCancel"])):oe("",!0),ke(r).isAuthenticated?(O(),L("div",Rw,[je(Vm,{onOpenSyncSettings:h[0]||(h[0]=v=>s.value=!0),onOpenPasswordChange:l,onLogoutDiscard:ke(r).logoutAndDiscardChanges},null,8,["onLogoutDiscard"]),g("header",Iw,[g("div",$w,[g("div",Ow,[h[7]||(h[7]=g("div",{class:"flex items-center"},[g("h1",{class:"text-xl font-bold text-gray-900 dark:text-white"}," 暗号資産ポートフォリオ ")],-1)),g("div",Uw,[g("button",{onClick:a,class:"p-2 rounded-md text-gray-500 hover:text-gray-900 hover:bg-gray-100 dark:text-gray-400 dark:hover:text-white dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-primary-500"},[n.value?(O(),L("svg",Lw,h[5]||(h[5]=[g("path",{"fill-rule":"evenodd",d:"M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z","clip-rule":"evenodd"},null,-1)]))):(O(),L("svg",Hw,h[6]||(h[6]=[g("path",{d:"M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"},null,-1)])))])])])])]),g("nav",Mw,[g("div",Gw,[g("div",jw,[je(m,{to:"/summary",class:He(["border-b-2 py-4 px-1 text-sm font-medium transition-colors",f.$route.name==="summary"?"border-indigo-500 text-indigo-600 dark:text-indigo-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300"])},{default:Js(()=>h[8]||(h[8]=[We(" ポートフォリオ ")])),_:1,__:[8]},8,["class"]),je(m,{to:"/edit",class:He(["border-b-2 py-4 px-1 text-sm font-medium transition-colors",f.$route.name==="edit"?"border-indigo-500 text-indigo-600 dark:text-indigo-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300"])},{default:Js(()=>h[9]||(h[9]=[We(" 保有数量入力 ")])),_:1,__:[9]},8,["class"]),g("button",{onClick:h[1]||(h[1]=v=>s.value=!0),class:"border-b-2 py-4 px-1 text-sm font-medium transition-colors border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300 flex items-center space-x-1"},h[10]||(h[10]=[g("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[g("path",{d:"M5.5 16a3.5 3.5 0 01-.369-6.98 4 4 0 117.753-1.977A4.5 4.5 0 1113.5 16h-8z"})],-1),g("span",null,"同期設定",-1)]))])])]),g("main",zw,[je(y)])])):(O(),Ct(_m,{key:1,onLoginSuccess:i})),je($v),s.value?(O(),L("div",Nw,[g("div",Kw,[g("div",Vw,[g("div",qw,[h[12]||(h[12]=g("h3",{class:"text-lg font-medium text-gray-900 dark:text-white"}," 同期設定 ",-1)),g("button",{onClick:h[2]||(h[2]=v=>s.value=!1),class:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300"},h[11]||(h[11]=[g("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[g("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))])]),g("div",Ww,[je(ww)])])])):oe("",!0),o.value?(O(),L("div",Yw,[g("div",Qw,[g("div",Xw,[g("div",Jw,[h[14]||(h[14]=g("h3",{class:"text-lg font-medium text-gray-900 dark:text-white"}," パスワード変更 ",-1)),g("button",{onClick:h[3]||(h[3]=v=>o.value=!1),class:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300"},h[13]||(h[13]=[g("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[g("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))])]),g("div",Zw,[je(Pw,{onClose:h[4]||(h[4]=v=>o.value=!1),onSuccess:u})])])])):oe("",!0),ke(Be).status.value.conflictDetected&&ke(Be).conflictData.value?(O(),Ct(Od,{key:5,"conflict-data":ke(Be).conflictData.value,onClose:c,onResolved:d},null,8,["conflict-data"])):oe("",!0)])}}}),cl=Fu(eb),tb=Jh();cl.use(tb);cl.use(Bd);cl.mount("#app");"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(t=>{console.log("SW registered: ",t)}).catch(t=>{console.log("SW registration failed: ",t)})});export{_m as _,Ur as a,ge as d,_s as u};
